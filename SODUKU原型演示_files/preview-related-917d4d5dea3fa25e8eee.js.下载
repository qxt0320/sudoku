(()=>{var Zi={82940:(x,B,n)=>{"use strict";n.d(B,{Ph:()=>i,rm:()=>k});var g=n(35608),f=n.n(g);const E=g.gzip,_=g.ungzip,i=M=>E(new TextEncoder().encode(M)),k=M=>new TextDecoder().decode(_(new Uint8Array(M)))},10404:(x,B,n)=>{"use strict";n.d(B,{lQ:()=>no,Qb:()=>Fn,od:()=>io});var g=n(87587),f=n(71114),E=n(17200),_=n(4978),i=n(35433),k=n(71101);const M={};function l(d,S){typeof d=="object"&&(S=d,d=void 0),S=S||{};const D=(0,E.H)(d,S.path||"/socket.io"),ee=D.source,Q=D.id,fe=D.path,ve=M[Q]&&fe in M[Q].nsps,_e=S.forceNew||S["force new connection"]||S.multiplex===!1||ve;let ue;return _e?ue=new _.d(ee,S):(M[Q]||(M[Q]=new _.d(ee,S)),ue=M[Q]),D.query&&!S.query&&(S.query=D.queryKey),ue.socket(D.path,S)}Object.assign(l,{Manager:_.d,Socket:i.s,io:l,connect:l});var y=n(63828),m=n(81697),c=n(60074),u=n(71090);const h=2*1e3,w=16*1e3,W=32*1e3,R=()=>{},Y=d=>{(0,c.Q)("SKT-QUE",d)},J=()=>({destroy:R,reset:R,emitAsync:P,emitLossy:R,reqRoomAsync:()=>Promise.resolve(),getIsConnected:()=>!0,getSocketId:()=>"",getReadyPromise:()=>Promise.resolve(),getOffsetMsec:()=>0,DUMMY:!0}),P=async(d,S)=>({type:d,payload:S,isDummy:!0}),z=d=>{let{query:{uId:S,fURL:D=globalThis.location.href.slice(0,128),uTag:ee=m.ck,vTag:Q=u.i},lossyListenerMap:fe={},queueListenerMap:ve={},socketUrl:_e=globalThis.location.origin,socketPath:ue=m.z3,usePolling:be=!1}=d;const q=(0,y.hF)();let le,L=(0,g.vH)(),U=0,H=N,ce=null;const Ce=()=>{le!==void 0&&(le.close(),le=void 0,L=(0,g.vH)(),Ne=!1,ce&&clearTimeout(ce),ce=null)},Fe=()=>{Ce();const we=new _.d(_e,{path:ue,query:{uId:S,fURL:D,uTag:ee,vTag:Q},transports:be?["polling","websocket"]:["websocket"],reconnectionDelay:Math.round((h+w)/2),reconnectionDelayMax:W,randomizationFactor:(w-h)/(w+h),closeOnBeforeunload:!1}).socket(m.Or);we.on("connect_error",Se=>{console.log("[socket] connect_error",Se),Se.message.includes(m.Jc)&&(Ce(),q.dispatchEvent({type:m.E$,payload:{error:Se}})),q.dispatchEvent({type:m.Rm,payload:{error:Se}})}),we.on("connect",async()=>{console.log("[socket] connect");{const Se=Date.now(),Re=await Pe(m.hD),Ie=Date.now();U=Re-(Se+Ie)*.5}H!==N&&await Pe(m.Cu,H),ce=(0,f.Q3)(()=>{!le||!le.connected||Ne||Fe()},(10+Math.random()*10)*60*1e3),console.log("[socket] ready"),q.dispatchEvent({type:m.FC}),L.resolve()});{let Se=Promise.resolve();const Re=Ie=>{const He=Se.then(Ie);return Se=He.then(R,Y),He};q.clear();for(const[Ie,He]of Object.entries(fe))we.on(Ie,Ge=>He({type:Ie,payload:Ge})),q.addEventListener(Ie,Ge=>{let{payload:K}=Ge;return He({type:Ie,payload:K})});for(const[Ie,He]of Object.entries(ve))we.on(Ie,Ge=>Re(()=>He({type:Ie,payload:Ge}))),q.addEventListener(Ie,Ge=>{let{payload:K}=Ge;return Re(()=>He({type:Ie,payload:K}))})}le=we};let Ne=!1;const Pe=(Ke,we)=>new Promise(Se=>{le.emit(Ke,we,Se),Ne=!0}).then(Se=>{Ne=!1;const{error:Re,result:Ie}=Se;if(Re!==void 0)throw Object.assign(new Error(typeof Re=="object"&&Re.message||"SKT-USR error"),Re);return Ie}),Ae=(Ke,we)=>{le.volatile.emit(Ke,we)},Ue=async Ke=>{await Pe(m.Cu,Ke),H=Ke};return Fe(),{destroy:Ce,reset:Fe,emitAsync:Pe,emitLossy:Ae,reqRoomAsync:Ue,getIsConnected:()=>le?le.connected:!1,getSocketId:()=>le?le.id:"",getReadyPromise:()=>L.promise,getOffsetMsec:()=>U}},N=[[],[],[]];var Z=n(4423),te=n(6515),G=n(77101),re=n(3892),de=n(91320),ne=n(66234),oe=n(76336),Oe=n(21630);const De=0,ot={cDebugMin:De,cCmtPack:De+1,cCmtThread:De+2,cCmtContent:De+3,cDebugMax:35},se=(0,Oe.$)("cmt-type",ot),me=se.pack("cCmtPack"),Te=se.pack("cCmtThread"),mt=se.pack("cCmtContent"),Et=new Set(["cCmtPack","cCmtThread","cCmtContent"]),At=new Set([me,Te,mt]);var kt=n(80693);const en={unstyled:0,"header-one":1,"header-two":2,"header-three":3,"ordered-list-item":4,"unordered-list-item":5,atomic:6},Kt=(0,Oe.$)("DraftBlockType",en),an={left:0,center:1,right:2,justify:3},Dt=(0,Oe.$)("DraftAlignment",an),Wt={LINK:0,IMAGE:1},Ht=(0,Oe.$)("DraftEntityMapType",Wt),tn={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2},Vt=(0,Oe.$)("DraftEntityMapMutability",tn),pn={_blank:0,_self:1},F=(0,Oe.$)("DraftLinkTargetOption",pn),pe=d=>{const S={};return Object.keys(d).forEach(D=>{const{type:ee,mutability:Q,data:fe}=d[D],ve=[Ht.pack(ee),Vt.pack(Q)],_e=[];ee==="LINK"?(ve.push(F.pack(fe.targetOption)),_e.push(fe.url||"")):ee==="IMAGE"&&(ve.push((0,ne.xd)(fe.width),Dt.pack(fe.alignment)),_e.push(fe.src||"",fe.alt||"")),S["e/"+D]=[ve.join(oe.Kt),..._e]}),S},Me=d=>{const S={};for(const D of Object.keys(d)){if(!D.startsWith("e/"))continue;const ee=D.split("e/")[1],[Q,...fe]=d[D],[ve,_e,ue,be]=Q.split(oe.Kt),q=Ht.parse(ve),le=Vt.parse(_e);S[ee]=q==="LINK"?{type:q,mutability:le,data:{url:fe[0],targetOption:F.parse(ue)}}:{type:q,mutability:le,data:{src:fe[0],alt:fe[1],width:(0,ne.nZ)(ue),alignment:Dt.parse(be)}}}return S},he=d=>{const S={};return Object.keys(d).forEach(D=>{const{text:ee,type:Q,depth:fe,inlineStyleRanges:ve,entityRanges:_e,data:{textAlign:ue,textIndent:be,paraSpacing:q}}=d[D],le=[Kt.packDef(Q,"unstyled"),(0,ne.xd)(fe),ue?Dt.pack(ue):"",be!==void 0?(0,ne.xd)(be):"",q!==void 0?(0,de.DF)(q):""];S["b/"+D]=[le.join(oe.Kt),ee,ve.map(L=>{let{offset:U,length:H,style:ce}=L;return A(U,H,ce)}),_e.map(L=>{let{offset:U,length:H,key:ce}=L;return je(U,H,ce)})]}),S},je=(d,S,D)=>""+(0,ne.xd)(d)+oe.Kt+(0,ne.xd)(S)+oe.Kt+(0,ne.xd)(D),ye=d=>{const S=d.indexOf(oe.Kt),D=d.indexOf(oe.Kt,S+1);return[(0,ne.nZ)(d.slice(0,S)),(0,ne.nZ)(d.slice(S+1,D)),(0,ne.nZ)(d.slice(D+1))]},A=(d,S,D)=>""+(0,ne.xd)(d)+oe.Kt+(0,ne.xd)(S)+oe.Kt+D,O=d=>{const S=d.indexOf(oe.Kt),D=d.indexOf(oe.Kt,S+1);return[(0,ne.nZ)(d.slice(0,S)),(0,ne.nZ)(d.slice(S+1,D)),d.slice(D+1)]},X=d=>{const S={};for(const D of Object.keys(d)){if(!D.startsWith("b/"))continue;const ee=D.split("b/")[1],[Q,fe,ve,_e]=d[D],[ue,be,q,le,L]=Q.split(oe.Kt),U={};q!==""&&(U.textAlign=Dt.parse(q)),le!==""&&(U.textIndent=(0,ne.nZ)(le)),L!==""&&L!==void 0&&(U.paraSpacing=(0,de.Ci)(L)),S[ee]={text:fe,type:Kt.parse(ue),depth:(0,ne.nZ)(be),inlineStyleRanges:ve.map(H=>{const[ce,Ce,Fe]=O(H);return{offset:ce,length:Ce,style:Fe}}),entityRanges:_e.map(H=>{const[ce,Ce,Fe]=ye(H);return{offset:ce,length:Ce,key:Fe}}),data:U}}return S},ie=d=>{let{message:S}=d;const{blocks:D={},entityMap:ee={}}=S;return{...he(D),...pe(ee)}},Be=d=>({message:{blocks:X(d),entityMap:Me(d)}}),We=d=>({T:se.pack(d.type),IC:[(0,ne.xd)(d.index),(0,ne.hc)(d.ctime)].join(oe.Kt)}),et=d=>{const[S,D]=d.IC.split(oe.Kt);return{type:se.parse(d.T),index:(0,ne.nZ)(S),ctime:(0,ne.sO)(D)}},ht=d=>({...We(d),R:d.refKey}),at=d=>({...et(d),refKey:d.R}),lt=d=>({...We(d),...ie(d),xy:(0,de.jq)(d.x,d.y),wh:(0,de.jq)(d.w,d.h),z:(0,de.DF)(d.z),userInfo:d.userInfo,userId:(0,de.DF)(d.userId),mtime:(0,ne.hc)(d.mtime),isCompleted:(0,kt.aY)(d.isCompleted),canvasVec2:d.canvasVec2?{x:(0,de.DF)(d.canvasVec2.x),y:(0,de.DF)(d.canvasVec2.y)}:d.canvasVec2,canvasCid:d.canvasCid,threadType:d.threadType}),$e=d=>{const[S,D]=(0,de.dn)(d.xy),[ee,Q]=(0,de.dn)(d.wh),fe=d.canvasVec2?(0,de.Ci)(d.canvasVec2.x):void 0,ve=d.canvasVec2?(0,de.Ci)(d.canvasVec2.y):void 0,_e=(0,de.Ci)(d.z);return{...et(d),...Be(d),x:S,y:D,w:ee,h:Q,z:_e,mtime:(0,ne.sO)(d.mtime),userInfo:d.userInfo,userId:(0,de.Ci)(d.userId),isCompleted:(0,kt.YI)(d.isCompleted),canvasCid:d.canvasCid,threadType:d.threadType,canvasVec2:fe&&ve?{x:fe,y:ve}:void 0}},Le=d=>({...We(d),...ie(d),mtime:(0,ne.hc)(d.mtime),userInfo:d.userInfo}),ft=d=>({...et(d),...Be(d),mtime:(0,ne.sO)(d.mtime),userInfo:d.userInfo}),Ct=d=>{try{switch(d.T){case void 0:return d;case me:return at(d);case Te:return $e(d);case mt:return ft(d);default:throw new Error("invalid attr: "+d.T+" -> "+se.parse(d.T))}}catch(S){throw(0,c.Q)("toP2CHA badDat",S,d),S}},_t=d=>{try{switch(d.type){case void 0:return d;case"cCmtPack":return ht(d);case"cCmtThread":return lt(d);case"cCmtContent":return Le(d);default:throw new Error("invalid attr: "+d.type)}}catch(S){throw(0,c.Q)("toP2CCA badDat",S,d),S}};var Bt=n(9390);const Ft=(d,S)=>{const D=_e=>{const ue=d(_e);return ue===void 0?[]:ue.sub.map(be=>d(be))},ee=(0,Bt.Ir)(_e=>_e.sub.map(ue=>d(ue))),Q=(_e,ue)=>{const be=d(_e);be!==void 0&&(ue(be)||be.sub.length!==0&&ee(be,ue))};return{getHotItem:d,getSubHotItemList:D,walkHotItemSubtree:Q,isTrashed:_e=>(0,te.z4)(_e,S.getFlatTree()),__devHotTree:function(_e){_e===void 0&&(_e=te.$3);const ue=new Map,be=q=>{let le=ue.get(q);return le===void 0&&ue.set(q,le={}),le};return Q(_e,q=>{be(q.sup)[q.key]=q.hotAttr,q.sub.length!==0&&(be(q.sup)[q.key+" SUB"]=be(q.key))}),be(d(_e).sup)}}};var nn=n(53705),Nt=n(93834),mn=n(96293),tt=n(2150),fn=n(60264);const ei=(d,S,D)=>{const ee=L=>{if(L===void 0||L.length===0)return;const U=new Set;for(const ce of L)U.add(ce.key),ce.type==="I"&&U.add(ce.keySup);const H=(0,te.O2)([...U].filter(te.w3),D.getFlatTree());d({type:fn.K,payload:H})},Q=L=>{const U=[],H=L(U);return ee(D.applyDiff(U)),H},fe=L=>Q(U=>{const H=[],ce=L(H);for(const Ce of H)Ce.type==="update"?be(Ce.hotItem,U):Ce.type==="delete"&&q(Ce.key,U);return ce}),ve=function(){const L=[],U=[];let H,ce=!1;for(var Ce=arguments.length,Fe=new Array(Ce),Ne=0;Ne<Ce;Ne++)Fe[Ne]=arguments[Ne];for(const Pe of Fe){H=Pe(L);const Ae=D.applyDiff(L);Ae!==void 0&&(U.push(...Ae),ce?D.combineLastUndo():ce=!0)}return ee(U),H},_e=function(){for(var L=arguments.length,U=new Array(L),H=0;H<L;H++)U[H]=arguments[H];const ce=U.map(Ce=>Fe=>{const Ne=[],Pe=Ce(Ne);for(const Ae of Ne)Ae.type==="update"?be(Ae.hotItem,Fe):Ae.type==="delete"&&q(Ae.key,Fe);return Pe});return ve(...ce)},ue=(L,U)=>{for(const H of Object.keys(L)){const ce=L[H],Ce=U[H];ce!==Ce&&(0,nn.$N)(ce)&&(0,nn.$N)(Ce)&&JSON.stringify(ce)===JSON.stringify(Ce)&&(L[H]=Ce)}},be=(L,U)=>{const H=(0,te.c6)(L.key,D.getFlatTree());if(H===void 0)U.push({type:tt.P6,key:L.key,keySup:L.sup}),U.push({type:tt.q$,key:L.key,attrDiff:_t(L.hotAttr)});else{H.sup!==L.sup&&U.push({type:tt.P6,key:L.key,keySup:L.sup});const ce=_t(L.hotAttr);ue(ce,H.attr);const Ce=(0,mn.O)(ce,H.attr);Ce!==void 0&&U.push({type:tt.q$,key:L.key,attrDiff:Ce})}},q=(L,U)=>{D.getFlatItem(L)&&U.push({type:tt.P6,key:L,keySup:te.bx})},le=(L,U,H)=>{D.getFlatItem(L)&&D.getFlatItem(U)&&H.push({type:tt.P6,key:L,keySup:U})};return{_edit:Q,_editAction:fe,_editBatch:ve,_editActionBatch:_e,onRemotePatchList:L=>{const U=[];for(const H of L){const ce=D.applyDiffNoUndo(H.diffList,H.clock);ce!==void 0&&U.push(...ce)}ee(U)},updateHotItem:L=>Q(U=>{be(L,U)}),updateHotItemBatch:L=>Q(U=>{for(const H of L)be(H,U)}),deleteHotItem:L=>Q(U=>{q(L,U)}),deleteHotItemBatch:L=>Q(U=>{for(const H of L)q(H,U)}),moveHotItem:(L,U)=>Q(H=>{le(L,U,H)}),moveHotItemBatch:L=>Q(U=>{for(const[H,ce]of L)le(H,ce,U)}),editHotItemBatch:L=>Q(U=>{for(const H of L)H.type==="update"?be(H.hotItem,U):H.type==="delete"&&q(H.key,U)}),updateHotAttrMerge:(L,U)=>Q(H=>{const ce=S(L);if(ce===void 0)throw new Error("no item: "+L);be((0,Nt.iA)(ce,"hotAttr",{...ce.hotAttr,...U}),H)}),updateHotAttrKV:(L,U,H)=>Q(ce=>{const Ce=S(L);if(Ce===void 0)throw new Error("no item: "+L);be((0,Nt.iA)(Ce,"hotAttr",(0,Nt.iA)(Ce.hotAttr,U,H)),ce)}),canUndo:D.canUndo,canRedo:D.canRedo,combineMergeMark:D.combineMergeMark,combineMerge:D.combineMerge,undo:()=>{ee(D.undo())},redo:()=>{ee(D.redo())}}},ti=d=>{const S=(0,y.Dt)(),D=S.subscribe,ee=S.unsubscribe,Q=An(d),fe=Ft(Q,d),ve=()=>ni(d.getFlatTree),_e=ei(S.send,Q,d),{_edit:ue,_editAction:be,_editBatch:q,_editActionBatch:le,...L}=_e;return{subscribe:D,unsubscribe:ee,...fe,createRoCmtStore:ve,...L}},An=d=>S=>{const D=d.getFlatTree().get(S);if(D===void 0)return;const ee=d.getOCache(D);return ee.hotItem===void 0&&(ee.hotItem={key:D.key,sup:D.sup,sub:D.sub,hotAttr:Ct(D.attr)}),ee.hotItem},ni=d=>{const S=(0,re.A)(d(),(0,Z.LQ)({})),D=()=>S.getFlatTree()!==d(),ee=()=>S.sync(d()),Q=An(S),fe=Ft(Q,S);return{hasUpdate:D,syncUpdate:ee,...fe}};var ii=n(70177),oi=n(31810),gn=n(2022),ri=n(3233);const si=d=>d.join(gn.ox),ci=d=>d.split(gn.ox),$i=d=>[...d,""].join(SEP_LINE),Dn=d=>d.split(gn.ox).filter(Boolean),li=d=>{const S=[],D=new Set;for(let ee=d.length-1;ee>=0;ee--){const Q=d[ee],{clock:fe,diffList:ve}=(0,tt.G8)(Q),_e=[];for(const ue of ve.reverse()){if(ue.type===tt.q$){const be=Object.keys(ue.attrDiff);if(be.length<=4){const q=ue.key+"|"+be.join("\0");if(D.has(q))continue;D.add(q)}}_e.unshift(ue)}_e.length!==0&&S.unshift((0,tt.ZC)({clock:fe,diffList:_e}))}return S},ai=4*1024*1024,pi=d=>{let S=0,D=[];const ee=[D];for(const Q of d)S+=Q.length,D.push(Q),S>=ai&&(S=0,D=[],ee.push(D));return ee},yn=(d,S)=>{const{diffList:D,clock:ee}=(0,tt.G8)(S);return(0,ri.IV)(d,D,ee,void 0)};var Yt=n(82940);const Bn=async function(d,S){return S===void 0&&(S={}),On("/flpak/w-pakget/"+d+"?"+new URLSearchParams(jn(S)),d)},Qi=async function(d,S){return S===void 0&&(S={}),On("/local/flpak/w-pakget/"+d+"?"+new URLSearchParams(jn(S)),d)},On=async(d,S)=>{const D=await fetch(d);if(D.status!==200){const Fe=await D.text();throw Object.assign(new Error("error fetch flpak: "+d+" ["+D.status+"] "+Fe),{status:D.status})}const ee=await D.arrayBuffer(),[Q,fe]=(0,ii.qV)(ee),ve=(0,oi.CZ)(Q),_e=ee.slice(fe),[ue,be,q,le,L]=JSON.parse(ve),U=mi(_e,L),H=ue===null?void 0:{t10s:ue[0],size:ue[1],tre:U.shift()},ce=[];for(const[Fe,Ne]of be)ce.push({t10s:Fe,size:Ne,pbx:U.shift()});const Ce=[];for(const Fe of q)Ce.push({t10s:Fe,pch:new TextDecoder().decode(U.shift())});return console.log("Flpak: "+S+"@"+new Date(le).toISOString()+", tre: "+((H==null?void 0:H.size)||0)+"B, pbx: #"+ce.length+"/"+ce.reduce((Fe,Ne)=>{let{size:Pe}=Ne;return Fe+Pe},0)+"B, pch: #"+Ce.length+"/"+Ce.reduce((Fe,Ne)=>{let{pch:Pe}=Ne;return Fe+Pe.length},0)+"B"),[H,ce,Ce,new Date(le)]},jn=d=>(0,Nt.lw)(d,S=>!!S),mi=function(d,S,D){return D===void 0&&(D=0),S.map(ee=>{const Q=d.slice(D,D+ee);return D+=ee,Q})},_i=d=>{let[S,D,ee]=d;const Q=(0,te.Z0)((0,Yt.rm)(S.tre));for(const{pbx:fe}of D){const ve=(0,Yt.rm)(fe);for(const _e of Dn(ve))yn(Q,_e)}for(const{pch:fe}of ee)yn(Q,fe);return Q};var ui=n(30388);const di=d=>{const[S,D,ee]=d,Q=()=>(0,te.Z0)((0,Yt.rm)(S.tre)),fe=function(q){q===void 0&&(q=-1);const le=[];for(const{pbx:L,t10s:U}of D){if(U<q)continue;const H=(0,Yt.rm)(L);for(const ce of Dn(H))le.push(ce)}for(const{pch:L,t10s:U}of ee)U<q||le.push(L);return le},ve=function(q){q===void 0&&(q=-1);const le=[];for(const L of fe(q))le.push((0,tt.G8)(L));return le},_e=function(q){q===void 0&&(q=-1);const le=[];for(const L of fe(q)){const{clock:U,diffList:H}=(0,tt.G8)(L);le.push([(0,Z.I_)(U).slice(5),H,L])}return le};return{getParsedTre:Q,getPchList:fe,getPatchList:ve,getReadablePatchList:_e,filterReadablePatchList:function(q,le){return le===void 0&&(le=-1),_e(le).filter(L=>{let[,U,H]=L;return H.includes(q)})},getMergedReadablePatchList:function(q,le){q===void 0&&(q=-1),le===void 0&&(le=16);const L=[];let U={timePrefix:"",countDI:0,countDA:0,userIdSet:new Set};const H=ce=>{U.timePrefix!==ce&&(U.timePrefix!==""&&L.push(U.timePrefix.slice(5)+"..Z I*"+(U.countDI||"-")+" A*"+(U.countDA||"-")+" ["+[...U.userIdSet].join(",")+"]"),U={timePrefix:ce,countDI:0,countDA:0,userIdSet:new Set})};for(const{clock:[ce,Ce],diffList:Fe}of ve(q)){const Ne=new Date(ce).toISOString().slice(0,le);H(Ne),U.userIdSet.add(Ce);for(const{type:Pe}of Fe)Pe===tt.P6?U.countDI++:U.countDA++}return H(""),L},flpak:d}},In=d=>Math.floor(d/10/1e3),hi=d=>{const[S]=(0,tt.$i)(d);return In(S)},fi=d=>{let[S,D,ee]=d;return ee.length!==0?ee[ee.length-1].t10s:D.length!==0?D[D.length-1].t10s:S.t10s};var bn=n(50781);const wn=(d,S)=>{let D=!1,ee=0,Q=0;const fe=new Map;let ve=[],_e,ue,be,q;const le=()=>{ue===void 0&&console.log("sync|onSocketConnect")},L=we=>{let[Se,,Re]=we;if(Se!==d)return!1;const Ie=ci(Re);for(const He of Ie)ve.push([He,hi(He),!1]);return be!==void 0&&be(Ie.map(He=>(0,tt.G8)(He))),!0},U=async(we,Se)=>{if(ue!==void 0)throw new Error("no re-init flatStore");_e=we,q=Se;const Re=await q(d);{const Ge="INSP-INIT-FLPAK";location.hash.includes(Ge)&&Object.assign(globalThis,{[Ge+"/"+d]:{...di(Re),__flpakKey:d,__name:S}})}ee=fi(Re);const Ie=_i(Re);let He=te.DO;{const Ge="BYPASS-FLPAK";location.hash.includes(Ge)&&(He=K=>console.warn("["+Ge+"|vFT]",K))}for(const[Ge,K,xe]of ve)!xe&&ee>=K||yn(Ie,Ge);He(Ie),ue=(0,re.A)(Ie,we,(Ge,K,xe)=>{if(D&&console.log("flat|onPatch",{diffList:Ge,clock:K,isLocal:xe}),ve.push([(0,tt.ZC)({diffList:Ge,clock:K}),In(K[0]),xe]),xe)return;const[gt,ut,Pt,zt]=K;Q=Math.max(Q,gt);const Ot=(0,Z.kY)(ut,Pt);if(_e.selfCCK===Ot)throw new Error("unexpected selfCck: "+Ot);const on=fe.get(Ot)||-1;if(on>=zt)throw new Error("bad editId for cck: "+Ot+", last: "+on+", new: "+zt);fe.set(Ot,zt)},(Ge,K)=>{console.log("flat|requestResync",{error:Ge,message:K})}),be=Ge=>{for(const K of Ge)ue.applyDiffNoUndo(K.diffList,K.clock)}},H=we=>{be=we},ce=()=>_e,Ce=()=>ue,Fe=async function(we){we===void 0&&(we="");try{if(!ue||!ee||!Ae())return;const Se=ue.getFlatTree(),Re=(0,te.Z7)(Se),Ie=(0,Yt.Ph)(Re);await(0,bn.au)("//FSS/"+S+"/"+d,new Blob([Ie],{type:"application/octet-stream"}),{message:we,treRawSize:Re.length,treSize:Ie.byteLength})}catch(Se){console.warn("saveSOS",we,Se)}},Ne=async()=>{try{const we=await(0,bn.IF)("//FSS/"+S+"/"+d);if(we.length){console.warn("[loadSOS] found "+we.length+" record");const{data:Se,extra:Re}=we[0];console.warn("[loadSOS] load record from "+new Date(Re.time).toISOString());const Ie=await(0,ui.H)(Se),He=(0,Yt.rm)(Ie);console.warn("[loadSOS] record treRaw: "+He.length+" / "+Re.treRawSize);const Ge=(0,te.Z0)(He);return console.warn("[loadSOS] record tree: "+Ge.size),{tree:Ge,...Re}}}catch(we){console.warn("loadSOS",we)}},Pe=async()=>{try{return await(0,bn.Af)("//FSS/"+S+"/"+d)}catch(we){console.warn("freeSOS",we)}},Ae=()=>{for(const[,,we]of ve)if(we)return!0;return!1};return{flpakKey:d,name:S,__setIsDev:we=>{D=we},onSocketConnect:le,onRemotePayloadSave:L,bind:U,useExtORPL:H,getClockStore:ce,getFlatStore:Ce,saveSOS:Fe,loadSOS:Ne,freeSOS:Pe,hasPatch:Ae,preSettlePatch:()=>{const we=[];for(const[Se,,Re]of ve)Re&&we.push(Se);return we},postSettlePatch:we=>{ve=ve.filter(Se=>{let[Re,Ie,He]=Se;return!He||!we.includes(Re)})}}},gi=(d,S)=>{let D,ee;return{flpakKey:d,name:"[DUMMY]"+S,__setIsDev:Q=>{},onSocketConnect:()=>{},onRemotePayloadSave:Q=>{let[fe,,ve]=Q;return!1},bind:async(Q,fe)=>{if(ee!==void 0)throw new Error("no re-init flatStore");D=Q,ee=(0,re.A)((0,te.ZR)(),Q)},useExtORPL:Q=>{},getClockStore:()=>D,getFlatStore:()=>ee,saveSOS:async Q=>{},loadSOS:async()=>{},freeSOS:async()=>0,hasPatch:()=>!1,preSettlePatch:()=>[],postSettlePatch:Q=>{}}};var qi=n(91458);const eo=de.jq,to=de.dn,yi=d=>{const S=new Map;let D=!1,ee,Q=()=>"";const fe=()=>{S.clear(),ue()};let ve=0;const _e=Pe=>{const Ae={socketId:Pe,index:ve++,lastCurAt:0,cur:void 0,lastStatAt:0,stat:void 0};return S.set(Pe,Ae),Ae},ue=(0,g.My)(async()=>{if(await(0,f.Kb)(2*1e3),ee===void 0)return;const Pe=[];for(const{socketId:Ue,lastStatAt:Ke}of S.values())Ke!==0&&Pe.push(Ue);const Ae=await ee([d,Pe]);for(const[Ue,Ke,we]of Ae){const Se=S.get(Ue)||_e(Ue);Se.lastStatAt=Date.now(),Se.stat=[Ke,we]}L=3}).trigger,be=Pe=>{let[Ae,Ue,Ke]=Pe;const[we,Se]=to(Ke),Re=[we,Se,Ue],Ie=S.get(Ae)||_e(Ae);Ie.lastCurAt=Date.now(),Ie.cur=Re,Ie.lastStatAt===0?ue():D=!0},q=Pe=>{let[Ae,Ue]=Pe;const Ke=S.has(Ue);Ae===0&&Ke?S.delete(Ue):Ae===1&&!Ke&&(_e(Ue),ue())};let le=["",NaN,NaN],L=0;const U=function(Pe){Pe===void 0&&(Pe=le[0]);for(const{socketId:Ae,cur:Ue}of S.values())if(Ue&&Ue[2]===Pe&&Ae!==Q())return!0;return!1};return{flpakKey:d,__curStatMap:S,onSocketConnect:fe,onRemoteCur:be,onRemoteSocket:q,hasOtherUser:U,tryPackCur:function(Pe,Ae,Ue){if(Ae===void 0&&(Ae=de.nl),Ue===void 0&&(Ue=de.nl),!(S.size<2)){if(le[0]!==Pe)L=3;else if(!L&&le[0]===Pe&&le[1]===Ae&&le[2]===Ue)return;if(le=[Pe,Ae,Ue],!(!U(Pe)&&!L))return L&&L--,[d,Pe,eo(Ae,Ue)]}},bind:async(Pe,Ae)=>{if(ee!==void 0)throw new Error("no re-init flatStore");ee=Pe,Q=Ae,ue()},getSocketStat:()=>{const Pe=Q(),Ae=[];for(const{socketId:Ue,stat:Ke}of S.values()){if(Ke===void 0)continue;const[we,Se]=Ke;Pe===Ue?Ae.unshift([Ue,we,Se]):Ae.push([Ue,we,Se])}return Ae},getCurStat:Pe=>{const Ae=Q(),Ue=[];for(const{socketId:Ke,index:we,cur:Se,stat:Re}of S.values()){if(Ae===Ke||Se===void 0||Re===void 0)continue;const[Ie,He,Ge]=Se;if(Ge!==Pe||Ie===de.nl)continue;const[K,xe]=Re;Ue.push([we,Ie,He,K,xe])}return Ue},pollChange:()=>D?(D=!1,!0):!1}},bi=d=>({flpakKey:d,onSocketConnect:()=>{},onRemoteCur:q=>{let[le,L,U]=q},onRemoteSocket:q=>{let[le,L]=q},hasOtherUser:q=>!1,tryPackCur:(q,le,L)=>{},bind:async(q,le)=>{},getSocketStat:()=>[],getCurStat:q=>[],pollChange:()=>!1}),En=()=>{};let wi=!1;const no=d=>{wi=d},Ei="dat",ki="cmt",Rn="mkt:dat",io=async d=>{let{flpakKey:S,userId:D,uTag:ee,token:Q,passwd:fe,isDummyCmt:ve=!1,isAllowDat:_e=!1,isAllowCmt:ue=!1,isAllowCur:be=!1,afterStoreCreate:q=En,__fetchFlpakAsync:le=Bn,onTransferError:L=En,onReadOnlyError:U=function(K,xe){return xe===void 0&&(xe=""),console.warn(K,xe)}}=d;const H=wn(S,Ei),ce=(ve?gi:wn)((0,qi.a6)(S),ki),Ce=(be?yi:bi)(S);await q({fssDat:H});const Fe=async(K,xe)=>{await H.saveSOS("OTE|"+K+"|"+xe),await L(K,xe)},Ne=D?z({query:{uId:String(D),uTag:ee},usePolling:wi,lossyListenerMap:{[m.GF]:K=>{const{payload:xe}=K;Ce.onRemoteCur(xe)}},queueListenerMap:{[m.E$]:K=>{const{error:xe}=K;console.log("flat-ws drop-client",xe),Fe("4XX",xe)},[m.Rm]:K=>{const{error:xe}=K;console.log("flat-ws error",xe),Fe("5XX",xe)},[m.FC]:()=>{console.log("flat-ws (re)connected"),H.onSocketConnect(),ce.onSocketConnect(),Ce.onSocketConnect()},[m.nB]:K=>{const{payload:xe}=K;console.log("flat-ws save:",xe),H.onRemotePayloadSave(xe)||ce.onRemotePayloadSave(xe)||console.log("drop save payload:",xe)},[m.FK]:K=>{const{payload:xe}=K;console.log("flat-ws room cursor:",xe),Ce.onRemoteSocket(xe)}}}):J();await Promise.all([(async()=>{await Ne.getReadyPromise()})(),(async()=>{await Ne.reqRoomAsync([_e?[S]:[],ue?[S]:[],be?[S]:[]])})()]);const Pe=async(K,xe,gt)=>{try{return await le(K,{token:Q,passwd:fe,skipTTre:String(xe||""),skipTPbxList:(gt||[]).join("")})}catch(ut){const Pt=Ln(ut);throw(0,c.Q)("fFS "+Pt,ut),await Fe(Pt,ut),ut}};await Promise.all([H.bind((0,Z.LQ)({userId:D,mtimeOffset:Ne.getOffsetMsec()}),Pe).catch(K=>{throw(0,c.Q)("bindDat",K),K}),ce.bind((0,Z.LQ)({userId:D,mtimeOffset:Ne.getOffsetMsec()}),Pe).catch(K=>{throw(0,c.Q)("bindCmt",K),K}),Ce.bind(async K=>await Ne.emitAsync(m.tE,K),Ne.getSocketId).catch(K=>{throw(0,c.Q)("bindCur",K),K})]);const Ae=new Error("[tracked-error]"),Ue=async(K,xe)=>{if(!K.hasPatch())return;const gt=K.preSettlePatch(),ut=pi(li(gt));xe!==!0&&(U(K.name===Ei?"Dat":"Cmt","RO|"+K.name+"|"+K.flpakKey+" #"+gt.length),ut.length=0);for(let Pt=0,zt=ut.length;Pt<zt;Pt++){const Ot=ut[Pt];try{await Ne.emitAsync(m.Tm,[K.flpakKey,Ot.length,si(Ot)])}catch(on){const Nn=Ln(on);throw(0,c.Q)("saveFss "+Nn,on,K.name,K.flpakKey,Pt+1+"/"+zt,Ot),await Fe(Nn,on),Ae}}K.postSettlePatch(gt)},Ke=(0,g.My)(async()=>(0,g.n7)(async()=>{await Ue(H,_e),await Ue(ce,ue),await H.freeSOS(),!Ce.hasOtherUser()&&await(0,f.Kb)(5*1e3)},42*1e3),K=>{if(K===Ae)return;const xe=Ln(K);(0,c.Q)("lFFss "+xe,K),Promise.resolve(Fe(xe,K)).catch(gt=>{(0,c.Q)("lFFss "+xe+" Err",gt)})});setInterval(Ke.trigger,2*1e3),be&&setInterval(()=>Ce.onSocketConnect(),20*60*1e3);const we=H.getFlatStore(),Se=(0,G.p)(H.getFlatStore());H.useExtORPL(Se.onRemotePatchList);const Re=ti(ce.getFlatStore());ce.useExtORPL(Re.onRemotePatchList);const Ie=()=>H.hasPatch()||ce.hasPatch(),He=(0,g.zH)(async()=>(0,g.rP)(async()=>{let K=0;for(;Ie();)Ke.trigger(),await Ke.getRunningPromise(),await(0,f.Kb)(Math.max(K*.5,5)*1e3),K++})),Ge=()=>globalThis.MB.getSelectionItems()[0].key;return{fssDat:H,fssCmt:ce,cssCur:Ce,flatSocket:Ne,flatStore:we,sdkStore:Se,cmtStore:Re,sendCur:(K,xe,gt)=>{if(be===!0){const ut=Ce.tryPackCur(K,xe,gt);ut&&Ne.emitLossy(m.sv,ut)}else be==="RO"&&U("Cur","")},hasSave:Ie,saveAsync:He,triggerSave:K=>{Ke.trigger(),K&&He().then(K)},triggerFlushLocalPatch:Ke.trigger,theTree:function(K){return K===void 0&&(K=te.$3),console.log((0,te.im)(we.getFlatTree(),K))},hotTree:function(K){return K===void 0&&(K=te.$3),console.log(Se.__devHotTree(K))},slctTree:function(K){return K===void 0&&(K=Ge()),console.log(Se.__devHotTree(K))},upTree:function(K,xe){return K===void 0&&(K=Ge()),xe===void 0&&(xe=te.$3),console.log(Se.findUpHotItemList(K,xe))},cmtTree:function(K){return K===void 0&&(K=te.$3),console.log(Re.__devHotTree(K))}}},Ln=d=>{const S=d&&d.status;return S>=400&&S<500?"4XX":String(d).toLowerCase().includes("timeout")?"Tot":"5XX"},Fn=async d=>{let{flpakKey:S,token:D,passwd:ee}=d;const Q=wn(S,Rn),fe=async(ue,be,q)=>Bn(ue,{token:D,passwd:ee,skipTTre:String(be||""),skipTPbxList:(q||[]).join("")});await Q.bind((0,Z.LQ)({}),fe);const ve=Q.getFlatStore(),_e=(0,G.p)(Q.getFlatStore());return{fssDat:Q,flatStore:ve,sdkStore:_e}}},91458:(x,B,n)=>{"use strict";n.d(B,{a6:()=>E});const g="_cmt",f=y=>y.endsWith(g),E=y=>{if(f(y))throw new Error("bad datKey: "+y);return""+y+g},_=y=>{if(!f(y))throw new Error("bad cmtKey: "+y);return y.slice(0,-g.length)},i="_cur",k=y=>y.endsWith(i),M=y=>{if(k(y))throw new Error("bad datKey: "+y);return""+y+i},l=y=>{if(!k(y))throw new Error("bad curKey: "+y);return y.slice(0,-i.length)}},79975:(x,B,n)=>{"use strict";n.d(B,{P:()=>i,YR:()=>y,_1:()=>k,a0:()=>f,ij:()=>E,p1:()=>m,q2:()=>l});var g=n(52297);const f=[1/0,1/0,-1/0,-1/0],E=()=>[1/0,1/0,-1/0,-1/0],_={x:0,y:0},i=(c,u,h)=>{let w=1/0,W=1/0,R=-1/0,Y=-1/0;const J=(N,Z)=>{(0,g.gH)(_,c,N,Z),w=Math.min(w,_.x),W=Math.min(W,_.y),R=Math.max(R,_.x),Y=Math.max(Y,_.y)},P=u*.5,z=h*.5;return J(-P,-z),J(-P,z),J(P,-z),J(P,z),[w,W,R,Y]},k=(c,u)=>{let[h,w,W,R]=u;return c[0]=Math.min(c[0],h),c[1]=Math.min(c[1],w),c[2]=Math.max(c[2],W),c[3]=Math.max(c[3],R),c},M=c=>{let[u,h,w,W]=c;return w<=u||W<=h},l=(c,u)=>{let[h,w,W,R]=u;return!(c[2]<h||c[0]>W||c[3]<w||c[1]>R)},y=(c,u)=>{let[h,w,W,R]=u;return c[0]<=h&&c[2]>=W&&c[1]<=w&&c[3]>=R},m=(c,u)=>{let[h,w,W,R]=c,{x:Y,y:J}=u;return Y>=h&&Y<=W&&J>=w&&J<=R}},97997:(x,B,n)=>{"use strict";n.d(B,{A6:()=>Y,Cm:()=>J,L:()=>y,X$:()=>R,bm:()=>te,k2:()=>M,nt:()=>l,tO:()=>Z});var g=n(52297),f=n(91320),E=n(79975),_=n(39719),i=n(2222);const k=G=>{let{x:re,y:de,r:ne,w:oe,h:Oe}=G;return{x:re,y:de,r:ne,w:oe,h:Oe}},M=G=>{let{x:re,y:de,r:ne,w:oe,h:Oe}=G;return(0,E.P)((0,g.yO)(re,de,(0,f.U4)(ne)),oe,Oe)},l=G=>{let[re,de,ne,oe]=G;return{x:(re+ne)*.5,y:(de+oe)*.5,r:0,w:ne-re,h:oe-de}},y=(G,re)=>{const de=re.x-G.x,ne=re.y-G.y,oe=(0,f.U4)(-G.r),Oe=Math.sin(oe),De=Math.cos(oe);return Math.abs(de*De-ne*Oe)<=G.w*.5&&Math.abs(de*Oe+ne*De)<=G.h*.5},m=G=>(0,g.yO)(G.x,G.y,(0,f.U4)(G.r)),c=G=>(0,g._Q)(G.x,G.y,G.w*.5,G.h*.5,(0,f.U4)(G.r)),u=new WeakMap,h=G=>{let re=u.get(G);return re===void 0&&u.set(G,re=m(G)),re},w=new WeakMap,W=G=>{let re=w.get(G);return re===void 0&&w.set(G,re=c(G)),re},R=(G,re,de,ne)=>{const oe=de(ne,G);if(oe.hotRndSupMatrix===void 0){const Oe=(0,g.b)();let De=G;for(;De!==void 0&&_.c3.has(De.hotAttr.type);){const ot=(0,i.j1)(De.hotAttr)?h:W;(0,g.h4)(Oe,ot(De.hotAttr)),De=re(De.sup)}oe.hotRndSupMatrix=Oe}return oe.hotRndSupMatrix},Y=(G,re,de,ne)=>{const oe=de(ne,G);return oe.hotMatrix===void 0&&(oe.hotMatrix=(0,g.Xs)((0,g.b)(),R(re(G.sup),re,de,ne),h(P(G,re,de,ne).lBound))),oe.hotMatrix},J=(G,re,de,ne)=>{const oe=de(ne,G);if(oe.hotAABB===void 0){const{w:Oe,h:De}=P(G,re,de,ne).lBound;oe.hotAABB=(0,E.P)(Y(G,re,de,ne),Oe,De)}return oe.hotAABB},P=(G,re,de,ne)=>{const oe=de(ne,G);if(oe.lBound===void 0)if(!(0,i.j1)(G.hotAttr))oe.lBound=G.hotAttr;else if(G.sub.length===0)oe.lBound={...k(G.hotAttr),w:0,h:0};else{const Oe=(0,E.ij)();for(const At of G.sub){const kt=P(re(At),re,de,ne).lBound;(0,E._1)(Oe,(0,E.P)(h(kt),kt.w,kt.h))}const[De,ot,se,me]=Oe;oe.lBCOff={x:(se+De)*.5,y:(me+ot)*.5};const{x:Te,y:mt,r:Et}=G.hotAttr;(0,g.ZY)(N,(0,f.U4)(Et)),(0,g.gH)(z,N,oe.lBCOff.x,oe.lBCOff.y),oe.lBound={x:Te+z.x,y:mt+z.y,r:Et,w:se-De,h:me-ot}}return oe},z={x:0,y:0},N=(0,g.b)(),Z=(G,re,de,ne)=>{const oe=P(G,re,de,ne);if(oe.cssB2308===void 0){const Oe=re(G.sup);if(Oe!==void 0&&(0,i.j1)(Oe.hotAttr)){const De=P(Oe,re,de,ne),{x:ot,y:se,r:me,w:Te,h:mt}=oe.lBound,Et=ot+De.lBound.w*.5-De.lBCOff.x,At=se+De.lBound.h*.5-De.lBCOff.y;oe.cssB2308={x:Et,y:At,r:me,w:Te,h:mt}}else oe.cssB2308=oe.lBound}return oe.cssB2308},te=(G,re,de,ne)=>P(G,re,de,ne).lBound},80263:(x,B,n)=>{"use strict";n.d(B,{G1:()=>_,L6:()=>E,Sr:()=>f});var g=n(73752);const f=i=>(0,g.Gf)("/api/payment/v4/coupon/workspace_guide_2203_coupon",{space_type:i}),E=()=>(0,g.EE)("/api/web/v3/initial"),_=i=>(0,g.Gf)("/api/web/v3/account/workspace_guide_days",{org_cid:i})},50397:(x,B,n)=>{"use strict";n.d(B,{E:()=>E,p:()=>f});var g=n(73752);const f=()=>(0,g.EE)("/api/web/v3/guide/guide_data"),E=_=>(0,g._Z)("/api/web/v3/guide/workspace_guides",{guide:{workspace_guides:_}})},44964:(x,B,n)=>{"use strict";n.d(B,{By:()=>Vt,Yo:()=>mt,$p:()=>Te,V5:()=>Wt});var g=n(3954),f=n(87587),E=n(35517),_=n(10404),i=n(38133),k=n(26886),M=n(74982),l=n(60074),y=n(49777),m=n(2150),c=n(30906),u=n(11685),h=n(2022),w=n(95060),W=n(6515),R=n(44387);const Y=(F,pe)=>{let{key:Me,sup:he,attr:je}=pe;return F.push({type:m.P6,key:Me,keySup:he}),F.push({type:m.q$,key:Me,attrDiff:je}),F},J=F=>(0,y.dA)({type:"rResBunch",bunch:F}),P=function(F,pe,Me,he,je,ye,A){return pe===void 0&&(pe=0),Me===void 0&&(Me="customize"),he===void 0&&(he=375),je===void 0&&(je=812),ye===void 0&&(ye="portrait"),A===void 0&&(A="vertical"),(0,y.pW)({type:"rResBunch",bunch:"rbPage",name:F,zIndex:pe,icon:""+R.qX+R.UD+"0",asFolder:!1,device:Me,deviceW:he,deviceH:je,deviceOrientation:ye,deviceScroll:A,alignH:[],alignV:[],scroll:1,scrollWay:"none",layout:"row",w:he,h:je,defaultCanvasKey:"",deleteInfo:{deleteTime:0,deleteUserName:""},fill:{fillIsVisible:!1,fill:"solid",solidColor:4126537215},"!version":1})},z=function(F,pe,Me,he){pe===void 0&&(pe=0);let{x:je,y:ye,w:A,h:O}=Me;return he===void 0&&(he=1),packResCanvasAttr({type:"rResCanvas",name:F,zIndex:pe,x:je,y:ye,r:0,w:A,h:O,isLock:!1,isVisible:!0,isLockAspect:!0,isClipContent:!0,device:"customize",orientation:"portrait",stickyHeaderHeight:10,stickyFooterHeight:10,interactions:[],fill:{fillIsVisible:!0,fill:"solid",solidColor:4294967295},layoutGrid:{isGridLayout:!1,gridSize:10,isRowLayout:!1,rowHeight:10,rowGutter:10,isColLayout:!1,colCount:10,colGutter:10},alignH:[],alignV:[],order:he})},N={type:"extImage",key:"mockImageNode",hotAttr:{type:"rResExt",name:"\u793A\u4F8B\u56FE\u7247",zIndex:0,extData:"/res-img/org/hot/12.jpg",extType:"extImage"},sup:y.Q,sub:[]},Z=F=>{const pe=[];return Y(pe,{key:KEY_RB_MAIN,sup:KEY_MAIN,attr:J("rbMain")}),Y(pe,{key:KEY_RB_TRASH,sup:KEY_MAIN,attr:J("rbTrash")}),Y(pe,{key:KEY_RB_EXT,sup:KEY_MAIN,attr:J("rbExt")}),Y(pe,{key:KEY_RB_REF_MUBAN,sup:KEY_MAIN,attr:J("rbRefMuban")}),Y(pe,{key:KEY_RB_REF_DANLI,sup:KEY_MAIN,attr:J("rbRefDanli")}),Y(pe,{key:KEY_RB_REF_MIND,sup:KEY_MAIN,attr:J("rbRefMind")}),F.updateHotItem(N),pe},te=F=>function(pe){return pe===void 0&&(pe=KEY_MAIN),console.log(__devAttrFlatTree(F.getFlatTree(),pe))},G=F=>function(pe){return pe===void 0&&(pe=KEY_MAIN),console.log(F.__devHotTree(pe))};var re=n(53092),de=n(67817),ne=n(59729),oe=n(43980),Oe=n(66234),De=n(18890),ot=n.n(De),se=n(60264),me=n(28016);ENV.IS_SKT_HTTP&&(0,_.lQ)(!0),(0,l.d)(oe.uT,oe.n_);const Te=async(F,pe)=>{console.warn("[onTransferError]",F,pe),F==="Tot"||F==="5XX"?MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1,type:"error",svgName:"design/toast/offline"}):F==="4XX"&&pe&&/403/.test(pe.message)?MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.cant_edit,confirmText:I18N.dModule.exit_editing,desc:I18N.dModule.cant_edit_desc}).then(()=>MB.global.onBackButtonClick()):F==="4XX"&&pe&&/401/.test(pe.message)?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,E.av)())):F==="4XX"?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,E.av)())):await MB.global.popupHelper.alertAsyncBlocked({desc:window.I18N.dModule.unknown_error.replace(/%s/i,status),isHTML:!0})},mt=async(F,pe)=>{console.warn("[onReadOnlyError]",F,pe),F!=="Cur"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},Et=F=>{let{sendCur:pe}=F;const Me=(0,f.P2)(()=>{try{const he=(0,k.UF)();if(!he)return;const{current:{currentScreen:je},screencontainer:{cursorPos:ye}}=he,A=je&&(je.cid||je.key);if(!A)return;const{x:O,y:X}=ye||{};pe(A,O,X)}catch(he){console.error("cssCur push error",he)}},.05*1e3,!0);setInterval(Me,5*1e3),document.addEventListener("pointermove",Me,{passive:!0})},At=(0,f.P2)(F=>{var pe,Me,he,je,ye,A,O,X;const ie=(0,k.UF)();if(!(!ie||!MB.action)){if(ie.rightnav.screenSelection[0]&&F.includes(ie.rightnav.screenSelection[0])&&((pe=rootSdk.sdkStore.getHotItem(ie.rightnav.screenSelection[0]))==null?void 0:pe.sup)==="B@trash"&&(MB.action("entry:activate:root-project:home-screen"),MB.notice({text:"\u5F53\u524D\u9009\u4E2D\u753B\u5E03\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"})),ie.mode.basketEditor.item&&F.includes(ie.mode.basketEditor.item)&&((Me=rootSdk.sdkStore.getHotItem(ie.mode.basketEditor.item))==null?void 0:Me.sup)==="@@T"){var Be;MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u52A8\u6001\u7EC4\u4EF6\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}),F[1]&&((Be=rootSdk.sdkStore.getSubHotItemList(F[1]))==null?void 0:Be.length)===0&&(MB.action("entry:exit:edit:basket"),F[0]&&rootSdk.sdkStore.deleteHotItem(F[0]))}if(ie.mode.basketEditor.refPage&&F.includes(ie.mode.basketEditor.refPage)&&((he=rootSdk.sdkStore.getHotItem(ie.mode.basketEditor.refPage))==null?void 0:he.sup)==="@@T"){var We;if(MB.action("entry:exit:edit:basket"),MB.notice({text:"\u5F53\u524D\u7F16\u8F91\u6BCD\u7248\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}),((We=rootSdk.sdkStore.getSubHotItemList(ie.mode.basketEditor.refPage))==null?void 0:We.length)===0){const $e=rootSdk.sdkStore.findAllBasketFRBPage(ie.mode.basketEditor.refPage);rootSdk.sdkStore.deleteHotItemBatch([...$e.map(Le=>Le.key),ie.mode.basketEditor.refPage])}}if(((je=rootSdk.sdkStore.getHotItem(F[0]))==null?void 0:je.hotAttr.type)==="rResBunch"&&((ye=rootSdk.sdkStore.getHotItem(F[0]))==null?void 0:ye.hotAttr.bunch)==="rbPage")if(!ie.rightnav.screenDataMap[F])MB.action("entry:update:screen:list");else{const $e=ie.rightnav.screenDataMap[F],Le=rootSdk.sdkStore.getHotItem(F[0]);if(Le&&!ot()(Le,$e)){var et,ht;($e==null||(et=$e.hotAttr)==null?void 0:et.name)!==(Le==null||(ht=Le.hotAttr)==null?void 0:ht.name)?MB.action("entry:update:screen:list"):MB.action("entry:update:current:screen-mata",{screenMeta:{cid:Le==null?void 0:Le.key,sup:Le==null?void 0:Le.sup,sub:Le==null?void 0:Le.sub,...Le==null?void 0:Le.hotAttr}})}}if((A=ie.table)!=null&&A.selectTableCellInfo&&F[0]===((O=ie.table)==null||(O=O.widget)==null?void 0:O.key)&&((X=rootSdk.sdkStore.getHotItem(F[0]))==null?void 0:X.hotAttr.type)==="wTable")if(rootSdk.sdkStore.isTrashed(F[0]))MB.action("entry:clear:selection"),MB.action("table:update:info",{selectTableCellInfo:null,isShowTableMenu:!1,widget:null,isEditTable:!1}),MB.f.isEditTable=!1;else{var at,lt;const{selectionLeftTopInfo:{x:$e,y:Le},selectionRightBottomInfo:{x:ft,y:Ct}}=(at=ie.table)==null?void 0:at.selectTableCellInfo,_t=rootSdk.sdkStore.getHotItem(F[0]);if(_t!=null&&(lt=_t.hotAttr)!=null&&lt.tableData){const{hotAttr:{tableData:{columns:Bt,rows:Ft}}}=_t;let nn=$e,Nt=Le,mn=ft,tt=Ct;$e>Bt.length-1&&(nn=Bt.length-1),ft>Bt.length-1&&(mn=Bt.length-1),Le>Ft.length-1&&(Nt=Ft.length-1),Ct>Ft.length-1&&(tt=Ft.length-1);const fn={...ie.table.widget,..._t.hotAttr};(0,me.G)({widget:fn,x1:nn,y1:Nt,x2:mn,y2:tt})}}MB.action("entry:rebuild:screen-widget-tree")}},.5*1e3),kt={repaint:F=>{let{type:pe,payload:Me}=F;pe===M.K&&At(Me)}},en=(0,f.P2)(()=>{!(0,k.UF)()||!MB.action||MB.action("entry:comment:rebuild:commentList")},.5*1e3),Kt={repaint:F=>{let{type:pe,payload:Me}=F;pe===se.K&&en()}},an=async F=>{let{projectBasicCid:pe}=F;try{const{userId:Me,flatKey:he}=await fetchGetJSON("/api/flat/web_v1/proj2-edit-info?prj2Cid="+pe);return{userId:Me,flatKey:he}}catch(Me){await apiErrorModals(Me)}},Dt={iphone_14_pro_max:54,iphone_14_pro:54,iphone_13_pro_max:44,iphone_13_pro:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone_8_plus:20,iphone_8:20,Huawei_p8:24,Huawei_p40:24,google_pixel_2:24,google_pixel_2_xl:24,ipad_mini:24,ipad_pro_11:24,ipad_pro_12:24},Wt=F=>{let pe=!1,Me=!1,he="";if(F.hotAttr.device==="customize"){for(const ye of["android","iphone","ipad"])for(const[A,O]of Object.entries(g[ye]))if(O.height===F.hotAttr.h&&O.width===F.hotAttr.w){if(pe=!0,he=ye,ye==="iphone"||ye==="ipad"){const X=g.iphone.iphone_8,ie=g.iphone.iphone_8_plus;X.width===F.hotAttr.w&&X.height===F.hotAttr.h||ie.width===F.hotAttr.w&&ie.height===F.hotAttr.h?Me=!1:Me=!0}break}}else for(const ye of["android","iphone","ipad"])if(g[ye][F.hotAttr.device]){pe=!0,he=ye,(ye==="iphone"||ye==="ipad")&&(["iphone_8","iphone_8_plus"].includes(F.hotAttr.device)||(Me=!0));break}let je;if(pe){je=[];let ye;he==="ipad"||he==="iphone"?ye=c._.wIphoneXSB(I18N.w.wIphoneXSB):ye=c._.wAndroidSB(I18N.w.android_status_bar),ye.h=Dt[F.hotAttr.device]||44,ye.w=F.hotAttr.w,ye.x=F.hotAttr.w/2,ye.y=ye.h/2,ye.zIndex=6,ye.fixPosTo="top";const A={key:(0,h.Tl)(),hotAttr:ye,sup:F.key,sub:[]};je.push(A)}if(Me){let ye=c._.wRect(I18N.w.tab_bar);ye={...ye,zIndex:7,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:4177066239},border:{bdrIsVisible:!1,bdrColor:4278190080,bdrWidth:1,bdrStyle:"solid"},borderRadius:4,borderVisibility:{bdrIsVisibleT:!0,bdrIsVisibleL:!0,bdrIsVisibleB:!0,bdrIsVisibleR:!0}},ye.h=21,ye.w=F.hotAttr.w,ye.x=F.hotAttr.w/2,ye.y=F.hotAttr.h-ye.h/2;const A={key:(0,h.Tl)(),hotAttr:ye,sup:F.key,sub:[]};je.push(A);let O=c._.wRect(I18N.w.wRect);O={...O,zIndex:8,fixPosTo:"bottom",fill:{fillIsVisible:!0,fill:"solid",solidColor:255},borderRadius:3,border:{bdrIsVisible:!1,bdrColor:3149642751,bdrWidth:1,bdrStyle:"solid"}},O.h=5,O.w=134,O.x=F.hotAttr.w/2,O.y=ye.y;const X={key:(0,h.Tl)(),hotAttr:O,sup:F.key,sub:[]};je.push(X)}return je},Ht=(F,pe)=>{var Me;const{model:he,height:je,width:ye,attr:A}=pe,O=(0,h.Tl)("rbp");Y(F,{key:O,sup:y.X3,attr:P(I18N.LeftSidePanel.page,1,he,ye,je,(Me=A==null?void 0:A.orientation)!=null?Me:"portrait")});const X=c._[u.l.Canvas](I18N.LeftSidePanel.artboard+" 1",5,ye/2,je/2,ye,je,he),ie=(0,w.f4)(X),Be=(0,h.Tl)("rc");F.push({type:m.P6,key:Be,keySup:O}),F.push({type:m.q$,key:Be,attrDiff:ie});const We=Wt({hotAttr:X,key:Be});if(We!==void 0){for(const et of We)F.push({type:m.P6,key:et.key,keySup:et.sup}),F.push({type:m.q$,key:et.key,attrDiff:et.hotAttr});We.length===1?F.push({type:m.q$,key:Be,attrDiff:{shh:(0,Oe.xd)(We[0].hotAttr.h)}}):F.push({type:m.q$,key:Be,attrDiff:{shh:(0,Oe.xd)(We[0].hotAttr.h),sfh:(0,Oe.xd)(We[1].hotAttr.h)}})}return F},tn=(F,pe)=>{if(F.getFlatTree().get("B@main").sub.length===0){const Me=Ht([],pe);F.applyDiff(Me),F.resetUndo()}else if(!F.getFlatTree().get("B@ref-mind")){const Me=[];Me.push({type:m.P6,key:y.T3,keySup:W.$3}),Me.push({type:m.q$,key:y.T3,attrDiff:J("rbRefMind")}),F.applyDiff(Me),F.resetUndo()}},Vt=async(F,pe)=>{try{const he=await(0,_.od)(F),je=he.sdkStore.createRoSdkStore();Object.assign(globalThis,{...he,rootSdk:he,roSdkStore:je}),(0,i.s_)()||Et(he),he.sdkStore.subscribe(kt.repaint),he.cmtStore.subscribe(Kt.repaint),pe&&(0,i.mK)()&&tn(he.flatStore,pe)}catch(he){var Me;const je=he?Number(he.status)||Number((Me=he.toString().split("status")[1])==null||(Me=Me.split(":")[1])==null?void 0:Me.split(",")[0])||401:void 0;console.warn("[initRootSdk]",he,je),(0,l.Q)("initRootSdk",he,{status:je,sdkOption:F,projectBasic:pe}),await(0,E.Vz)({status:je}),await new Promise(()=>{})}},pn=F=>async pe=>{let{fssDat:Me}=pe;try{const he=await Me.loadSOS();if(!he)return;console.warn("[afterStoreCreate] found unsaved proj tree",he);const je=await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+getFormatDateString(new Date(he.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D",cancelText:"\u53D6\u6D88"});if(toSentry("loadSOS",void 0,{isKeep:!!je,time:he.time}),je){const{clientData:{upperCid:ye}}=await newFlpakFromTree(he.tree,F.team_cid,{...F,name:F.name+"-\u6062\u590D\u6570\u636E"});await Me.freeSOS(),refreshLocationHref("/proto/design/"+ye)}else await Me.freeSOS()}catch(he){console.warn("[afterStoreCreate]",he)}}},16426:(x,B,n)=>{"use strict";n.d(B,{YN:()=>l,om:()=>M});var g=n(44964),f=n(10404),E=n(73752),_=n(7776);const i=async y=>{const[[m,c],[u,h]]=await Promise.all([(async()=>{const{project_basic:w,project_metas:[W]}=await fetchGetJSON("/api/upper/web_v1/basics/"+y);return[w,W]})(),(async()=>{const{userId:w,flatKey:W}=await getFlatEditData({projectBasicCid:y});return console.log("[p2edit] uId="+w+" key="+W+" pbCid="+y),[w,W]})()]);return await initRootSdk({userId:u,flpakKey:h,afterStoreCreate:getAfterStoreCreate(m),onTransferError,onReadOnlyError,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0},m),{projectBasic:m,projectMeta:c}},k=async y=>{const{market_template:m,project_metas:[c]}=await requestResourcesDetailData(y);return await initRootSdk({userId:void 0,flpakKey:c.cid,isAllowDat:!0,isAllowCmt:!0,isAllowCur:!0,onTransferError,onReadOnlyError},m),{projectBasic:m,projectMeta:c}},M=async y=>{let{project_meta_cid:m,userId:c}=y;try{return await(0,f.od)({userId:c,flpakKey:m,isDummyCmt:!0,isAllowDat:!0,onTransferError:g.$p,onReadOnlyError:g.Yo})}catch(u){console.warn("[initComboStore]",u)}},l=y=>(0,E.EE)("/api/upper/web_v1/design/initial?project_cid="+y)},99990:(x,B,n)=>{"use strict";n.d(B,{$B:()=>At,BG:()=>l,F7:()=>ot,H3:()=>tn,HP:()=>Et,IS:()=>he,Im:()=>g.Im,J5:()=>ne,KI:()=>mt,KQ:()=>W,My:()=>Vt,NK:()=>pn,Ok:()=>k,P3:()=>Oe,Qs:()=>me,RI:()=>w,RO:()=>Ht,Tz:()=>Wt,Vp:()=>an,W:()=>z,X6:()=>se,Xr:()=>h,_5:()=>ye,a$:()=>u,be:()=>de,bt:()=>re,cD:()=>Kt,iq:()=>Dt,kk:()=>je,qr:()=>kt,rM:()=>De,rw:()=>Te,sE:()=>F,tr:()=>pe,uB:()=>en,uo:()=>G,ur:()=>oe,vL:()=>M});var g=n(7776),f=n(73752),E=n(76985),_=n(35517);const i=(A,O)=>{const X=new Error("[NO SENTRY] "+A);return Object.assign(X,O),X},k=(A,O)=>(0,f.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+A+"&password="+O),M=async(A,O)=>{const X="/api/flat/web_v1/preview/initial?access_token="+A+"&view_mode="+O,ie=await fetch(X,{credentials:"same-origin"}),Be=await ie.json();if(ie.status!==200)throw i("[fetchGetHead] failed with "+ie.status+": "+X,{status:ie.status,error_type:Be==null?void 0:Be.error_type});return Be},l=(A,O)=>(0,f.IP)("/api/upper/web_v1/basics/"+A,{...O}),y=()=>fetchGetJSON("/api/web/v3/configuration/design_activity"),m=()=>fetchGetJSON("/api/web/v3/configuration/square_topic"),c=()=>fetchGetJSON("/api/web/v3/configuration/workspace"),u=async()=>{let A=[];try{const O=await(0,f.EE)("/api/library/v4/recent_keywords");O!=null&&O.keywords&&(A=O==null?void 0:O.keywords)}catch(O){await(0,_.Vz)(O)}return A},h=()=>(0,f._E)("/api/library/v4/recent_keywords"),w=A=>(0,f.Mn)("/api/library/v4/recent_keywords",{keyword:A}),W=async()=>{var A;let O;try{O=await(0,f.EE)("/api/library/v3/project_upper/user_combo_groups")}catch(X){return await(0,_.Vz)(X),{}}return{userComboGroupList:(A=O)==null?void 0:A.user_combo_groups}},R=async A=>{let O;try{O=await fetchPutJSONWithAccept("/api/library/v4/users/combo_groups/"+A.cid,{...A})}catch(X){return await apiErrorModals(X),{}}return O},Y=A=>fetchPutJSON("/api/proto7/web_v1/screen_aligns/"+A.cid,{...A}),J=A=>fetchDeleteHead("/api/library/v3/project_upper/user_combo_groups/"+A),P=A=>R(A),z=async A=>{var O;let{orgCid:X}=A,ie;try{ie=await(0,f.EE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+X)}catch(Be){return await(0,_.Vz)(Be),{}}return{orgComboGroupList:(O=ie)==null?void 0:O.org_combo_groups}},N=async A=>{const{project_metas:O,screen_metas:X,screen_glues:ie,market_template:Be,icon_group:We}=await requestResourcesDetailData(A),{category:et}=Be,ht=et===COMBO_GROUP;if(et===ICON_GROUP){const{title:lt,source:$e}=We,Le=await fetchGetJSON($e),ft=ICON_LIBRARY_TYPE_MAP[lt]||"svg",{iconGroupData:Ct,iconData:_t}=getLibraryIconInfoFromRequestData(Le,ft);return{marketTemplate:Be,iconGroupData:Ct,iconData:_t}}else{const lt=[];if(ht){const $e={};X.forEach(Le=>{$e[Le.screen_glue_cid]=Le.cid});for(const Le of ie){const{cid:ft,name:Ct,project_meta_cid:_t}=Le;lt.push({cid:ft,name:Ct,type:Be.category,projectBasicCid:Be.cid,projectMetaCid:_t,screenGlue:Le,screenMetaCid:$e[Le.cid]||""})}}else{const $e=ie.find(Le=>Le.type==="project-main");for(const Le of X){const{cid:ft,name:Ct,project_meta_cid:_t,screen_glue_cid:Bt}=Le;$e.cid===Bt&&lt.push({cid:ft,name:Ct,type:Be.category,projectBasicCid:Be.cid,projectMetaCid:_t,screenGlue:$e,screenMetaCid:ft})}}return{marketTemplate:Be,marketTemplateItemList:lt,projectMetaList:O,screenGlueList:ie,screenMetaList:X}}},Z=async()=>{const A=await requestUserStarredList(COMBO_GROUP),O=await requestUserStarredList(ICON_GROUP),X=await requestUserStarredList(SCREEN_LIST),ie=A.concat(O).concat(X),Be=ie.filter(at=>{let{category:lt}=at;return[COMBO_GROUP,SCREEN_LIST].includes(lt)}),We=ie.filter(at=>{let{category:lt}=at;return lt===ICON_GROUP}),et=new Map,ht=new Map;for(const at of ie){const{category:lt,cid:$e}=at;lt===ICON_GROUP?ht.set($e,at):et.set($e,at)}return{marketTemplateList:Be,iconLibraryList:We,marketTemplateListMap:et,iconLibraryListMap:ht}},te=A=>{let{marketTemplateCid:O}=A;return fetchDeleteHead("/api/community/v1/market_template/use/"+O)},G=async A=>{const{icon_group:O,market_template:X}=await(0,g.Mv)(A.cid),{source:ie,title:Be}=O||{},We=await(0,f.EE)(ie),et=E.em[Be]||"svg",{iconGroupData:ht,iconData:at}=(0,E._7)(We,et);return{iconGroupData:ht,iconData:at,marketTemplate:X}},re=async()=>{try{const{asset_groups:A}=await(0,f.sE)("/api/library/v3/asset_data/me/asset_groups");return{userAssetGroupList:A}}catch(A){await(0,_.Vz)(A)}},de=async A=>{let{orgCid:O}=A;try{const{asset_groups:X}=await(0,f.sE)("/api/library/v3/asset_data/org/asset_groups?org_cid="+O);return{orgAssetGroupList:X}}catch(X){await(0,_.Vz)(X)}},ne=async A=>{try{const{asset:O,user_asset:X}=await(0,f.NS)("/api/library/v3/asset_data/me/search_by_url",{image_url:A});return{asset:O,user_asset:X}}catch(O){await(0,_.Vz)(O)}},oe=async(A,O)=>{try{const{asset:X,org_asset:ie}=await(0,f.NS)("/api/library/v3/asset_data/org/search_by_url",{image_url:A,org_cid:O});return{asset:X,org_asset:ie}}catch(X){await(0,_.Vz)(X)}},Oe=async A=>{try{const{user_asset_group:O}=await(0,f.bX)("/api/library/v4/users/asset_groups/"+A.cid,{...A});return{user_asset_group:O}}catch(O){await(0,_.Vz)(O)}},De=async A=>{try{const{org_asset_group:O}=await(0,f.bX)("/api/library/v4/orgs/asset_groups/"+A.cid,{...A});return{org_asset_group:O}}catch(O){await(0,_.Vz)(O)}},ot=async A=>{try{return await(0,f.bX)("/api/library/v3/asset_data/me/assets/"+A.asset_cid,{...A})}catch(O){await(0,_.Vz)(O)}},se=async A=>{try{return await(0,f.bX)("/api/library/v3/orgs/assets/"+A.cid+"?org_cid="+A.org_cid,{...A})}catch(O){await(0,_.Vz)(O)}},me=async A=>{let{cid:O,name:X,groupCid:ie}=A;try{await(0,f.NS)("/api/library/v3/asset_data/me/assets",{cid:O,name:X,group_cid:ie})}catch(Be){await(0,_.Vz)(Be)}},Te=async A=>{let{orgCid:O,cid:X,name:ie,groupCid:Be}=A;try{const We=await(0,f.NS)("/api/library/v3/orgs/assets",{cid:X,org_cid:O,name:ie,group_cid:Be});return We==null?void 0:We.cid}catch(We){await(0,_.Vz)(We)}},mt=async A=>{let{user_asset_group_cid:O,org_cid:X,org_asset_group_cid:ie}=A;try{return(0,f.NS)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid:O,org_cid:X,org_asset_group_cid:ie})}catch(Be){await(0,_.Vz)(Be)}},Et=async A=>{try{const{user_asset_group:O,user_assets:X}=await(0,f.sE)("/api/library/v3/asset_data/me/asset_groups/"+A);return{user_asset_group:O,userAssets:X}}catch(O){await(0,_.Vz)(O)}},At=async A=>{try{const{org_asset_group:O,org_assets:X}=await(0,f.sE)("/api/library/v3/orgs/asset_groups/"+A);return{org_asset_group:O,orgAssets:X}}catch(O){await(0,_.Vz)(O)}},kt=async A=>{await(0,f._E)("/api/library/v3/asset_data/me/assets/"+A)},en=async A=>{await(0,f._E)("/api/library/v3/orgs/assets/"+A.cid+"?org_cid="+A.org_cid)},Kt=async A=>{await(0,f._E)("/api/library/v3/asset_data/me/asset_groups/"+A)},an=async A=>{await(0,f._E)("/api/library/v3/orgs/asset_groups/"+A)},Dt=A=>(0,f._Z)("/preferences/update",{...A}),Wt=async(A,O)=>{try{return await(0,f.bX)("/api/library/v4/users/asset_groups/"+A,{...O})}catch(X){await(0,_.Vz)(X)}},Ht=A=>async(O,X)=>{try{const ie={...X,org_cid:A};return await(0,f.bX)("/api/library/v4/orgs/asset_groups/"+O,{...ie})}catch(ie){await(0,_.Vz)(ie)}},tn=async(A,O)=>{let X=null;try{const ie=await(0,f.sE)("/api/community/v1/workspace?category="+A+"&plabel="+O);ie!=null&&ie.market_templates&&(X=ie==null?void 0:ie.market_templates)}catch(ie){await(0,_.Vz)(ie)}return X},Vt=async A=>{let O=null;try{const X=await(0,f.EE)("/flpak/w-p2wsearch?"+A);X!=null&&X.data&&(O=X)}catch(X){await(0,_.Vz)(X)}return O},pn=async A=>{let O=null;try{const X=await(0,f.EE)("/flpak/w-p2meta/"+A);X!=null&&X.length&&(O=X)}catch(X){await(0,_.Vz)(X)}return O},F=async A=>{let{currentComboPanel:O,projectMetaCid:X}=A;try{await(0,f.Gf)("/flpak/w-migrate-"+O+"-combo-group/"+X+"?mode=normal")}catch(ie){await(0,_.Vz)(ie)}},pe=async A=>{let{projectBasicCid:O}=A;try{const{userId:X,flatKey:ie}=await(0,f.EE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+O);return{userId:X,flatKey:ie}}catch(X){await(0,_.Vz)(X)}},Me=async A=>{let{projectBasicCid:O,accessToken:X,password:ie}=A;try{const{userId:Be,flatKey:We}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+O+"&access_token="+X+"&password="+ie);return{userId:Be,flatKey:We}}catch(Be){await apiErrorModals(Be)}},he=A=>(0,f.EE)("/api/dashboard/v5/orgs/"+A),je=async A=>{const{project:O}=await(0,f.EE)("/api/dashboard/v5/projects/"+A);return O},ye=async A=>(0,f.EE)("/api/upper/web_v1/basics/statstics/"+A)},4091:(x,B,n)=>{"use strict";n.d(B,{$E:()=>M,S3:()=>f,kC:()=>i,ky:()=>_,mp:()=>k,pX:()=>g});const g="/proto",f=l=>g+"/"+l,E=l=>{const y=/^\/proto\/design\/(?:([^/]+?))$/i.exec(l);return y?y[1]:new Error("project cid error")},_=l=>{let{search:y,pathname:m}=l;return m.includes("/sharing")?m.includes("dashboard")||m.includes("htmlzip")?m.split("/").at(-3):m.includes("embed/v2")?location.pathname.split("/").at(-4):m.split("/").at(-2):new URLSearchParams(y).get("token")||/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(m)[1]},i="/p2mkt_view",k=l=>i+"/"+l,M=l=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(l)[1]},75507:(x,B,n)=>{"use strict";n.d(B,{FS:()=>u,NQ:()=>c,jq:()=>h,qK:()=>m});var g=n(53375),f=n.n(g),E=n(92728),_=n(85322),i=n(80461),k=n(10552);const M=()=>MB.getSelectionItems().length===0;let l=!1,y;const m={keys:{tab:()=>{if(document.activeElement===document.body)return!1},enter:()=>{MB.action("entry:enter:key"),(0,i.k)("enter")},f2:()=>{MB.action("entry:enter:key"),(0,i.k)("f2")},"command+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("command+shift+h")},"ctrl+shift+h":()=>{MB.action("entry:toggle:visible"),(0,i.k)("ctrl+shift+h")},left:()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("left")},"alt+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-1}),(0,i.k)("alt+left")},right:()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("right")},"alt+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:1}),(0,i.k)("alt+right")},up:()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("up")},"alt+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-1}),(0,i.k)("alt+up")},down:()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("down")},"alt+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:1}),(0,i.k)("alt+down")},"shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("shift+left")},"alt+shift+left":()=>{MB.action("entry:arrow:key",{direction:"x",rate:-10}),(0,i.k)("alt+shift+left")},"shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("shift+right")},"alt+shift+right":()=>{MB.action("entry:arrow:key",{direction:"x",rate:10}),(0,i.k)("alt+shift+right")},"shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("shift+up")},"alt+shift+up":()=>{MB.action("entry:arrow:key",{direction:"y",rate:-10}),(0,i.k)("alt+shift+up")},"shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("shift+down")},"alt+shift+down":()=>{MB.action("entry:arrow:key",{direction:"y",rate:10}),(0,i.k)("alt+shift+down")},"command+c":()=>{M()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,E.BK)(),(0,i.k)("command+c"))},"ctrl+c":()=>{M()||(MB.action("entry:copy:items"),MB.action("entry:copy:items:properties"),(0,E.BK)(),(0,i.k)("ctrl+c"))},"command+d":()=>{M()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("command+d"))},"ctrl+d":()=>{M()||(MB.action("entry:duplicate:items",{shift:!1}),(0,i.k)("ctrl+d"))},"command+shift+d":()=>{M()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("command+shift+d"))},"ctrl+shift+d":()=>{M()||(MB.action("entry:duplicate:items",{shift:!0}),(0,i.k)("ctrl+shift+d"))},"command+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("command+shift+v")},"ctrl+shift+v":()=>{MB.action("entry:paste:items:at",{clientPos:{clientX:MB.clientX,clientY:MB.clientY}}),(0,i.k)("ctrl+shift+v")},"command+x":()=>{M()||(MB.action("entry:cut:items"),(0,E.BK)(),(0,i.k)("command+x"))},"ctrl+x":()=>{M()||(MB.action("entry:cut:items"),(0,E.BK)(),(0,i.k)("ctrl+x"))},backspace:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("backspace")},del:()=>{MB.action("entry:delete:selected-items"),MB.action("enter:comment:shortcut:del"),(0,i.k)("delete")},"command+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("command+shift+l")},"ctrl+shift+l":()=>{MB.action("entry:toggle:lock"),(0,i.k)("ctrl+shift+l")},"command+g":()=>{MB.action("entry:group:items"),(0,i.k)("command+g")},"ctrl+g":()=>{MB.action("entry:group:items"),(0,i.k)("ctrl+g")},"command+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("command+shift+g")},"ctrl+shift+g":()=>{MB.action("entry:ungroup:items"),(0,i.k)("ctrl+shift+g")},"command+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("command+alt+l")},"ctrl+alt+l":()=>{MB.action("entry:align:items",{direction:"left"}),(0,i.k)("ctrl+alt+l")},"command+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("command+alt+c")},"ctrl+alt+c":()=>{MB.action("entry:align:items",{direction:"center"}),(0,i.k)("ctrl+alt+c")},"command+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("command+alt+r")},"ctrl+alt+r":()=>{MB.action("entry:align:items",{direction:"right"}),(0,i.k)("ctrl+alt+r")},"command+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("command+alt+t")},"ctrl+alt+t":()=>{MB.action("entry:align:items",{direction:"top"}),(0,i.k)("ctrl+alt+t")},"command+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("command+alt+m")},"ctrl+alt+m":()=>{MB.action("entry:align:items",{direction:"middle"}),(0,i.k)("ctrl+alt+m")},"command+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("command+alt+b")},"ctrl+alt+b":()=>{MB.action("entry:align:items",{direction:"bottom"}),(0,i.k)("ctrl+alt+b")},"command+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("command+alt+h")},"ctrl+alt+h":()=>{MB.action("entry:distribute:items",{direction:"horizontal"}),(0,i.k)("ctrl+alt+h")},"command+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("command+alt+u")},"ctrl+alt+u":()=>{MB.action("entry:distribute:items",{direction:"vertical"}),(0,i.k)("ctrl+alt+u")},"command+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("command+alt+up")},"ctrl+alt+up":()=>{MB.action("entry:items:forward"),(0,i.k)("ctrl+alt+up")},"command+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("command+alt+down")},"ctrl+alt+down":()=>{MB.action("entry:items:backward"),(0,i.k)("ctrl+alt+down")},"command+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("command+shift+up")},"ctrl+shift+up":()=>{MB.action("entry:items:send:front"),(0,i.k)("ctrl+shift+up")},"command+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("command+shift+down")},"ctrl+shift+down":()=>{MB.action("entry:items:send:back"),(0,i.k)("ctrl+shift+down")},"command+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("command+;")},"ctrl+;":()=>{MB.action("entry:expand:all:screen"),(0,i.k)("ctrl+;")},"command+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("command+''")},"ctrl+'":()=>{MB.action("entry:unexpand:all:screen"),(0,i.k)("ctrl+'")},"`":()=>{(0,i.k)("`")},"\xB7":()=>{(0,i.k)("`")},"[, ]":()=>{f()().isBefore("2021-11-12 23:59:59")&&MB.notice({text:I18N.Common.brackets_key_update_tips.replace("%key%",'<span class="key">'+((0,k.ED)()?"Ctrl":"\u2318")+"</span>")}),(0,i.k)("[, ]")},"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")},"command+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("command+s")},"ctrl+s":()=>{MB.global.experienceLoginModalHelper("isSave")||MB.action("entry:start:saving"),(0,i.k)("ctrl+s")},1:()=>{MB.action("entry:number:key",{key:1}),(0,i.k)("1")},2:()=>{MB.action("entry:number:key",{key:2}),(0,i.k)("2")},3:()=>{MB.action("entry:number:key",{key:3}),(0,i.k)("3")},4:()=>{MB.action("entry:number:key",{key:"4"}),(0,i.k)("4")},5:()=>{MB.action("entry:number:key",{key:5}),(0,i.k)("5")},6:()=>{MB.action("entry:number:key",{key:6}),(0,i.k)("6")},7:()=>{ENV.IS_FEAT_AI&&(MB.action("entry:number:key",{key:7}),(0,i.k)("7"))},"command+a":()=>{MB.action("entry:select:all"),(0,i.k)("command+a")},"ctrl+a":()=>{MB.action("entry:select:all"),(0,i.k)("ctrl+a")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("command+z")},"ctrl+z":()=>{MB.action("entry:undo-stack:undo"),(0,i.k)("ctrl+z")},"command+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("command+shift+z")},"ctrl+shift+z":()=>{MB.action("entry:undo-stack:redo"),(0,i.k)("ctrl+shift+z")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("command+alt+a")},"ctrl+alt+a":()=>{MB.action("entry:isShowSticky:toggle"),(0,i.k)("ctrl+alt+a")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"command+alt+v":()=>{M()||(MB.action("entry:paste:items:properties"),(0,i.k)("command+alt+v"))},"ctrl+alt+v":()=>{M()||(MB.action("entry:paste:items:properties"),(0,i.k)("ctrl+alt+v"))},"command+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"ctrl+b":()=>{MB.action("entry:set:text:attr:by:key",{attr:"boldType"}),(0,i.k)("command+b \u9009\u4E2D\u6574\u4F53")},"command+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"ctrl+i":()=>{MB.action("entry:set:text:attr:by:key",{attr:"italic"}),(0,i.k)("command+i \u9009\u4E2D\u6574\u4F53")},"command+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"ctrl+u":()=>{MB.action("entry:set:text:attr:by:key",{attr:"underline"}),(0,i.k)("command+u \u9009\u4E2D\u6574\u4F53")},"command+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+s":()=>{MB.action("entry:set:text:attr:by:key",{attr:"lineThrough"}),(0,i.k)("command+shift+s \u9009\u4E2D\u6574\u4F53")},"command+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+.":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"increase"}),(0,i.k)("command+shift+. \u9009\u4E2D\u6574\u4F53")},"command+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"ctrl+shift+,":()=>{MB.action("entry:set:text:attr:by:key",{attr:"fontSize",action:"decrease"}),(0,i.k)("command+shift+, \u9009\u4E2D\u6574\u4F53")},"shift+/":()=>{MB.action("entry:shortcut:undoable:items:set:attr:border")},i:()=>{if(window.EyeDropper){l?(l=!1,y.abort("double press i")):(l=!0,y=new AbortController,new window.EyeDropper().open({signal:y.signal}).then(R=>{let{sRGBHex:Y}=R;l=!1,MB.action("entry:i:key",{color:Y})}).catch(R=>{console.error(R),l=!1})),(0,i.k)("i");return}const{name:w,version:W}=MB.browserInfo;if(["Chrome","Edge"].includes(w)&&W<=95||w==="Opera"&&W<=81){MB.notice({text:"\u5F53\u524D\u6D4F\u89C8\u5668\u7248\u672C\u4E0D\u652F\u6301\u53D6\u8272\u5668\u5FEB\u6377\u952E"});return}MB.notice({text:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u53D6\u8272\u5668\u5FEB\u6377\u952E"})},"alt+1":()=>{MB.action("entry:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:nav:key",{key:2}),(0,i.k)("alt+2")},"alt+3":()=>{MB.action("entry:nav:key",{key:3}),(0,i.k)("alt+3")},c:()=>{MB.action("entry:comment:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("elbow:update",{isInElbowMode:!1}),(0,i.k)("c")},e:()=>{MB.action("entry:elbow:isInElbowMode:toggle"),MB.action("entry:ST:STMode:disable"),MB.action("set:quick-create-widget",{widget:null})}},priority:_.e7.Normal,isGlobal:!1},c={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},c:()=>{MB.action("entry:comment:toggle",{onlyView:!0}),(0,i.k)("c")},"alt+1":()=>{MB.action("entry:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:_.e7.Normal,isGlobal:!1},u={keys:{esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")}},priority:_.e7.Normal,isGlobal:!1},h={keys:{"command+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("command+[")},"ctrl+[":()=>{MB.action("entry:toggle:left-nav-panel"),(0,i.k)("ctrl+[")},"command+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("command+]")},"ctrl+]":()=>{MB.action("entry:toggle:right-panel"),(0,i.k)("ctrl+]")},esc:()=>{MB.action("entry:escape:key"),(0,i.k)("esc")},"command+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+=")},"ctrl+=":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+=")},"command+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("command+numpad_add")},"ctrl+numpad_add":()=>{MB.action("entry:design:zoom:in"),(0,i.k)("ctrl+numpad_add")},"command+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+-")},"ctrl+-":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+-")},"command+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("command+numpad_subtract")},"ctrl+numpad_subtract":()=>{MB.action("entry:design:zoom:out"),(0,i.k)("ctrl+numpad_subtract")},"command+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+0")},"ctrl+0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+0")},"command+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("command+numpad_0")},"ctrl+numpad_0":()=>{MB.action("entry:set:scale",{scale:100}),(0,i.k)("ctrl+numpad_0")},"command+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+1")},"ctrl+1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+1")},"command+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("command+numpad_1")},"ctrl+numpad_1":()=>{MB.action("entry:zoom:fit:scale:offset"),(0,i.k)("ctrl+numpad_1")},"command+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+2")},"ctrl+2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+2")},"command+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("command+numpad_2")},"ctrl+numpad_2":()=>{MB.action("entry:design:zoom:selection"),(0,i.k)("ctrl+numpad_2")},"command+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("command+f")},"ctrl+f":()=>{MB.action("entry:findReplacePanel:toggle:show"),(0,i.k)("ctrl+f")},"alt+1":()=>{MB.action("entry:nav:key",{key:1}),(0,i.k)("alt+1")},"alt+2":()=>{MB.action("entry:nav:key",{key:2}),(0,i.k)("alt+2")},"command+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("command+p")},"ctrl+p":()=>{MB.action("entry:preview:root-or-current:project"),(0,i.k)("ctrl+p")}},priority:_.e7.Normal,isGlobal:!1}},89719:(x,B,n)=>{"use strict";n.d(B,{$0:()=>J,Ei:()=>m,NZ:()=>w,X4:()=>l,ec:()=>u,ew:()=>P,hm:()=>y,j_:()=>h,o6:()=>z});var g=n(46198),f=n(63077),E=n(35517),_=n(73752),i=n(29184),k=n(35269);const M=async N=>{let{projectCid:Z}=N;return fetchGetJSON("/api/upper/web_v1/sharing/initial?cid="+Z)},l=async N=>{let{projectCid:Z,sharing:te}=N;return(await(0,_.Gf)("/api/flat/web_v1/project_share/"+Z,{...te})).project_share},y=async N=>{let{projectCid:Z,sharingCid:te}=N;try{return await(0,_.Bh)("/api/flat/web_v1/project_share/"+te+"?project_cid="+Z)}catch(G){await(0,E.Vz)(G)}},m=async N=>{let{sharing:Z}=N;try{return await(0,_.IP)("/api/flat/web_v1/project_share/"+Z.cid,{project_share:Z})}catch(te){await(0,E.Vz)(te)}},c=()=>{const N=document.getElementById("workspace");g.render((0,k.jsx)(f.Z,{locale:(0,i.F)(),errorType:404,customDes:I18N.ToolBar.ReEnter,isShowPrimaryBtn:!1}),N)},u=async N=>{try{if(!N.accessToken||N.project.access_token===N.accessToken)return h(N.project);{const{project:Z,accessToken:te}=N,{project_share:G}=await(0,_.EE)("/api/flat/web_v1/project_share/"+Z.cid+"?access_token="+te);return{sharing:{...G,type:"advanced",view_mode:G.device_model}}}}catch(Z){await c()}},h=N=>{const{cid:Z,access_token:te,access:G,building:re,comment_permission:de,password:ne,visibility:oe,wechat:Oe}=N,De=new URLSearchParams(location.search),ot=De.get("screen"),se=De.get("canvasId"),me=De.get("view_mode")||"read_only",Te=!!De.get("selection"),mt=Te?De.get("selection").split(","):[];return{sharing:{type:"default",project_cid:Z,access_token:te,view_access:G,view_sticky:re,comment_permission:de,password:ne,visibility:oe,wechat:Oe,view_mode:me,screen_visible_switch:Te,screen_visible_list:mt,page_begin:ot,canvas_begin:se}}},w=async N=>{let{projectCid:Z}=N;try{const{project_shares:te}=await(0,_.EE)("/api/flat/web_v1/project_share/"+Z+"/all");return te.sort((G,re)=>new Date(re.created_at).getTime()-new Date(G.created_at).getTime())}catch(te){await(0,E.Vz)(te)}},W=async N=>{try{const{result:Z}=await fetchGetJSON("/api/accesses/v4/project/"+N+"/permission_check?permission=P:update");return Z}catch(Z){await apiErrorModals(Z)}},R=async N=>{let Z=null;try{Z=await fetchGetJSON("/flpak/w-p2meta/"+N)}catch(te){await apiErrorModals(te)}return Z},Y={access_token:"",comment_permission:"",device_model:"",highlight:!0,password:"",project_cid:"",screen_visible_switch:!1,screen_visible_list:[],shell_type:"device",simulator_type:"device",sticky:!0,view_access:"private",view_count:0,view_prd:!1,wechat:!1},J=()=>({sharing:Y}),P=async N=>{let Z,te;try{Z=await(0,_.EE)("/api/upper/web_v1/basics/"+N+"/get_details"),Z&&JSON.stringify(Z)!=="{}"&&(te=!0)}catch(G){Z=G,te=!1}return{result:Z,statusOk:te}},z=async N=>{let Z,te;try{Z=await(0,_.EE)("/api/accesses/v4/project/"+N+"/permission_check?permission=P:update"),Z&&JSON.stringify(Z)!=="{}"&&(te=!0)}catch(G){Z=G,te=!1}return{result:Z,statusOk:te}}},68035:(x,B,n)=>{"use strict";n.d(B,{K:()=>M,L:()=>l});var g=n(63077),f=n(86478),E=n(7485),_=n(18166),i=n(29184),k=n(35269);const M=y=>{if((0,_.EG)(y))return l()},l=()=>(setTimeout(()=>{var y;return(y=MB)==null||(y=y.messageBucket)==null?void 0:y.send("mobileLoadProjectError",{errMsg:"\u753B\u5E03\u65E0\u9875\u9762\uFF0C\u65E0\u6CD5\u9884\u89C8"})},1e3),(0,k.jsx)(g.Z,{errorType:404,locale:(0,i.F)(),customTitle:I18N.dModule.project_screen_err_title,customDes:I18N.ToolBar.ReEnter,isShowSecondaryBtn:!1,primaryClick:()=>(0,f.HM)("zh-CN","\u539F\u578B-\u5206\u4EAB\u94FE\u63A5\u9875\u9762\u4E3A\u7A7A")}))},10737:(x,B,n)=>{"use strict";n.d(B,{Z:()=>M});var g=n(37780),f=n(77646),E=n(77200),_=n(9038);const i=l=>l.container.previewSetting.isShowSplash,k=(0,f.P1)([E.CL,E.vo,E.gz,i,E.GP,E.yT,E.Uq,E.EB],(l,y,m,c,u,h,w,W)=>{let{activePageKey:R,activeCanvasKey:Y}=w;return{screen:l,project:y,isImmersive:m,isShowSplash:c,previewOptions:u,isPanelPreviewMode:h,activePageKey:R,activeCanvasKey:Y,isPreviewCombo:W}}),M=(0,g.$j)(l=>k(l))(_.Z)},86478:(x,B,n)=>{"use strict";n.d(B,{HM:()=>w,IP:()=>u,mB:()=>h});var g=n(63077),f=n(45090),E=n(7485),_=n(46198),i=n(95534),k=n(38546),M=n(73752),l=n(29184),y=n(35269);const m=document.getElementById("workspace"),c=(0,f.ZP)(g.Z).withConfig({displayName:"utils__CustomizedCrashedPageStyle",componentId:"sc-1g7yepo-0"})([".btn-list{display:flex;flex-direction:row-reverse;justify-content:center;.primary{margin-left:20px;}.regular{margin-left:0 !important;}}"]),u=(W,R,Y)=>{_.render((0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c,{locale:(0,l.F)(),errorType:W.status||401,customTitle:R,customDes:Y})}),m)},h=async W=>{var R;let Y,J,P,z,N;try{({user:N}=await(0,M.EE)("/api/web/v3/initial"))}catch(Z){console.warn("[crashedPageWithUser]",Z);const te=ENV.IS_WONDER_SHARE?k.Z:i.Z;Y=()=>{_.render((0,y.jsx)(te,{isOpen:!0,type:"signin",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},J=I18N.Common.signin,z=()=>{_.render((0,y.jsx)(te,{isOpen:!0,type:"signup",source:"proto-org-preview",onConfirm:()=>location.reload()},Math.random()),document.getElementById("IBOT_MODAL_ROOT"))},P=I18N.Common.signup,N={}}_.render((0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c,{locale:(0,l.F)(),errorType:W.status||401,identity:1,account:(R=N)==null?void 0:R.email,primaryBtnText:J,primaryBtnClick:Y,secondaryBtnText:P,secondaryBtnClick:z})}),m)},w=(W,R)=>{let Y="";W==="zh-CN"?Y="/":W==="jp"?Y="https://mockitt.wondershare.jp":Y="https://mockitt.wondershare.com",location.replace(Y)}},9569:(x,B,n)=>{"use strict";n.d(B,{C:()=>E,S:()=>_});var g=n(1372);const f=i=>("0"+parseInt(i).toString(16)).slice(-2),E=i=>!i||i==="rgba(0, 0, 0, 0)"||i==="transparent"?"transparent":(i=i.match(/^rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/),"#"+f(i[1])+f(i[2])+f(i[3])),_=i=>(0,g.LW)((0,g.LS)(i))},53092:(x,B,n)=>{"use strict";n.d(B,{PX:()=>W,z:()=>h});var g=n(53375),f=n.n(g),E=n(43827),_=n.n(E),i=n(57480),k=n.n(i),M=n(29184);function l(R){return R<10?"0"+R:R}function y(R,Y,J){const P=new Date(R),z=P.getFullYear(),N=l(P.getMonth()+1),Z=l(P.getDate()),te=l(P.getHours()),G=l(P.getMinutes());return Y==="time"?te+":"+G:Y==="datetime"?""+N+J+Z+" "+te+":"+G:""+z+J+N+J+Z+" "+te+":"+G}const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"];function c(R,Y){const J=new Date(R),P=J.getFullYear(),z=m[J.getMonth()],N=l(J.getDate()),Z=l(J.getHours()),te=l(J.getMinutes());return Y==="time"?Z+":"+te:Y==="datetime"?z+" "+N+" "+Z+":"+te:z+" "+N+", "+P+" "+Z+":"+te}function u(R,Y,J){if(Y===void 0&&(Y="datetime"),J===void 0&&(J="."),!R)return"";let P=R;typeof R!="number"&&(P=parseInt(R,10)),P.length===10&&(P=P*1e3);let z="";const N=(0,M.F)();return N==="zh-CN"?z=y(P,Y,J):(N==="en-US"||N==="en")&&(z=c(P,Y,J)),z}function h(R){const J=w()-R;let P="";if(J<=3e3)P=I18N.Common.just_now||"\u521A\u521A";else if(J>3e3&&J<6e4)P=Math.floor(J/1e3)+I18N.Common.num_seconds_ago||"\u79D2\u524D";else if(J>=6e4&&J<36e5)P=Math.floor(J/6e4)+I18N.Common.num_minutes_ago||"\u5206\u949F\u524D";else{P=u(R,"full");const z=new Date(new Date().setHours(0,0,0,0)).getTime(),N=new Date(new Date().getFullYear(),0,1).getTime();R>N&&(P=u(R,"datetime")),R>z&&(P=u(R,"time"))}return P}function w(){return new Date().getTime()}const W=R=>{f().locale(R==="zh-CN"?"zh-cn":R),f().extend(_()),f().extend(k())}},44911:(x,B,n)=>{"use strict";n.d(B,{EX:()=>_,KU:()=>l,NF:()=>k,Vg:()=>m,iV:()=>i,pq:()=>M,tD:()=>y});var g=n(27952),f=n(53375),E=n.n(f);const _=(c,u,h)=>{const{is_trial_enabled:w}=c||{};if(w||!i(u==null?void 0:u.plan,u==null?void 0:u.trial))return!1;const{trial_end_on:R}=u;return R?!1:!h.some(J=>{const P=k(J),{value_in_cents:z}=J;return["paid"].includes(P)||z>10})},i=(c,u)=>c==="org_free"&&!u,k=c=>{if(i(c==null?void 0:c.plan,c==null?void 0:c.trial))return"free";const{paid:u,trial:h,value_in_cents:w,next_billing_on:W,plan:R}=c||{},Y=E()(W).startOf("day"),J=E()().startOf("day"),P=Y.isSameOrBefore(J);let z;return P?(z=w>10?"paidExpire":"trialExpire",R||(z="defaultExpire")):(u&&(z="paid"),h&&(z="trial")),z},M=(c,u)=>c==="org_free"&&!u?I18N.Common.free_plan:c==="org_lite"?I18N.Common.team_plan:c==="org_full"?I18N.Common.business_plan:c==="org_free"&&u?I18N.Common.business_trial_plan:I18N.Common.business_plan,l=(c,u)=>{if(u){const{plan:h,trial:w}=u;return M(h,w)}else return(c==null?void 0:c.current_plan)==="solo"?I18N.Common.personal_plan:I18N.Common.free_plan},y=(c,u)=>{if(u&&u.cid){const{limitation:h,plan:w,trial:W,paid:R,next_billing_on:Y,value_in_cents:J}=u;return{storage:h.storage,isExportWatermark:h.is_export_watermark,maxPicBytes:h.max_pic_bytes,maxScreenCount:h.max_p2page_count||3,maxProjectVersionCount:h.max_project_version_count,maxMktCount:h.max_mkt_count,plan:w,trial:W,paid:R,next_billing_on:Y,value_in_cents:J,maxSharingCount:h.max_project_share_count,maxProjectCount:h.max_project_count}}if(c&&c.cid){const{limitation:h,current_plan:w,trial:W,paid:R,next_billing_on:Y,free_projects_count:J}=c;return{storage:h.storage,current_plan:w,trial:W,paid:R,next_billing_on:Y,isExportWatermark:!1,maxPicBytes:0,maxScreenCount:(h==null?void 0:h.max_p2page_count)||3,maxProjectVersionCount:0,maxMktCount:0,value_in_cents:0,maxSharingCount:w==="solo"?3:1,maxProjectCount:J}}return{storage:0,isExportWatermark:!1,maxPicBytes:0,maxScreenCount:0,maxProjectVersionCount:0,maxMktCount:0,plan:"",trial:!1,paid:!1,next_billing_on:"",value_in_cents:0,maxSharingCount:1,maxProjectCount:3}},m=(c,u)=>{let h;return u&&(h=i(u.plan,u.trial)?3:30),!u&&c&&(h=(0,g.r)(c)==="free"?3:30),h}},46562:(x,B,n)=>{"use strict";n.d(B,{B:()=>i});var g=n(33779),f=n(44911),E=n(27952);const _={paid:"paid",trial:"trial",free:"free",paidExpire:"expired",trialExpire:"expired",defaultExpire:"expired"};(0,g.Wb)();const i=(k,M,l,y,m)=>{const c=M?(0,f.NF)(M):(0,E.r)(k),u=_[c],h=(0,f.pq)(y,m),w={limitReason:l,currentPlanProduct:M?h:(0,E.S)(k),currentPlanCategory:M?"org":"solo",currentType:u,currentEditMember:(M==null?void 0:M.totalSeats)||"",currentViewMember:(M==null?void 0:M.totalViewerSeats)||""};return g.xd.limitPopup(w)}},32541:(x,B,n)=>{"use strict";n.d(B,{CB:()=>_,Kd:()=>E,No:()=>f});var g=n(41768);const f=i=>{switch(i){case"iphone":case"ipad":case"apple_watch":return"ios";case"android":return"android";default:return"others"}},E=(i,k)=>{let{width:M,orientation:l}=k;const y=l==="landscape";let m="customize";return!y&&i.width===M||y&&i.height===M?m=i.device:Object.entries(g.YE).forEach(c=>{let[u]=c;(!y&&u.width===M||y&&u.height===M)&&(m=u.device)}),!i.template&&!i.combo&&["android","ipad","iphone"].includes(i.device)&&["android","ipad","iphone"].includes(m)},_=i=>!i.template&&!i.combo&&["android","ipad","iphone"].includes(i.device)},59729:(x,B,n)=>{"use strict";n.d(B,{WL:()=>E,_5:()=>_,gn:()=>M,ll:()=>k});var g=n(74223);const f="jsid",E=()=>{try{const y=new URLSearchParams(location.search).get(f);y?window.localStorage.setItem(f,y):window.localStorage.removeItem(f)}catch(l){window.localStorage.removeItem(f)}},_=function(l){l===void 0&&(l=!1);try{if(ENV.IS_ON_PREMISES||ENV.IS_WONDER_SHARE)return"";const y=window.localStorage.getItem(f);return y?l?"&jsid="+y:"?jsid="+y:""}catch(y){return""}};function i(l){const y=/^[^?#]+\?([^#]+)/.test(l),m=_(y),c=m&&(l==null?void 0:l.includes(m==null?void 0:m.slice(1)));return""+l+(c?"":m)}const k=l=>{const y=i(l);location.href=y},M=(l,y,m)=>{const c=i(l);(0,g.MI)(c,y,m)}},94586:(x,B,n)=>{"use strict";n.d(B,{F:()=>E});var g=n(10552),f=n(32541);const E=_=>{const i=(0,f.No)(_);return((0,g.V5)()?"mac":(0,g.ED)()?"windows":"other-os")+" "+i+" "+_}},27952:(x,B,n)=>{"use strict";n.d(B,{S:()=>E,r:()=>_});var g=n(53375),f=n.n(g);const E=i=>{if(!i)return"\u514D\u8D39\u7248";const{edition:k,current_plan:M,trial:l}=i;if(k==="premium_lifetime")return"\u5C0A\u4EAB\u7EC8\u8EAB\u7248";if(k==="standard_lifetime")return"\u7EC8\u8EAB\u7248";if(M==="free")return"\u514D\u8D39\u7248";if(M==="solo")return l?"\u8BD5\u7528\u7248":"\u6807\u51C6\u7248"},_=i=>{if(!i)return"free";const{plan:k,paid:M,trial:l,next_billing_on:y}=i,m=f()(y).startOf("day"),c=f()().startOf("day"),u=m.isSameOrBefore(c);let h;return u?h="free":(M&&(h="paid"),k==="solo"&&l&&(h="trial"),k==="free"&&(h="free")),h}},62059:(x,B,n)=>{"use strict";n.d(B,{$b:()=>i,Mn:()=>l,U1:()=>E,tv:()=>_,wb:()=>f});var g=n(25101);const f=ENV.NO_TRACK?()=>{}:g.wb,E=ENV.NO_TRACK?()=>{}:function(){(0,g.U1)(...arguments)},_=ENV.NO_TRACK?()=>{}:g.pj,i=ENV.IS_WONDER_SHARE?y=>{if(!window.gtag)return console.error("gtag is not a function");window.gtag("config","UA-4839360-64",{user_id:y,transport_type:"beacon"})}:()=>{},k={"https://mockitt.wondershare.com/proto":"B3-V8\u539F\u578B\u5185\u5206\u4EAB"},M=()=>{const y=Object.keys(k).sort((m,c)=>c.length-m.length);return k[y.find(m=>window.location.href.indexOf(m)!==-1)]},l=async y=>{try{await fetch("https://mockitt.wondershare.com/invite_track?entry="+M()+"&entry_term="+y)}catch(m){console.error(m)}}},10552:(x,B,n)=>{"use strict";n.d(B,{B0:()=>u,CL:()=>i,Dt:()=>y,ED:()=>E,IF:()=>h,Md:()=>w,Rv:()=>_,V5:()=>f,_1:()=>m,_j:()=>W,d:()=>g,gn:()=>c,i7:()=>k,li:()=>R,tq:()=>l,vU:()=>M});const g=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),f=()=>/(Macintosh)/i.test(navigator.userAgent),E=()=>/(Windows)/i.test(navigator.userAgent),_=()=>/(Lark)/i.test(navigator.userAgent),i=()=>/MicroMessenger/i.test(navigator.userAgent),k=()=>/Chrome/i.test(navigator.userAgent),M=()=>/Firefox/i.test(navigator.userAgent),l=()=>/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent),y=()=>/Android/i.test(navigator.userAgent),m=()=>/(iPad)/.test(navigator.userAgent),c=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),u=()=>!!(window.webkit&&window.webkit.messageHandlers),h=()=>navigator.standalone,w=()=>/\/uichina$/.test(location.pathname),W=()=>/\/forum$/.test(location.pathname),R=()=>/(MobileClient)/.test(navigator.userAgent)},37661:(x,B,n)=>{"use strict";n.d(B,{C:()=>E,L:()=>i});var g=n(11685),f=n(34896);const E=k=>{var M;const{sup:l,hotAttr:{fixPosTo:y}}=sdkStore.getHotItem(k),m=sdkStore.getHotItem(l),c=(m==null||(M=m.hotAttr)==null?void 0:M.type)===g.l.Canvas;return{fixedOnTop:!(0,f.pf)(k)&&y===g.$.FIXED_TYPE.top&&c,fixedOnBottom:!(0,f.pf)(k)&&y===g.$.FIXED_TYPE.bottom&&c}},_={fixedOnTop:!1,fixedOnBottom:!1},i=k=>{const M=sdkStore.findUpHotItemList(k),l=M.findIndex(m=>{var c;return!(0,f.pf)(m.key)&&((c=m.hotAttr)==null?void 0:c.type)===g.l.Canvas});if(l===-1)return _;const y=M[l-1];return y?E(y.key):_}},95534:(x,B,n)=>{"use strict";n.d(B,{Z:()=>y});var g=n(49650),f=n(7485),E=n(7627),_=n.n(E),i=n(14974),k=n(71464),M=n(27004),l=n(35269);class y extends f.PureComponent{constructor(){super(...arguments),(0,g.Z)(this,"setComponentRef",c=>this.modal=c),(0,g.Z)(this,"getEntry",()=>{const c=new URLSearchParams(location.search),u=c&&c.get("view_mode");return u?k.I[u]:""})}componentDidMount(){const{dispatch:c,onConfirm:u}=this.props,h=this;window.onmessage=async function(w){if(w.data==="loginSuccess")typeof c=="function"&&c({type:"modal:update:state",payload:{loginModal:{isOpen:!1}}}),u();else if(w.data==="close"){var W;h==null||(W=h.modal)==null||W.close()}},M.x.userSourceTrack(this.getEntry())}render(){const{isOpen:c,onClose:u,type:h,source:w}=this.props,W=this.getEntry(),R=W?"&entry="+W:"",Y=location.origin+"/embed/auth_box?type="+h+(w?"&source="+w:"")+R;return(0,l.jsx)(i.B,{isOpen:c,onClose:u,ref:this.setComponentRef,className:"login-modal",children:(0,l.jsx)("iframe",{src:Y})})}}(0,g.Z)(y,"propTypes",{source:_().string,isOpen:_().bool,type:_().string,dispatch:_().func,onConfirm:_().func,onClose:_().func}),(0,g.Z)(y,"defaultProps",{type:"signin"})},38546:(x,B,n)=>{"use strict";n.d(B,{Z:()=>y});var g=n(49650),f=n(7485),E=n(7627),_=n.n(E),i=n(14974),k=n(59729),M=n(24397),l=n(35269);class y extends f.PureComponent{constructor(){super(...arguments),(0,g.Z)(this,"setComponentRef",c=>this.modal=c)}componentDidMount(){const c=this;window.onmessage=async function(u){if(u.data==="loginSuccess"||u.data==="registerSuccess"){const h=btoa("client=web&type=to_url&url="+location.href),w="https://accounts.wondershare.com/v3/user/oauth-client/authorize?response_type=code&redirect_uri="+location.origin+"/wondershare/callback&scope=user%20normal&state="+h+"&source=37&app_key=689b3b14b4e225a9ddadd80a5ef81ca3&product_id=8038";(0,k.ll)(w)}else u.data==="close"&&c.modal.close()}}render(){const{isOpen:c,onClose:u,type:h}=this.props,w="https://accounts.wondershare.com/web/"+(h==="signin"?"login":"register")+"?redirect_uri="+location.origin+"&source=37&site=mockitt.wondershare.com&mode=1";return(0,l.jsxs)(i.I,{isOpen:c,onClose:u,ref:this.setComponentRef,className:"login-modal",children:[(0,l.jsx)("iframe",{src:w}),(0,l.jsx)("button",{className:"btn-close-modal",onClick:u,children:(0,l.jsx)(M.q,{name:"common/close"})})]})}}(0,g.Z)(y,"propTypes",{isOpen:_().bool,type:_().string,onClose:_().func}),(0,g.Z)(y,"defaultProps",{type:"signin"})},23555:(x,B,n)=>{"use strict";n.d(B,{Z:()=>_});var g=n(37780),f=n(77200),E=n(24767);const _=(0,g.$j)(i=>{const k=(0,f.kc)(i),M=(0,f.GP)(i),l=(0,f.Ds)(i),y=(0,f.ts)(i),m=(0,f.Nu)(i),c=(0,f.yT)(i);return{user:y,mode:l,theme:m,previewOptions:M,previewSetting:k,isHiddenToolBar:(0,f.qe)(i),isPanelPreviewMode:c}})(E.Z)},46807:(x,B,n)=>{"use strict";n.d(B,{Z:()=>_});var g=n(37780),f=n(77200),E=n(8795);const _=(0,g.$j)(i=>{const k=(0,f.kc)(i),M=(0,f.GP)(i),l=(0,f.S7)(i),y=(0,f.EB)(i);return{previewOptions:M,previewSetting:k,isCommunityComboPreview:l,isPreviewCombo:y}})(E.Z)},7382:(x,B,n)=>{"use strict";let g=function(e){return e.marketTemplate="market_template",e.marketTemplateProto2="market_template_proto2",e.product="product",e.reviewableProject="reviewable_project",e.reviewableProjectProto2="reviewable_project_proto2",e}({});var f=n(46198),E=n(27444);const _=e=>new URLSearchParams(e).toString(),i=e=>{const t={};for(const[o,r]of new URLSearchParams(e).entries())t[o]=r;return t},k={},M={USER_COMBO:"user-combo",ORG_COMBO:"org-combo",PROJECT_MAIN:"project-main",PROJECT_TRASHCAN:"project-trashcan",PROJECT_TEMPLATE:"project-template",PANEL_TEMPLATE:"panel-template"},l={P:"v3"},y={PROTOTYPE:"prototype",DESIGN_DRAFT:"design-draft",MIND_MAP:"mind-map",FLOW_CHART:"flow-chart",ABOARD:"aboard"},m="proto2",c=e=>e===m?y.PROTOTYPE:e;var u=n(68633);const h=_(l),w=e=>({cid:e.cid,mtime:e.mtime,name:e.name,type:e.type,ttag:e.ttag||h,upper_cid:e.upper_cid,upper_type:e.upper_type}),W=(e,t)=>{t(e.cid,CID_PROJECT_META),t(e.upper_cid,CID_REF_EXTERNAL_UPPER)},R=(e,t)=>(e=w(e),e.cid=t(e.cid,CID_PROJECT_META),e.upper_cid=t(e.upper_cid,CID_REF_EXTERNAL_UPPER),e),Y=_(k),J=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Y,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),P=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&t(e.panel_screen_meta_cid,CID_REF_SCREEN_META),t(e.project_meta_cid,CID_REF_PROJECT_META)},z=(e,t)=>(e=J(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=t(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),N=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parent_cid:e.parent_cid,position:e.position,expanded:e.expanded,orientation:e.orientation,width:e.width,height:e.height,bgcolor:e.bgcolor,bgimage:e.bgimage,deleter_name:e.deleter_name,deleted_at:e.deleted_at,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid,artboard_id:e.artboard_id,artboard_image_url:e.artboard_image_url}),Z=(e,t)=>{t(e.cid,CID_SCREEN_META),e.parent_cid&&t(e.parent_cid,CID_REF_SCREEN_META),e.artboard_id&&t(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},te=(e,t)=>(e=N(e),e.cid=t(e.cid,CID_SCREEN_META),e.parent_cid&&(e.parent_cid=t(e.parent_cid,CID_REF_SCREEN_META)),e.artboard_id&&(e.artboard_id=t(e.artboard_id,CID_REF_EXTERNAL_ARTBOARD)),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),G=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,fh:e.fh,hh:e.hh,timestamp:e.timestamp,icon:e.icon}),re=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},de=(e,t)=>(e=G(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),ne=e=>({cid:e.cid,mtime:e.mtime,name:e.name,debug:e.debug}),oe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ani_name:"none",ani_count:1,ani_duration:e.ani_duration,ani_delay:e.ani_delay,link_type:e.link_type,widget_cids:e.widget_cids,target_cid:e.target_cid,targetstate_cid:e.targetstate_cid,state_cid:e.state_cid,gesture:e.gesture,transition:e.transition,timer:e.timer,reset:e.reset,menu_offset:e.menu_offset,scroll_offset:e.scroll_offset,screen_target_cid:e.screen_target_cid,ani_hide_duration:e.ani_hide_duration}),Oe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,screen_glue_cid:e.screen_glue_cid,screen_meta_cid:e.screen_meta_cid,screen_state_cid:e.screen_state_cid,overflow_behavior:e.overflow_behavior,scroll:e.scroll}),De=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),ot=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,image:e.image}),se=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),me=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,checked:e.checked}),Te=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),mt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked,switch_disabled:e.switch_disabled,thumb_checked_style:e.thumb_checked_style,thumb_unchecked_style:e.thumb_unchecked_style,track_checked_style:e.track_checked_style,track_unchecked_style:e.track_unchecked_style}),Et=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),At=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),kt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),en=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,primary_fixed:e.primary_fixed,checked:e.checked}),Kt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),an=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Dt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Wt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric}),Ht=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed,numeric:e.numeric,image:e.image}),tn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha}),Vt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),pn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),F=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),pe=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Me=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),he=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),je=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),ye=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),A=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),O=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),X=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),ie=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,text:e.text,border_radius:"",box_shadow:"",text_shadow:""}),Be=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,td:e.td,bo:e.bo,i:e.i,input_type:e.input_type,border_visibility:e.border_visibility}),We=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility}),et=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:e.border,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,td:e.td,bo:e.bo,i:e.i}),ht=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:0,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",is:e.is,icon:e.icon,fs:e.fs,view_box:e.view_box,path:e.path}),at=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,th:e.th,background:e.background,tc:e.tc,border:0,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",fs:e.fs,ha:e.ha,lh:e.lh,bo:e.bo,i:e.i,td:e.td,padding:e.padding,point:e.point,fills:e.fills}),lt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,icon:e.icon,is:e.is,view_box:e.view_box,path:e.path,border_visibility:e.border_visibility,fills:e.fills}),$e=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i}),Le=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,_ttPlacement:e._ttPlacement,_ttOffset:e._ttOffset,_ttArrowSize:e._ttArrowSize}),ft=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,border_visibility:e.border_visibility,fills:e.fills}),Ct=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,fills:e.fills}),_t=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,side_num:e.side_num,radius:e.radius,fills:e.fills}),Bt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,fs:e.fs,td:e.td,bo:e.bo,i:e.i,tableData:e.tableData,innerBorderV:e.innerBorderV,innerBorderH:e.innerBorderH,outerBorder:e.outerBorder,styleType:e.styleType}),Ft=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),nn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",image:e.image,p:e.p,clip:e.clip,filter:e.filter,clip_type:e.clip_type,image_rect:e.image_rect}),Nt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:""}),mn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points}),tt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:0,primary_fixed:e.primary_fixed,text:"",border_radius:"",box_shadow:e.box_shadow,text_shadow:"",points:e.points,arrow_types:e.arrow_types,arrow_stroke:e.arrow_stroke}),fn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding}),ei=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,clip:e.clip,border_visibility:e.border_visibility,fills:e.fills}),ti=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),An=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon}),ni=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:"",border_radius:e.border_radius,box_shadow:"",text_shadow:e.text_shadow,is:e.is,icon:e.icon,view_box:e.view_box,path:e.path,svgAttr:e.svgAttr,fills:e.fills}),ii=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:e.tc,border:0,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:e.text_shadow,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,clip:e.clip,size_type:e.size_type,font_direction:e.font_direction}),oi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),gn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:0,tc:0,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed}),ri=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),si=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:0,border:0,ro:e.ro,primary_fixed:e.primary_fixed,fills:e.fills}),ci=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,ha:e.ha,va:e.va,data:e.data}),$i=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,primary_fixed:e.primary_fixed}),Dn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,expanded:e.expanded}),li=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:1073741823,o:100,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio}),ai=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_keep_alive:e.is_keep_alive,is_hidden:e.is_hidden}),pi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",is_autoplay:e.is_autoplay,is_loop:e.is_loop,is_muted:e.is_muted,is_hide_controls:e.is_hide_controls}),yn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:"",box_shadow:"",text_shadow:"",background:e.background,foreground:e.foreground}),Yt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,fills:e.fills}),Bn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,chartType:e.chartType,chartCategory:e.chartCategory,chartTheme:e.chartTheme,grid:e.grid,showAxis:e.showAxis,textAngle:e.textAngle,legend:e.legend,showToolTip:e.showToolTip,smooth:e.smooth,showHelpMark:e.showHelpMark,chartBorderRadius:e.chartBorderRadius,chartInnerRadius:e.chartInnerRadius,chartData:e.chartData,progress:e.progress,shLabel:e.shLabel,unit:e.unit}),Qi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,min:e.min,max:e.max,sliderSize:e.sliderSize,is:e.is,ic:e.ic,number:e.number}),On=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),jn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,border_radius:e.border_radius,fs:e.fs,ha:e.ha,va:e.va,lh:e.lh,td:e.td,bo:e.bo,i:e.i,padding:e.padding,pagesNumber:e.pagesNumber,checkedBg:e.checkedBg,checkedBorder:e.checkedBorder,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,number:e.number}),mi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data}),_i=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,border_radius:e.border_radius,border:e.border,background:e.background,canExpandOneMenu:e.canExpandOneMenu}),ui=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,data:e.data,optionData:e.optionData,fs:e.fs,tc:e.tc,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBg:e.checkedBg,background:e.background,border:e.border,border_radius:e.border_radius}),di=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,textColor:e.textColor,borderColor:e.borderColor,disabled:e.disabled,checkedTc:e.checkedTc,checkedBgColor:e.checkedBgColor,layout:e.layout,selectionControlType:e.selectionControlType,gap:e.gap}),In=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",optionData:e.optionData,mutualWay:e.mutualWay,fs:e.fs,td:e.td,bo:e.bo,i:e.i,va:e.va,ha:e.ha,dropMenuEcho:e.dropMenuEcho,is_multiple:e.is_multiple}),hi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,panelData:e.panelData,expandData:e.expandData,selectedData:e.selectedData,isShowIcon:e.isShowIcon,canExpandOneMenu:e.canExpandOneMenu,navigationMenuType:e.navigationMenuType}),fi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,checkedTextSize:e.checkedTextSize,checkedTextColor:e.checkedTextColor,checkedBorder:e.checkedBorder,checkedBoldType:e.checkedBoldType,checkedFontStyle:e.checkedFontStyle,checkedTextDecoration:e.checkedTextDecoration,tc:e.tc}),bn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,ro:e.ro,primary_fixed:e.primary_fixed,optionData:e.optionData,fs:e.fs,tc:e.tc,background:e.background,border:e.border,border_visibility:e.border_visibility,isShowIcon:e.isShowIcon,isShowText:e.isShowText,iconSize:e.iconSize,iconColor:e.iconColor,selectedTextColor:e.selectedTextColor,selectedIconColor:e.selectedIconColor,isShowSelectedText:e.isShowSelectedText,isShowSelectedIcon:e.isShowSelectedIcon}),wn=e=>({cid:e.cid,mtime:e.mtime,name:e.name,bitFlag:e.bitFlag,gid:e.gid,link_cids:e.link_cids,v:e.v,locked:e.locked,display_name:e.display_name,z:e.z,o:e.o,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,ani_name:e.ani_name,ani_count:e.ani_count,ani_duration:e.ani_duration,ani_delay:e.ani_delay,th:e.th,background:e.background,tc:e.tc,border:e.border,ro:e.ro,primary_fixed:e.primary_fixed,text:e.text,border_radius:e.border_radius,box_shadow:e.box_shadow,text_shadow:"",fs:e.fs,ha:e.ha,va:e.va,td:e.td,bo:e.bo,i:e.i,border_visibility:e.border_visibility,fills:e.fills}),gi=e=>({cid:e.cid,mtime:e.mtime,name:e.name,left:e.left,top:e.top,width:e.width,height:e.height,aspect_ratio:e.aspect_ratio,data:e.data,display_name:e.display_name,bind_widget_cid:e.bind_widget_cid,ctime:e.ctime,order:e.order}),qi=536870911,eo=1073741823,to=null,yi=e=>{switch(e.name){case"debug":return ne(e);case"link":return oe(e);case"panel":return Oe(e);case"lr":return De(e);case"map_view":return ot(e);case"mcheckbox":return se(e);case"mradiobutton":return me(e);case"ios_switch":return Te(e);case"android_switch":return mt(e);case"ios_check":return Et(e);case"android_check":return At(e);case"android_radio":return kt(e);case"switch":return en(e);case"iphone_keyboard":return Kt(e);case"ipad_keyboard":return an(e);case"android_keyboard":return Dt(e);case"keyboard":return Wt(e);case"unified_keyboard":return Ht(e);case"search_bar":return tn(e);case"tab_bar":return Vt(e);case"ios_status_bar":return pn(e);case"iphone_x_status_bar":return F(e);case"android_status_bar":return pe(e);case"navigation_bar":return Me(e);case"nav_bar":return he(e);case"status_bar":return je(e);case"legacy_iphone_status_bar":return ye(e);case"legacy_iphone_x_status_bar":return A(e);case"legacy_android_status_bar":return O(e);case"legacy_ipad_status_bar":return X(e);case"webpage":return ie(e);case"mtext_input":return Be(e);case"mtextarea":return We(e);case"mselect":return et(e);case"tab_item":return ht(e);case"sticky":return at(e);case"button":return lt(e);case"text_field":return $e(e);case"mtooltip":return Le(e);case"rounded_rect":return ft(e);case"polygon":return Ct(e);case"star":return _t(e);case"table":return Bt(e);case"circle_rect":return Ft(e);case"image_view":return nn(e);case"rectangle":return Nt(e);case"line":return mn(e);case"arrow":return tt(e);case"label":return fn(e);case"text_view":return ei(e);case"icon_button":return ti(e);case"svg_icon_button":return An(e);case"svg_icon_path":return ni(e);case"rich_text":return ii(e);case"hr":return oi(e);case"ve":return gn(e);case"triangleb":return ri(e);case"triangletl":return si(e);case"carousel":return ci(e);case"mfile_input":return $i(e);case"group":return Dn(e);case"pg":return li(e);case"audio":return ai(e);case"video":return pi(e);case"qrcode":return yn(e);case"placeholder":return Yt(e);case"chart":return Bn(e);case"digital_stepper":return Qi(e);case"pagination_mobile":return On(e);case"pagination_web":return jn(e);case"slider":return mi(e);case"collapse":return _i(e);case"segmented_control":return ui(e);case"selection_control":return di(e);case"drop_menu":return In(e);case"navigation_menu":return hi(e);case"tabs":return fi(e);case"mobile_tab_bars":return bn(e);case"button_solid":return wn(e);case"annotate":return gi(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},bi=null,En=(e,t)=>{e.forEach(o=>{t(o),En(o.children,t)})},wi=(e,t)=>{const{name:o,cid:r,gid:s,link_cids:a}=e;if(t(r,CID_ITEM),s&&t(s,CID_ITEM_GROUP),a&&a.split(",").forEach(p=>t(p,CID_REF_ITEM)),o==="link"){const{widget_cids:p,target_cid:b,targetstate_cid:v,state_cid:C}=e;if(p)for(const j of p.split(","))t(j,CID_REF_ITEM);b&&t(b,CID_REF_SCREEN_META),v&&t(v,CID_REF_SCREEN_STATE),C&&t(C,CID_REF_SCREEN_META)}if(o==="panel"){const{screen_state_cid:p,screen_meta_cid:b,screen_glue_cid:v}=e;p&&t(p,CID_REF_SCREEN_STATE),b&&t(b,CID_REF_SCREEN_META),v&&t(v,CID_REF_SCREEN_GLUE)}o==="annotate"&&e.bind_widget_cid&&t(e.bind_widget_cid,CID_REF_ITEM)},no=(e,t)=>{e=filterEntry(e),JSON_TYPE_KEY_LIST.forEach(C=>{e[C]&&(e[C]=JSON.parse(JSON.stringify(e[C])))});const{name:o,cid:r,gid:s,link_cids:a,tableData:p,optionData:b,data:v}=e;if(e.cid=t(r,CID_ITEM),s&&(e.gid=t(s,CID_ITEM_GROUP)),a&&(e.link_cids=a.split(",").map(C=>t(C,CID_REF_ITEM)).join(",")),o==="table"){const j=p.links.map(I=>I.map($=>$?$.split(",").map(ae=>t(ae,CID_REF_ITEM)).join(","):""));e.tableData.links=j}if(bi.indexOf(o)!==-1){const C=[...b];En(C,j=>{j.data.link_cids&&(j.data.link_cids=t(j.data.link_cids,CID_REF_ITEM))}),e.optionData=C}if(o==="carousel"){const C=v.slides.map(j=>j.link_cids?{...j,link_cids:t(j.link_cids,CID_REF_ITEM)}:{...j});e.data={...v,slides:C}}if(o==="link"){const{widget_cids:C,target_cid:j,targetstate_cid:I,state_cid:$}=e;C&&(e.widget_cids=C.split(",").map(ae=>t(ae,CID_REF_ITEM)).join(",")),j&&(e.target_cid=t(j,CID_REF_SCREEN_META)),I&&(e.targetstate_cid=t(I,CID_REF_SCREEN_STATE)),$&&(e.state_cid=t($,CID_REF_SCREEN_META))}if(o==="panel"){const{screen_state_cid:C,screen_meta_cid:j,screen_glue_cid:I}=e;C&&(e.screen_state_cid=t(C,CID_REF_SCREEN_STATE)),j&&(e.screen_meta_cid=t(j,CID_REF_SCREEN_META)),I&&(e.screen_glue_cid=t(I,CID_REF_SCREEN_GLUE))}return o==="annotate"&&e.bind_widget_cid&&(e.bind_widget_cid=t(e.bind_widget_cid,CID_REF_ITEM)),e},Ei=(e,t)=>{switch(e.name){case"carousel":for(const o of e.data.slides)o.asset&&t(o.asset);break}e.image&&t(e.image)},ki=_(k),Rn=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||ki,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),io=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},Ln=(e,t)=>(e=Rn(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Fn=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),d=(e,t)=>{t(e.cid,CID_SCREEN_META),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},S=(e,t)=>(e=Fn(e),e.cid=t(e.cid,CID_SCREEN_META),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),D=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),ee=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},Q=(e,t)=>(e=D(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),fe=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,z:e.z,pageType:e.pageType}),ve=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),_e=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,clip:e.clip,layoutGrid:e.layoutGrid}),ue=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,x:e.x,y:e.y,v:e.v,locked:e.locked,z:e.z,complex:e.complex,symbolCid:e.symbolCid,overrides:e.overrides,layoutGrid:e.layoutGrid}),be=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),q=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,combineType:e.combineType,fills:e.fills,x:e.x,y:e.y,o:e.o,v:e.v,z:e.z}),le=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,style:e.style,paragraphs:e.paragraphs,textAlign:e.textAlign,verticalAlign:e.verticalAlign,paragraphSpacing:e.paragraphSpacing,textAutoResize:e.textAutoResize}),L=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,aspectRatio:e.aspectRatio,o:e.o,z:e.z,v:e.v,fills:e.fills,vector:e.vector}),U=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,aspectRatio:e.aspectRatio,fills:e.fills,corner:e.corner}),H=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,strokeShape:e.strokeShape,strokeFills:e.strokeFills,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v,fills:e.fills,start:e.start,sweep:e.sweep,ratio:e.ratio}),ce=e=>({cid:e.cid,type:e.type,name:e.name,mtime:e.mtime,parentCid:e.parentCid,blend:e.blend,shadows:e.shadows,blur:e.blur,mask:e.mask,complex:e.complex,locked:e.locked,constraint:e.constraint,exports:e.exports,x:e.x,y:e.y,w:e.w,h:e.h,o:e.o,z:e.z,v:e.v}),Ce=e=>{switch(e.type){case"Page":return fe(e);case"Frame":return ve(e);case"Symbol":return _e(e);case"Instance":return ue(e);case"Group":return be(e);case"CombinedShape":return q(e);case"RichText":return le(e);case"Vector":return L(e);case"RoundedRect":return U(e);case"Circle":return H(e);case"Slice":return ce(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},Fe=(e,t)=>{const{cid:o,parentCid:r,symbolCid:s}=e;t(o,CID_ITEM),r&&t(r,CID_REF_ITEM),s&&t(s,CID_REF_ITEM)},Ne=(e,t)=>{e=filterEntry(e);const{cid:o,parentCid:r,symbolCid:s}=e;return e.cid=t(o,CID_ITEM),r&&(e.parentCid=t(r,CID_REF_ITEM)),s&&(e.symbolCid=t(s,CID_REF_ITEM)),e};var Pe=n(58129);const Ae=(e,t)=>{let{name:o,mtime:r,locale:s}=t;const a=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,project_meta_cid:e.cid})],p=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,screen_glue_cid:a[0].cid,project_meta_cid:e.cid})],b=[{type:"Page",name:T("i_Page"),cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:0,pageType:1},{type:"Page",name:"Recycler",cid:getRandomCid("p"),mtime:getLocalTimestamp(),z:-1e4,pageType:0}],v=[createScreenObject(p[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r},b,e.type)])];return{screenGlueList:a,screenMetaList:p,screenObjectList:v}};var Ue=n(1372);const Ke=new Set(["android","iphone","ipad"]),we=new Set(["ipad_mini","ipad_pro_11","ipad_pro_12"]),Se=new Set(["iphone_x","iphone_xs_max","iphone_11_pro","iphone_11_pro_max","iphone_12_pro","iphone_12_pro_max","iphone_13_pro","iphone_13_pro_max","iphone_14_pro","iphone_14_pro_max","ipad_mini","ipad_pro_11","ipad_pro_12"]),Re={iphone_14_pro_max:[919,148,134,898],iphone_14_pro:[839,130,134,818],iphone_13_pro_max:[913,147,134,892],iphone_13_pro:[831,129,134,810],iphone_12_pro_max:[913,147,134,892],iphone_12_pro:[831,129,134,810],iphone_x:[799,121,134,778],iphone_xs_max:[883,141,134,862],iphone_11_pro:[799,121,134,778],iphone_11_pro_max:[883,141,134,862],ipad_mini:[1011,227,314,1009],ipad_pro_11:[1181,260,314,1179],ipad_pro_12:[1353,355,314,1351]},Ie={iphone_14_pro:48,iphone_13_pro:44,iphone_12_pro:44,iphone_x:44,iphone_11_pro:44,iphone_11_pro_max:44,iphone:20,ipad:24,ipad_3_4:20,ipad_pro:24,android:24,huawei_p40:58},He={iphone_14_pro:48,iphone_12_pro:44,iphone_13_pro:44,iphone_x:44,iphone_11_pro_max:44,iphone_11_pro:44,iphone:44,ipad:50,ipad_3_4:44,ipad_pro:50,android:56,huawei_p40:56},Ge=(e,t)=>{const o=t==="iphone_14_pro"||t==="iphone_14_pro_max"?"iphone_14_pro":t==="iphone_12_pro"||t==="iphone_x"||t==="iphone_xs_max"||t==="iphone_11_pro"||t==="iphone_11_pro_max"||t==="iphone_12_pro_max"||t==="iphone_13_pro"||t==="iphone_13_pro_max"?"iphone_x":e==="iphone"?"iphone":t==="ipad_3_4"?"ipad_3_4":t==="ipad_pro"?"ipad_pro":t==="ipad_mini"||t==="ipad_pro_11"||t==="ipad_pro_12"?"ipad":e==="android"&&t==="Huawei_p40"?"huawei_p40":e==="android"?"android":null;return{statusBarHeight:Ie[o],navBarHeight:He[o]}},K=(e,t)=>{let{name:o,mtime:r,width:s,height:a,device:p,model:b}=t;const v=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:o,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:s,height:a,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:o,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:r,width:s,height:a,project_meta_cid:e.cid})],C=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:s,height:a,bgcolor:"#fff",screen_glue_cid:v[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_screen")+" 2",parent_cid:null,position:2,expanded:!1,orientation:"portrait",width:s,height:a,bgcolor:"#fff",screen_glue_cid:v[0].cid,project_meta_cid:e.cid})],j={device:p,model:b,name:o,width:s},{itemList:I,extraInfo:$}=xe({hasNavBar:!0,...j}),{itemList:ae,extraInfo:ge}=xe({hasNavBar:!1,...j}),Ee=[createScreenObject(C[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,name:T("s_state")+" 1",position:1,timestamp:r,...$},I,e.type)]),createScreenObject(C[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,name:T("s_state")+" 1",position:1,timestamp:r,...ge},ae,e.type)])];return{screenGlueList:v,screenMetaList:C,screenObjectList:Ee,itemListSecondScreen:ae,extraInfoSecondScreen:ge}},xe=e=>{let{hasNavBar:t,device:o,model:r,name:s,width:a}=e;const p=Ke.has(o),b=Se.has(r),v=[],C={hh:0,fh:0};if(p){const{itemList:j,extraInfo:I}=ut({name:s,width:a,device:o,model:r,hasNavBar:t});if(v.push(...j),Object.assign(C,I),b){const{itemList:$,extraInfo:ae}=gt({width:a,model:r});v.push(...$),Object.assign(C,ae)}}return{itemList:v,extraInfo:C}},gt=e=>{let{width:t,model:o}=e;const[r,s,a,p]=Re[o],b=getLocalTimestamp(),v=we.has(o)?15:34,C=we.has(o)?0:1;return{extraInfo:{fh:v},itemList:[{cid:getRandomItemCid(),name:"rounded_rect",mtime:b,display_name:T("i_tab_bar"),background:[C,4177066239],width:t,left:0,top:p,height:v,border:[1,HEX8NUMBER_TRANSPARENT,1,"0"],v:!0},{cid:getRandomItemCid(),name:"rounded_rect",mtime:b,display_name:T("i_rounded_rect"),border:[0,HEX8NUMBER_TRANSPARENT,0,"0"],border_radius:"3",background:[1,255],top:r,left:s,width:a,height:5,v:!0}]}},ut=e=>{let{name:t,width:o,device:r,model:s,hasNavBar:a=!1}=e;const p=r==="android"&&s==="Huawei_p40"?"android_status_bar":s==="iphone_12_pro"||s==="iphone_13_pro"||s==="iphone_14_pro"||s==="iphone_x"||s==="iphone_xs_max"||s==="iphone_11_pro"||s==="iphone_11_pro_max"||s==="iphone_12_pro_max"||s==="iphone_13_pro_max"||s==="iphone_14_pro_max"||r==="android"?"iphone_x_status_bar":r==="iphone"||r==="ipad"?"ios_status_bar":null,{statusBarHeight:b,navBarHeight:v}=Ge(r,s),C=getLocalTimestamp(),j={};return r==="android"&&s==="Huawei_p40"&&Object.assign(j,{tc:"rgba(16, 16, 16, 1)",background:[1,4177066239]}),{extraInfo:{hh:b+(a?v:0)},itemList:[{cid:getRandomItemCid(),name:p,mtime:C,display_name:T("i_"+p),left:0,top:0,width:o,height:b,v:!0,...j},a&&{cid:getRandomItemCid(),name:"nav_bar",mtime:C,display_name:T("i_nav_bar"),left:0,top:b,height:v,text:t,width:o,v:!0}].filter(Boolean)}},Pt=_(k),zt=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Pt,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,project_meta_cid:e.project_meta_cid}),Ot=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&t(e.panel_screen_meta_cid,CID_REF_SCREEN_META),t(e.project_meta_cid,CID_REF_PROJECT_META)},on=(e,t)=>(e=zt(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.panel_screen_meta_cid&&(e.panel_screen_meta_cid=t(e.panel_screen_meta_cid,CID_REF_SCREEN_META)),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Nn=_(k),oo=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||Nn,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,width:e.width,height:e.height,is_single_state:e.is_single_state,panel_screen_meta_cid:e.panel_screen_meta_cid,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),gc=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},yc=(e,t)=>(e=oo(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),bc=(e,t)=>{let{name:o,mtime:r,width:s,height:a,locale:p}=t;const b=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:o,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:s,height:a,project_meta_cid:e.cid})],v=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:T("s_home"),parent_cid:null,position:1,expanded:!1,orientation:"portrait",width:s,height:a,bgcolor:"#fff",screen_glue_cid:b[0].cid,project_meta_cid:e.cid})],C=[createScreenObjectWithDefaultState(v[0].cid,p)];return{screenGlueList:b,screenMetaList:v,screenObjectList:C}},tr=_(k),ro=e=>({cid:e.cid,mtime:e.mtime,ttag:e.ttag||tr,type:e.type,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),wc=(e,t)=>{t(e.cid,CID_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},Ec=(e,t)=>(e=ro(e),e.cid=t(e.cid,CID_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),so=e=>({cid:e.cid,mtime:e.mtime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),kc=(e,t)=>{t(e.cid,CID_SCREEN_META),t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),t(e.project_meta_cid,CID_REF_PROJECT_META)},Cc=(e,t)=>(e=so(e),e.cid=t(e.cid,CID_SCREEN_META),e.screen_glue_cid=t(e.screen_glue_cid,CID_REF_SCREEN_GLUE),e.project_meta_cid=t(e.project_meta_cid,CID_REF_PROJECT_META),e),Mc=(e,t)=>{let{mtime:o,locale:r}=t;const s=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:o,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:o,project_meta_cid:e.cid})],a=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:o,screen_glue_cid:s[0].cid,project_meta_cid:e.cid})],p=[createScreenObjectWithDefaultState(a[0].cid,r)];return{screenGlueList:s,screenMetaList:a,screenObjectList:p}},nr=_(k),co=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||nr,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,project_meta_cid:e.project_meta_cid}),vc=(e,t)=>{},xc=(e,t)=>(e=co(e),e),ir=_(k),lo=e=>({cid:e.cid,mtime:e.mtime,name:e.name,ttag:e.ttag||ir,type:e.type,user_id:e.user_id,user_name:e.user_name,ctime:e.ctime,screen_glue_cid:e.screen_glue_cid,project_meta_cid:e.project_meta_cid}),Pc=(e,t)=>{},Sc=(e,t)=>(e=lo(e),e),Tc=(e,t)=>{let{name:o,mtime:r,width:s,height:a,device:p,model:b}=t;const v=[filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:o,type:SCREEN_GLUE_TYPE.PROJECT_MAIN,ctime:r,width:s,height:a,project_meta_cid:e.cid}),filterEntryScreenGlue({cid:getRandomScreenGlueCid(),mtime:r,name:o,type:SCREEN_GLUE_TYPE.PROJECT_TRASHCAN,ctime:r,width:s,height:a,project_meta_cid:e.cid})],C=[filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"page_list",screen_glue_cid:v[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"widget_items",screen_glue_cid:v[0].cid,project_meta_cid:e.cid}),filterEntryScreenMeta({cid:getRandomScreenMetaCid(),mtime:r,name:"comment_items",screen_glue_cid:v[0].cid,project_meta_cid:e.cid})],I=[{cid:getRandomItemCid("pg"),type:"Page",name:"\u9ED8\u8BA4\u5206\u9875",isDefault:!0,ctime:getLocalTimestamp(),sketchObjectID:"",z:0}],$=[],ae=[];return{screenGlueList:v,screenMetaList:C,screenObjectList:[createScreenObject(C[0].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},I,e.type)]),createScreenObject(C[1].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},$,e.type)]),createScreenObject(C[2].cid,[createScreenStateObject({cid:getRandomScreenStateCid(),mtime:r,timestamp:r},ae,e.type)])]}},ao=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position,theme:e.theme,strokeTheme:e.strokeTheme,nodeTheme:e.nodeTheme,fh:e.fh,hh:e.hh,timestamp:e.timestamp}),Ac=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},Dc=(e,t)=>(e=ao(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),or=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,from:e.from,to:e.to,controlPoints:e.controlPoints,fromArrow:e.fromArrow,toArrow:e.toArrow}),rr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,TID:e.TID,name:e.name,rect:e.rect,lineWidth:e.lineWidth,globalAlpha:e.globalAlpha,dash:e.dash,strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,font:e.font,text:e.text,textRect:e.textRect,locked:e.locked,zIndex:e.zIndex,data:e.data,rotate:e.rotate,borderRadius:e.borderRadius,image:e.image,lastImage:e.lastImage,imgNaturalWidth:e.imgNaturalWidth,imgNaturalHeight:e.imgNaturalHeight,imockImg:e.imockImg,img:e.img,anchors:e.anchors,rotatedAnchors:e.rotatedAnchors,hideAnchor:e.hideAnchor,hideSizeCP:e.hideSizeCP}),Bc=536870911,sr=e=>{switch(e.type){case"Line":return or(e);case"Node":return rr(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},Oc=(e,t)=>{const{cid:o,type:r,from:s,to:a,controlPoints:p}=e;t(o,CID_ITEM),r==="Line"&&(s&&t(s.id,CID_REF_ITEM),a&&t(a.id,CID_REF_ITEM),p&&p.forEach(b=>t(b.id,CID_REF_ITEM)))},jc=(e,t)=>{e=filterEntry(e);const{cid:o,type:r,from:s,to:a,controlPoints:p}=e;return e.cid=t(o,CID_ITEM),r==="Line"&&(s&&(e.from.id=t(s.id,CID_REF_ITEM)),a&&(e.to.id=t(a.id,CID_REF_ITEM)),p&&(e.controlPoints=p.map(b=>({...b,id:t(b.id,CID_REF_ITEM)})))),e},Ic=(e,t)=>{e.image&&t(e.image),e.lastImage&&t(e.lastImage),e.imockImg&&t(e.imockImg),e.img&&t(e.img)},po=e=>({cid:e.cid,mtime:e.mtime,name:e.name,position:e.position}),Rc=(e,t)=>{t(e.cid,CID_SCREEN_STATE)},Lc=(e,t)=>(e=po(e),e.cid=t(e.cid,CID_SCREEN_STATE),e),cr=e=>({cid:e.cid,mtime:e.mtime,name:e.name,theme:e.theme,backgroundColor:e.backgroundColor}),lr=e=>({cid:e.cid,mtime:e.mtime,name:e.name,parentCid:e.parentCid,expanded:e.expanded,width:e.width,height:e.height,placement:e.placement,order:e.order,background_color:e.background_color,border_color:e.border_color,border_width:e.border_width,border_style:e.border_style,text:e.text,font_size:e.font_size,font_weight:e.font_weight,font_family:e.font_family,font_bold:e.font_bold,font_italic:e.font_italic,font_underline:e.font_underline,font_line_through:e.font_line_through,font_color:e.font_color,link:e.link,link_desc:e.link_desc,img_path:e.img_path,img_width:e.img_width,img_height:e.img_height}),ar=e=>{switch(e.name){case"mindConfigNode":return cr(e);case"mindNode":return lr(e)}throw new Error("unexpected data name from: "+JSON.stringify(e))},Fc=(e,t)=>{const{cid:o,parentCid:r}=e;t(o,CID_ITEM),r&&t(r,CID_ITEM_GROUP)},Nc=(e,t)=>{e=filterEntry(e);const{cid:o,parentCid:r}=e;return e.cid=t(o,CID_ITEM),r&&(e.parentCid=t(r,CID_ITEM_GROUP)),e},zc=(e,t)=>{e.img_path&&t(e.img_path)},mo=e=>({cid:e.cid,mtime:e.mtime,name:e.name}),Uc=(e,t)=>{},Gc=(e,t)=>(e=mo(e),e),pr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isStraight:e.isStraight,fromCid:e.fromCid,fromDirection:e.fromDirection,startPoint:e.startPoint,toCid:e.toCid,toDirection:e.toDirection,endPoint:e.endPoint,dPathList:e.dPathList,lineStyle:e.lineStyle,comment:e.comment,commentStyle:e.commentStyle,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),mr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,width:e.width,height:e.height,initialHeight:e.initialHeight,initialWidth:e.initialWidth,layup:e.layup,isEditing:e.isEditing,x:e.x,y:e.y,z:e.z,backgroundColor:e.backgroundColor,rawContent:e.rawContent,pageCid:e.pageCid,groupCid:e.groupCid,noteStyle:e.noteStyle,name:e.name}),_r=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,sketchObjectID:e.sketchObjectID,ctime:e.ctime,etime:e.etime,z:e.z}),ur=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,isDefault:e.isDefault,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,sketchObjectID:e.sketchObjectID,z:e.z,ctime:e.ctime}),dr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,name:e.name,sketchObjectID:e.sketchObjectID,pageCid:e.pageCid,pageSketchObjectID:e.pageSketchObjectID,groupCid:e.groupCid,ctime:e.ctime,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,imageUrl:e.imageUrl,sliceUrl:e.sliceUrl,statusCid:e.statusCid,statusIndex:e.statusIndex,isActivedInStatus:e.isActivedInStatus,resource_type:e.resource_type,original_resource_type:e.original_resource_type}),hr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,isEditing:e.isEditing,no:e.no,rawContent:e.rawContent,recordList:e.recordList,rect:e.rect,status:e.status,vec2:e.vec2,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,artboardCid:e.artboardCid,artboardVec2:e.artboardVec2,pageCid:e.pageCid,groupCid:e.groupCid}),fr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,commentCid:e.commentCid,content:e.content,isEditing:e.isEditing,cTime:e.cTime,mTime:e.mTime,user:e.user,replyUser:e.replyUser}),gr=e=>({cid:e.cid,type:e.type,mtime:e.mtime,layup:e.layup,iconName:e.iconName,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,complexRect:e.complexRect,pageCid:e.pageCid,groupCid:e.groupCid,name:e.name}),yr=e=>{switch(e.type){case"AboardLine":return pr(e);case"Note":return mr(e);case"Page":return _r(e);case"Group":return ur(e);case"AboardsRef":return dr(e);case"Comment":return hr(e);case"CommentRecord":return fr(e);case"Stamp":return gr(e)}throw new Error("unexpected data type from: "+JSON.stringify(e))},br=e=>{switch(e){case y.DESIGN_DRAFT:return{filterEntryProjectMeta:w,filterEntryScreenGlue:Rn,filterEntryScreenMeta:Fn,filterEntryScreenState:D,filterEntryItem:Ce};case y.PROTOTYPE:case m:return{filterEntryProjectMeta:w,filterEntryScreenGlue:J,filterEntryScreenMeta:N,filterEntryScreenState:G,filterEntryItem:yi};case y.FLOW_CHART:return{filterEntryProjectMeta:w,filterEntryScreenGlue:zt,filterEntryScreenMeta:oo,filterEntryScreenState:ao,filterEntryItem:sr};case y.MIND_MAP:return{filterEntryProjectMeta:w,filterEntryScreenGlue:ro,filterEntryScreenMeta:so,filterEntryScreenState:po,filterEntryItem:ar};case y.ABOARD:return{filterEntryProjectMeta:w,filterEntryScreenGlue:co,filterEntryScreenMeta:lo,filterEntryScreenState:mo,filterEntryItem:yr}}throw new Error("unexpected projectMetaType: "+e)},Kc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueDesignDraft,collectCidScreenMeta:collectCidScreenMetaDesignDraft,collectCidScreenState:collectCidScreenStateDesignDraft,collectCidItem:collectCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGluePrototype,collectCidScreenMeta:collectCidScreenMetaPrototype,collectCidScreenState:collectCidScreenStatePrototype,collectCidItem:collectCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueFlowChart,collectCidScreenMeta:collectCidScreenMetaFlowChart,collectCidScreenState:collectCidScreenStateFlowChart,collectCidItem:collectCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueMindMap,collectCidScreenMeta:collectCidScreenMetaMindMap,collectCidScreenState:collectCidScreenStateMindMap,collectCidItem:collectCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{collectCidProjectMeta,collectCidScreenGlue:collectCidScreenGlueAboard,collectCidScreenMeta:collectCidScreenMetaAboard,collectCidScreenState:collectCidScreenStateAboard,collectCidItem:collectCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},Wc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueDesignDraft,remapCidScreenMeta:remapCidScreenMetaDesignDraft,remapCidScreenState:remapCidScreenStateDesignDraft,remapCidItem:remapCidItemDesignDraft};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGluePrototype,remapCidScreenMeta:remapCidScreenMetaPrototype,remapCidScreenState:remapCidScreenStatePrototype,remapCidItem:remapCidItemPrototype};case PROJECT_META_TYPE.FLOW_CHART:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueFlowChart,remapCidScreenMeta:remapCidScreenMetaFlowChart,remapCidScreenState:remapCidScreenStateFlowChart,remapCidItem:remapCidItemFlowChart};case PROJECT_META_TYPE.MIND_MAP:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueMindMap,remapCidScreenMeta:remapCidScreenMetaMindMap,remapCidScreenState:remapCidScreenStateMindMap,remapCidItem:remapCidItemMindMap};case PROJECT_META_TYPE.ABOARD:return{remapCidProjectMeta,remapCidScreenGlue:remapCidScreenGlueAboard,remapCidScreenMeta:remapCidScreenMetaAboard,remapCidScreenState:remapCidScreenStateAboard,remapCidItem:remapCidItemAboard}}throw new Error("unexpected projectMetaType: "+e)},Hc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:case PROJECT_META_TYPE.MIND_MAP:case PROJECT_META_TYPE.FLOW_CHART:case PROJECT_META_TYPE.ABOARD:return{};case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return{MAX_Z:MAX_Z_PROTOTYPE,STICKY_Z:STICKY_Z_PROTOTYPE}}throw new Error("unexpected projectMetaType: "+e)},Vc=e=>{switch(e){case PROJECT_META_TYPE.DESIGN_DRAFT:return createPresetProjectMetaDataDesignDraft;case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return createPresetProjectMetaDataProtoType;case PROJECT_META_TYPE.FLOW_CHART:return createPresetProjectMetaDataFlowChart;case PROJECT_META_TYPE.MIND_MAP:return createPresetProjectMetaDataMindMap;case PROJECT_META_TYPE.ABOARD:return createPresetProjectMetaDataAboard}},Yc=e=>{switch(e){case PROJECT_META_TYPE.PROTOTYPE:case PROJECT_META_TYPE_PROTO2:return collectAssetUrlPrototype;case PROJECT_META_TYPE.FLOW_CHART:return collectAssetUrlFlowChart;case PROJECT_META_TYPE.MIND_MAP:return collectAssetUrlMindMap;case PROJECT_META_TYPE.ABOARD:return collectAssetUrlAboard;default:throw new Error("unexpected projectMetaType: "+e)}},zn="v1",_o="screen",uo="screen-patch",ho=_({PB:zn,PBT:_o}),wr=_({PB:zn,PBT:uo}),Er="data",kr="itemList",fo=function(e,t){return t===void 0&&(t=[]),{ttag:ho,cid:e,stateList:t}},Xc=function(e,t,o){o===void 0&&(o=[]),SET_LOCALE(t);const r=getRandomScreenStateCid();return{ttag:ho,cid:e,stateList:[{cid:r,data:{cid:r,name:T("s_page_1_state"),mtime:getLocalTimestamp(),fh:0,hh:0,position:0},itemList:o}]}},go=function(e,t,o){e===void 0&&(e={}),t===void 0&&(t=[]);const{filterEntryScreenState:r,filterEntryItem:s}=br(o);return{cid:e.cid,data:r(e),itemList:t.map(s)}},yo=e=>{let{ttag:t}=e;const{PB:o,PBT:r}=i(t);if(o!==zn||r!==_o)throw new Error("[ScreenObject] invalid ttag: "+t)},$c=function(e,t){return t===void 0&&(t=[]),{ttag:wr,cid:e,statePatchList:t}},Cr=e=>{let{ttag:t}=e;const{PB:o,PBT:r}=i(t);if(o!==zn||r!==uo)throw new Error("[ScreenPatchObject] invalid ttag: "+t)},Mr=e=>({screenMetaCid:e,dataMap:{},itemListMap:{}}),Qc=e=>{const{dataMap:t,itemListMap:o}=e;if(!isCompactArrayShallowEqual(Object.keys(t),Object.keys(o)))throw new Error("[verifyScreenRuntimeState] stateCid mismatch")},vr=e=>{const{cid:t,stateList:o}=e,r=Mr(t);for(const{cid:s,data:a,itemList:p}of o)r.dataMap[s]=a,r.itemListMap[s]=p;return r},xr=(e,t)=>{const{screenMetaCid:o,dataMap:r,itemListMap:s}=e,a=[];for(const p of Object.keys(r)){const b=r[p],v=s[p];a.push(go(b,v,t))}return fo(o,a)};var Un=n(93834);const rn="cid",Mt="mtime",Pr=1,Ci=(e,t)=>e[Mt]!==t[Mt],Sr=(e,t)=>e[Mt]>=t[Mt],Tr=(e,t)=>e[Mt]>t[Mt],Ar=(e,t)=>e[Mt]<t[Mt]?{...e,[Mt]:t[Mt]+Pr}:e,bo=(e,t)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o],a=s[rn],p=e.get(a);if(p===void 0)return!0;if(Ci(p,s))return!0;e.delete(a)}return!!e.size},wo=(e,t)=>{let o=0;for(let r=0,s=t.length;r<s;r++){const a=t[r],p=a[rn],b=e.get(p);(b===void 0||Ci(b,a))&&o++,e.delete(p)}return o+=e.size,o},Eo=(e,t)=>{const o=[],r=[];for(let s=0,a=t.length;s<a;s++){const p=t[s],b=p[rn],v=e.get(b);v===void 0?o.push({[rn]:b,[Mt]:p[Mt]}):Ci(v,p)&&r.push(Ar(v,p)),e.delete(b)}return e.forEach(s=>{r.push(s)}),{deleteList:o,updateList:r}},Mi=(e,t,o,r)=>{let s=!1;const a=e.reduce(kn,new Map),p=t.reduce(kn,new Map);for(const b of o){const v=b[rn],C=a.get(v);if(C!==void 0&&Sr(C,b)){r(void 0,b),s=!0;continue}const j=p.get(v);if(j!==void 0&&(p.delete(v),Tr(j,b))){r(j,b),s=!0;continue}r(b,b)}return p.forEach(b=>{r(b,void 0),s=!0}),s},kn=(e,t)=>e.set(t[rn],t),qc=(e,t)=>bo(new Map(Object.entries(e)),Object.values(t)),el=(e,t)=>wo(new Map(Object.entries(e)),Object.values(t)),tl=(e,t)=>Eo(new Map(Object.entries(e)),Object.values(t)),nl=(e,t)=>{let{deleteList:o,updateList:r}=t;const s={};return Mi(o,r,Object.values(e),(p,b)=>{p!==void 0&&(s[p[rn]]=p)})?s:e},il=(e,t)=>bo(e.reduce(kn,new Map),t),ol=(e,t)=>wo(e.reduce(kn,new Map),t),rl=(e,t)=>Eo(e.reduce(kn,new Map),t),Dr=(e,t)=>{let{deleteList:o,updateList:r}=t;const s=[];return Mi(o,r,e,(p,b)=>{p!==void 0&&s.push(p)})?s:e},sl=(e,t)=>{if(e===void 0||t===void 0||e.dataMap!==t.dataMap&&hasObjectPatch(e.dataMap,t.dataMap))return!0;if(e.itemListMap!==t.itemListMap){const o=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const r of o){const s=e.itemListMap[r]||[],a=t.itemListMap[r]||[];if(e.dataMap[r]!==void 0&&hasArrayWithKeyPatch(s,a))return!0}}return!1},cl=(e,t)=>{if(e===void 0)return 1;if(t===void 0)return Object.keys(e.dataMap).length+Object.keys(e.itemListMap).length;let o=0;if(e.dataMap!==t.dataMap&&(o+=countObjectPatch(e.dataMap,t.dataMap)),e.itemListMap!==t.itemListMap){const r=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const s of r){const a=e.itemListMap[s]||[],p=t.itemListMap[s]||[];e.dataMap[s]!==void 0&&(o+=countArrayWithKeyPatch(a,p))}}return o},ll=function(e,t){t===void 0&&(t=Br);const o=[];if(e.dataMap!==t.dataMap){const{deleteList:r,updateList:s}=generateObjectPatch(e.dataMap,t.dataMap);(r.length||s.length)&&o.push({type:PB_PATCH_SCREEN_STATE_DATA,deleteList:r,updateList:s})}if(e.itemListMap!==t.itemListMap){const r=new Set([...Object.keys(e.itemListMap),...Object.keys(t.itemListMap)]);for(const s of r){const a=e.itemListMap[s]||[],p=t.itemListMap[s]||[];if(e.dataMap[s]===void 0)continue;const{deleteList:b,updateList:v}=generateArrayWithKeyPatch(a,p);(b.length||v.length)&&o.push({type:PB_PATCH_SCREEN_STATE_ITEM_LIST,stateCid:s,deleteList:b,updateList:v})}}return o},Br={screenMetaCid:void 0,dataMap:{},itemListMap:{}},Or=(e,t)=>{if(t.length===0)return e;let{dataMap:o,itemListMap:r}=e;for(const{type:s,stateCid:a,deleteList:p,updateList:b}of t)switch(s){case Er:{const v=o,C={};o=Mi(p,b,Object.values(v),(I,$)=>{I===void 0?r=(0,Un.i7)(r,$.cid):(C[I.cid]=I,r[I.cid]===void 0&&(r[I.cid]=[]))})?C:v;break}case kr:{if(o[a]===void 0)break;const v=r[a]||[],C=Dr(v,{deleteList:p,updateList:b});r=(0,Un.iA)(r,a,C);break}}return e=(0,Un.iA)(e,"dataMap",o),e=(0,Un.iA)(e,"itemListMap",r),e},ko=function(e,t,o){if(t===void 0&&(t=[]),yo(e),t.length===0)return e;let r=vr(e);for(const s of t){if(Cr(s),s.cid!==e.cid)throw new Error("[applyScreenPatchObjectList] unexpected patch cid: "+s.cid+", expect: "+e.cid);r=Or(r,s.statePatchList)}return e=xr(r,o),e},jr=async e=>{let{projectBufferData:t,parseConcatGzipDataToObjectList:o,projectMetaType:r}=e;const s=await o(t);return Ir(s,r)},Ir=(e,t)=>{const o={},r=a=>{let p=o[a];return p===void 0&&(p=[],o[a]=p),p};return e.forEach(a=>r(a.cid).push(a)),Object.values(o).map(a=>{let[p,...b]=a;return p=Co(p,t),b.length&&(p=ko(p,b,t)),p=Co(p,t),p})},Co=(e,t)=>{yo(e);const o=r=>r.mtime!==void 0?r:{...r,mtime:0};return fo(e.cid,e.stateList.map(r=>go(o(r.data),r.itemList.map(o),t)))},al=async e=>{let{projectScreenData:t,parseConcatGzipDataToObjectList:o,projectMetaType:r}=e;const[s,...a]=await o(t);return ko(s,a,r)};var Rr=n(35608),Mo=n(30388);const{Blob:Gn}=window,Lr=e=>e instanceof ArrayBuffer?e:parseBlobAsArrayBuffer(e),pl=async e=>new Gn([gzip(new Uint8Array(await parseBlobAsArrayBuffer(new Gn([JSON.stringify(e)]))))]),ml=async e=>JSON.parse(await parseBlobAsText(new Gn([gunzip(new Uint8Array(await Lr(e)))]))),Fr=e=>{const t=[];let o=0,r=1;for(;r>0;){const s=new Rr.Inflate;if(s.push(new Uint8Array(e,o)),s.err)throw new Error("[gunzipAsArrayBufferList|pako] errorCode: "+s.err+", message: "+s.msg);t.push(s.result),o+=s.strm.total_in,r=s.strm.avail_in}return t},Nr=async e=>{const t=e instanceof ArrayBuffer?e:await(0,Mo.H)(e),o=Fr(t),r=[];for(const s of o){const a=await(0,Mo.n8)(new Gn([s]));for(const p of a.split("\n"))p&&p.length>2&&r.push(JSON.parse(p))}return r},{fetch:Kn}=window,_l=async e=>{const t=await Kn(e,{credentials:"same-origin"});if(!t.ok)throw new Error("[fetchGetHead] failed with "+t.status+": "+e)},vi=async(e,t)=>{const o=new Error(e);return o.payload={...await t.json().catch(()=>null),status:t.status},o},_n=async e=>{const t=await Kn(e,{credentials:"same-origin"});if(!t.ok)throw await vi("[fetchGetJSON] failed with "+t.status+": "+e,t);return t.json()},ul=async(e,t)=>{const o=await Kn(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});if(!o.ok)throw await vi("[fetchPostJSON] failed with "+o.status+": "+e,o);return o.json()},zr=async(e,t)=>{const o=await Kn(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),credentials:"same-origin"});if(!o.ok)throw await vi("[fetchPostBlob] failed with "+o.status+": "+e,o);return o.blob()},Ur=async e=>{let{projectMetaCid:t,projectMetaType:o,screenMetaCidList:r,projectBasicEncryptedPassword:s,accessToken:a=""}=e;if(r.length===0)return[];const p="/project-buffer/"+c(o)+"/all/"+t+"?password="+s+"&access_token="+a,b=await zr(p,{localKeyList:r});return await jr({projectBufferData:b,parseConcatGzipDataToObjectList:Nr,projectMetaType:o})},sn=async e=>{let{projectMetaList:t,screenMetaList:o,projectBasicEncryptedPassword:r="",accessToken:s=""}=e;const a=[];for(const p of t){const b=o.filter(C=>C.project_meta_cid===p.cid).map(C=>C.cid);b.length>2048&&console.warn("[fdPSOL] big proj: "+b.length);const v=(0,E.eO)(b,1024);for(const C of v)a.push(...await Ur({projectMetaCid:p.cid,projectMetaType:p.type,screenMetaCidList:C,projectBasicEncryptedPassword:r,accessToken:s}))}return a},dl=async e=>{let{userLocale:t}=e;const{user_combo_groups:o,screen_aligns:r,project_metas:s,screen_glues:a,screen_metas:p}=await fetchGetJSON("/api/library/v3/project_upper/user_combo_groups");console.log("[fdUSG] pm#"+s.length+" sg#"+a.length+" sm#"+p.length+" | ucg#"+o.length+" sa#"+r.length);const b=await sn({projectMetaList:s,screenMetaList:p});return{userComboGroupList:o,screenAlignList:r,projectMetaList:s,screenGlueList:a,screenMetaList:p,projectScreenObjectList:b}},hl=async e=>{let{projectBasicCid:t,userLocale:o}=e;const{project_basic:r,screen_aligns:s,project_metas:a,screen_glues:p,screen_metas:b}=await fetchGetJSON("/api/upper/web_v1/basics/"+t);console.log("[fdPB] pm#"+a.length+" sg#"+p.length+" sm#"+b.length+" | sa#"+s.length);const v=await sn({projectMetaList:a,screenMetaList:b});return{projectBasic:r,screenAlignList:s,projectMetaList:a,screenGlueList:p,screenMetaList:b,projectScreenObjectList:v}},Gr=async e=>{let{projectBasicAccessToken:t,projectBasicEncryptedPassword:o="",userLocale:r,projectVersion:s}=e;const{project_basic:a,screen_aligns:p,project_metas:b,screen_glues:v,screen_metas:C}=await _n("/api/upper/web_v1/basics/"+t+"?password="+o+(s?"&version="+s:"")),j=v.find(ae=>ae.type===M.PROJECT_TRASHCAN),I=j?C.filter(ae=>ae.screen_glue_cid!==j.cid):C;console.log("[fdPB+] pm#"+b.length+" sg#"+v.length+" sm#"+C.length+"/"+I.length+" | sa#"+p.length);const $=await sn({projectMetaList:b,screenMetaList:I,projectBasicEncryptedPassword:o,accessToken:t});return{projectBasic:a,screenAlignList:p,projectMetaList:b,screenGlueList:v,screenMetaList:I,projectScreenObjectList:$}},fl=async e=>{let{projectBasicAccessToken:t,projectBasicEncryptedPassword:o="",userLocale:r}=e;const{project_basic:s,screen_aligns:a,project_metas:p,screen_glues:b,screen_metas:v}=await fetchGetJSON("/api/upper/web_v1/basics/"+t+"?password="+o);console.log("[fdPBbAT] pm#"+p.length+" sg#"+b.length+" sm#"+v.length+" | sa#"+a.length);const C=await sn({projectMetaList:p,screenMetaList:v,projectBasicEncryptedPassword:o,accessToken:t});return{projectBasic:s,screenAlignList:a,projectMetaList:p,screenGlueList:b,screenMetaList:v,projectScreenObjectList:C}},Kr=async e=>{let{projectUpperCid:t,isFromIframe:o=!1}=e;const{market_template:r,screen_aligns:s,project_metas:a,screen_glues:p,screen_metas:b}=await _n("/api/community/v1/market_template/"+t+(o?"?is_from_iframe=true":""));console.log("[fdMT] pm#"+a.length+" sg#"+p.length+" sm#"+b.length+" | sa#"+s.length);const v=await sn({projectMetaList:a,screenMetaList:b});return{projectUpper:r,screenAlignList:s,projectMetaList:a,screenGlueList:p,screenMetaList:b,projectScreenObjectList:v}},Wr=async e=>{let{projectUpperCid:t,isFromIframe:o=1}=e;const{data:r,market_template:s,project_metas:a}=await _n("/api/community/v1/market_template/"+t+(o?"?is_from_iframe=true":""));return{screenMetaList:r,projectUpper:s,projectMetaList:a}},Hr=async e=>{let{projectUpperCid:t}=e;const{reviewable_project:o,screen_aligns:r,project_metas:s,screen_glues:a,screen_metas:p}=await _n("/api/community/v1/reviewable_project/"+t);console.log("[fdRP] pm#"+s.length+" sg#"+a.length+" sm#"+p.length+" | sa#"+r.length);const b=await sn({projectMetaList:s,screenMetaList:p});return{projectUpper:o,screenAlignList:r,projectMetaList:s,screenGlueList:a,screenMetaList:p,projectScreenObjectList:b}},Vr=async e=>{let{projectUpperCid:t}=e;const{reviewable_project:o,screen_aligns:r,project_metas:s}=await _n("/api/community/v1/reviewable_project/"+t);return{projectUpper:o,projectMetaList:s,screenAlignList:r}},Yr=async e=>{let{projectUpperCid:t}=e;const{product:o,screen_aligns:r,project_metas:s,screen_glues:a,screen_metas:p}=await _n("/api/upper/web_v1/product/"+t);console.log("[fdCP] pm#"+s.length+" sg#"+a.length+" sm#"+p.length+" | sa#"+r.length);const b=await sn({projectMetaList:s,screenMetaList:p});return{projectUpper:o,screenAlignList:r,projectMetaList:s,screenGlueList:a,screenMetaList:p,projectScreenObjectList:b}},gl=async(e,t)=>{let{teamCid:o,userLocale:r}=e;const{name:s,type:a,attr:p={},device:b,model:v,width:C,height:j,subProject:I,zboardTag:$,visibility:ae}=t,ge=UPPER_META_PROJECT_BASIC,{userId:Ee,upperCid:ze,zboardTabs:Xe,projectMetaCid:nt}=await fetchPostJSON("/project-buffer/"+a+"/check-init/project-upper?upperType="+ge,{presetOption:{locale:r,name:s,type:a,device:b,model:v,width:C,height:j},railsExtra:{team_cid:o,visibility:ae,name:s,type:a,attr:p,device:b,model:v,width:C,height:j,subProject:I,zboardTag:$}});return{userId:Ee,upperCid:ze,upperType:ge,zboardTabs:Xe,projectMetaCid:nt}},yl=async e=>{let{projectBasicCid:t,projectBasicType:o,teamCid:r}=e;const s=UPPER_META_PROJECT_BASIC,{userId:a,upperCid:p,projectMetaCid:b}=await fetchPostJSON("/project-buffer/"+o+"/check-duplicate/project-upper?upperAction=duplicate-project-basic&upperCid="+t,{railsExtra:{team_cid:r}});return{userId:a,upperCid:p,upperType:s,projectMetaCid:b}},bl=async e=>{let{upperCid:t,projectMetaCid:o,projectMetaType:r,screenGlueCid:s,screenMetaCidList:a,screenGlueCidList:p=[],nextUpperCid:b,nextProjectMetaCid:v,nextScreenGlueCid:C}=e;const{userId:j}=await fetchPostJSON("/project-buffer/"+r+"/check-transfer/screen-meta?upperCid="+t,{projectMetaCid:o,screenGlueCid:s,screenMetaCidList:a,screenGlueCidList:p,nextUpperCid:b,nextProjectMetaCid:v,nextScreenGlueCid:C});return{userId:j,upperCid:t,nextUpperCid:b}},wl=async e=>{let{encryptedPassword:t,accessToken:o}=e;const{urlHtmlZip:r}=await fetchPostJSON("/nodekiq/build-html-zip",{encryptedPassword:t,accessToken:o});return{urlHtmlZip:r}},El=async e=>{let{encryptedPassword:t,accessToken:o}=e;const{urlApk:r}=await fetchPostJSON("/nodekiq/build-apk",{encryptedPassword:t,accessToken:o});return{urlApk:r}};var Zt=n(73752);const xi=e=>{let{isVersions:t}=e;return{requestPreviewSetting:Pi,requestPreviewInitialData:vo,requestProjectFullDataByAccessToken:xo,updateProjectBasicsInfo:Jr,requestPreviewInitialData4ReadOnlyV2:Zr}},vo=async e=>{let{projectAccessToken:t,projectEncryptedPassword:o}=e;const r=o?"&password="+o:"";return(0,Zt.EE)("/api/upper/web_v1/design/readonly_initial?access_token="+t+r)},Zr=async e=>{let{projectAccessToken:t,view_mode:o}=e;return(0,Zt.EE)("/api/flat/web_v1/preview/initial?access_token="+t+"&view_mode="+o)},Pi=e=>{let{projectAccessToken:t,password:o}=e;return(0,Zt.EE)("/api/upper/web_v1/preview/setting?access_token="+t+"&password="+(o||""))},Wn=e=>{let{projectAccessToken:t,password:o}=e;return(0,Zt.EE)("/api/flat/web_v1/preview/setting?access_token="+t+"&password="+(o||""))},xo=async e=>{let{projectAccessToken:t,projectEncryptedPassword:o,userLocale:r,projectVersion:s}=e;const a=await Gr({projectBasicAccessToken:t,projectBasicEncryptedPassword:o,userLocale:r,projectVersion:s});if(!a)return;const{projectMetaList:[p],screenGlueList:b,screenMetaList:v,projectScreenObjectList:C,projectBasic:j,screenAlignList:I}=a;return{projectMeta:p,screenGlueList:b,screenMetaList:v,projectScreenObjectList:C,projectBasic:j,screenAlignList:I}},Jr=(e,t)=>(0,Zt.IP)("/api/upper/web_v1/basics/"+e,{...t}),Xr=(e,t)=>(0,Zt.EE)("/api/upper/web_v1/basics/auth/"+e+"?password="+t),kl={requestPreviewSetting:Pi,requestPreviewSettingV2:Wn,requestPreviewInitialData:vo,requestProjectFullDataByAccessToken:xo};var $r=n(46807),Qr=n(10737),qr=n(23555),Je=n(10552);const Hn=e=>{const{isEmbedV1:t=!1}=e||{};return{isDesktop:!((0,Je.tq)()||t),isInApp:!1,isMultiLink:!1,isMobile:(0,Je.tq)(),isIOSClient:(0,Je.B0)(),isStandAlone:(0,Je.IF)(),isEmbedV1:t,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,Je.Md)(),isForum:(0,Je._j)(),isElectron:(0,Je.d)(),isSquare:!1,isFeishu:(0,Je.Rv)(),isWechat:(0,Je.CL)(),...e}},Po=e=>{const{isMobile:t,isEmbedV2:o,isSquare:r}=e;return t?Qr.Z:o||r?$r.Z:qr.Z};var cn=n(86185),St=n(62059),yt=n(7485),So=n(63077),es=n(80263),un=n(86478),bt=n(59729),Jt=n(29184),V=n(35269);const ts=e=>{let t=e.status;if(!t){const o=e.toString().indexOf("401")>-1,r=e.toString().indexOf("404")>-1,s=e.toString().indexOf("403")>-1||o;t=r?404:s?403:500}return t},ns={P_EDIT_FORBIDDEN:0,P_EDIT_FORBIDDEN_ORG:1,P_EXCEEDS_LIMIT:3,ORG_EXPIRED:4},Si=async e=>{const t=ts(e);if(!t)return;const o=document.getElementById("workspace");let r=0,s,a,p,b,v;if(t===403){const{user:C}=await(0,es.L6)(),{mobile:j,email:I}=C||{};s=j||I,r=ns[e.error_type],(r===3||r===4)&&(b="\u89E3\u9501\u5347\u7EA7",v=()=>(0,bt.gn)("/brand/pricing","_blank","noreferrer"))}!a&&t==="link_expired"&&(a=()=>(0,un.HM)(e.lang,"\u94FE\u63A5\u91CD\u7F6E")),f.render((0,V.jsx)(yt.StrictMode,{children:(0,V.jsx)(So.Z,{identity:r,errorType:t,account:s,primaryBtnClick:a,primaryBtnText:p,secondaryBtnClick:v,secondaryBtnText:b,locale:(0,Jt.F)()})}),o)};var Cl=n(39110),Ml=n(21202);const vl={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};n(34268),n(87645),n(11460);var To=n(51293),is=n(75985),Ao=n.n(is),Do=n(44949),os=n(70103),Vn=n(37780),rs=n(23895),ss=n(47719);const cs={canUploadToSquare:!1},Cn=function(e){e===void 0&&(e="POPUP-HELPER-ROOT");const t=document.createElement("div");t.id=e,document.body.appendChild(t);const o=(0,os.MT)(rs.Z);f.render((0,V.jsx)(Vn.zt,{store:o,children:(0,V.jsx)(ss.Z,{})}),t);const{confirmAsync:r,alertAsync:s,alertAsyncWide:a,alertAsyncBlocked:p,promptGetPasswordAsync:b,loginAsync:v,teamSelectModalAsync:C,sharingAsync:j,chargeAsync:I,upgradeChatGPTAsync:$}=ls(o.dispatch);return{confirmAsync:r,alertAsync:s,alertAsyncWide:a,alertAsyncBlocked:p,promptGetPasswordAsync:b,loginAsync:v,teamSelectModalAsync:C,sharingAsync:j,chargeAsync:I,upgradeChatGPTAsync:$,destroy:()=>{f.unmountComponentAtNode(t),t.remove()}}},ls=e=>({confirmAsync:I=>{let{className:$,title:ae,desc:ge,isHTML:Ee,confirmText:ze,cancelText:Xe,isClose:nt,theme:Ve}=I;return new Promise(it=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,className:$,title:ae,desc:ge,isHTML:Ee,type:"alert",alertType:"confirm",canClose:nt!==!1,canCancel:!0,canConfirm:!0,cancelText:Xe,confirmText:ze,theme:Ve,onCancel:()=>it(!1),onConfirm:()=>it(!0)}}}))},alertAsync:I=>{let{title:$,desc:ae,isHTML:ge,confirmText:Ee}=I;return new Promise(ze=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:$,desc:ae,isHTML:ge,type:"alert",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:Ee,onConfirm:()=>ze()}}}))},alertAsyncWide:I=>{let{title:$,desc:ae,isHTML:ge,confirmText:Ee}=I;return new Promise(ze=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:$,desc:ae,isHTML:ge,type:"functional",alertType:"alert",canClose:!0,canCancel:!1,canConfirm:!0,confirmText:Ee,onConfirm:()=>ze()}}}))},alertAsyncBlocked:I=>{let{title:$,desc:ae,isHTML:ge,confirmText:Ee}=I;return new Promise(ze=>e({type:"modal:update:state",payload:{popupAlertModal:{isOpen:!0,title:$,desc:ae,isHTML:ge,type:"alert",alertType:"alert",canClose:!1,canCancel:!1,canConfirm:!0,confirmText:Ee,onConfirm:()=>ze()}}}))},promptGetPasswordAsync:(I,$)=>new Promise(ae=>e({type:"modal:update:state",payload:{previewAuthModal:{isOpen:I,isWrongPwd:$,onConfirm:ge=>ge&&ae(ge)}}})),loginAsync:I=>{let{onCancel:$=Mn,onConfirm:ae=Mn,type:ge="signin",source:Ee}=I;return e({type:"modal:update:state",payload:{loginModal:{source:Ee,isOpen:!0,type:ge,onCancel:$,onConfirm:ae}}})},teamSelectModalAsync:I=>{let{projectCid:$="",onCancel:ae=Mn,onConfirm:ge=Mn}=I;return e({type:"modal:update:state",payload:{teamSelectModal:{isOpen:!0,projectCid:$,onCancel:ae,onConfirm:ge}}})},sharingAsync:I=>{let{project:$,theme:ae,isGuestMode:ge,screenMetaList:Ee=[],onUpdateProject:ze=Mn,extraInfo:Xe=cs,screenMetaCidToVisit:nt,user:Ve}=I;return e({type:"modal:update:state",payload:{sharingModal:{isOpen:!0,project:$,theme:ae,extraInfo:Xe,isGuestMode:ge,screenMetaList:Ee,onUpdateProject:ze,screenMetaCidToVisit:nt,user:Ve}}})},chargeAsync:I=>e({type:"modal:update:state",payload:{chargeOverlay:{isOpen:!0,...I}}}),upgradeChatGPTAsync:I=>e({type:"modal:update:state",payload:{upgradeChatGPTModal:{isOpen:!0,...I}}})}),Mn=()=>{},Yn=e=>(0,Do.GQ)(e+"_pwd"),Zn=(e,t)=>(0,Do.A6)(e+"_pwd",t),dn=async(e,t)=>{let o;try{o=await Xr(e,t)}catch(r){o=r}return o},Jn=async e=>{const t=Cn();let o=!1,r=Ao()(await t.promptGetPasswordAsync(!0,!1));for((await dn(e,r)).status===403&&(o=!0);o;)r=Ao()(await t.promptGetPasswordAsync(!0,o)),(await dn(e,r)).status===403?o=!0:o=!1;return t.promptGetPasswordAsync(!1),r},Xn=(e,t,o)=>{if(!e)return!0;if(t){var r;return(o==null||(r=o.permissions.find(a=>a.user_id===e.id))==null?void 0:r.role)===void 0}else return!(e.id===o.owner_id)},as={api:{}},Bo=e=>{Object.assign(as,e)};var Ut=n(85322),$n=n(24011),Gt=n(44964);const xl=async e=>{let{projectMetaCid:t}=e;await initRootSdk({userId:void 0,flpakKey:t,onTransferError,onReadOnlyError,isDummyCmt:!0,__fetchFlpakAsync:fetchFlpakAsyncHZ},void 0)};var ps=n(35517),ms=n(38133);const _s=async e=>{let{projectBasicCid:t,accessToken:o,password:r}=e;try{const{userId:s,flatKey:a}=await(0,Zt.EE)("/api/flat/web_v1/proj2-preview-info?prj2Cid="+t+"&access_token="+o+"&password="+r);return{userId:s,flatKey:a}}catch(s){await(0,ps.Vz)(s)}},Oo=async e=>{let{projectBasic:t,password:o,accessToken:r}=e;{const s=r||t.access_token,{userId:a,flatKey:p}=await _s({projectBasicCid:t.cid,accessToken:s,password:o});console.log("[p2edit] uId="+a+" key="+p+" pbCid="+t.cid);const b=!!a,v=b&&!(0,ms.s_)();await(0,Gt.By)({userId:a,flpakKey:p,onTransferError:Gt.$p,onReadOnlyError:Gt.Yo,isAllowDat:b?"RO":!1,isAllowCmt:b,isAllowCur:v,token:s,passwd:o},t)}};var us=n(35158),Ti=n(50397);const jo=function(e,t,o){const r=t.getGuidesData()||"[]",s=new Set(JSON.parse(r)),a=new Set;return{checkGuideHasShown:p=>s.has(p),checkGuideToBeShown:p=>a.has(p),getState:()=>({commonGuidesHasShown:Array.from(s),commonGuidesToBeShown:Array.from(a)}),tryToShowGuide:p=>{var b;if(s.has(p)||!((b=MB)!=null&&(b=b.user)!=null&&b.id))return;const v=document.getElementById("MD_"+p);if(v){v.style.display="block";return}a.add(p),(0,us.k)(p,e,o)},markGuideAsRead:p=>{s.add(p),t.setGuidesData(JSON.stringify(Array.from(s)))},batchMarkGuideAsRead:p=>{p.forEach(b=>s.add(b)),t.setGuidesData(JSON.stringify(Array.from(s)))},closeGuide:p=>{const b=document.getElementById("MD_"+p);b&&b.parentNode&&b.parentNode.removeChild(b)},closeAllGuide:()=>{const p=document.getElementById("GUIDES");p&&p.parentNode&&p.parentNode.removeChild(p)},removeGuide:p=>{s.delete(p),t.setGuidesData(JSON.stringify(Array.from(s)))}}},Io=e=>{let{store:t,commonGuidesData:o,isDesign:r,isPreview:s}=e;MB.commonGuideHelper=jo(t,{getGuidesData:()=>o,setGuidesData:Ti.E},{isDesign:r,isPreview:s})},Ro=e=>{let{store:t,isDesign:o,isPreview:r}=e;const s={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:a}}=s;MB.commonGuideHelper=jo(t,{getGuidesData:()=>a,setGuidesData:()=>{}},{isDesign:o,isPreview:r})};var Ai=n(68035);const{MB:rt}=window;rt.f.inSharing=!0;const ds=e=>{let{initialData:t,designOptions:o,previewOptions:r,sharing:s,password:a,api:{updateProjectBasicsInfo:p}}=e;const{runnerController:b,messageBucket:v,webpackInterface:C,PreviewApp:j}=(0,To.o)(Po(r));return Bo({api:{updateProjectBasicsInfo:p}}),Object.assign(rt,{runnerController:b,messageBucket:v,webpackInterface:C,global:{popupHelper:Cn(),designOptions:o}}),rt.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:r}}),{requestData:async I=>{let{projectAccessToken:$,isPasswordRequired:ae,projectBasicCid:ge}=I;const{user:Ee,org:ze,preference:Xe,canEditByCurrentUser:nt,project_basic:Ve,project_meta:it,space:ct}=t,ln=Xn(Ee,ct,Ve);let Qe=Yn($);const qe=await dn($,Qe);if(ae&&ln&&qe.status===403){var dt;rt==null||(dt=rt.messageBucket)==null||dt.send("ready"),Qe=await Jn($),Zn($,Qe)}try{await Oo({projectBasic:Ve,password:Qe||a,accessToken:$})}catch(Tt){return setTimeout(()=>{var Lt,hn;return rt==null||(Lt=rt.messageBucket)==null?void 0:Lt.send("mobileLoadProjectError",{errMsg:"\u4EC5\u4F01\u4E1A\u6210\u5458\u53EF\u89C1-"+(rt!=null&&(hn=rt.user)!=null&&hn.id?"\u5DF2\u767B\u5F55\u4F46\u975E\u4F01\u4E1A\u6210\u5458":"\u672A\u767B\u5F55")})},1e3),(0,un.mB)(Tt)}rt.webpackInterface.store.dispatch({type:"entry:preview:update:current:sharing",payload:{sharing:s}}),rt.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:Xe||{}}});const wt=nt&&(it.is_org_project?!(Ve!=null&&Ve.expired):!(Ve!=null&&Ve.expired)||Ee.apps.length<=Ee.free_projects_count);Object.assign(rt,{user:Ee||{},canEditByCurrentUser:wt,org:ze||void 0}),rt.webpackInterface.store.dispatch({type:"entry:state:init"}),(0,cn.Z)();let Rt="[]";try{const{guide:Tt}=await(0,Ti.p)();Rt=(Tt==null?void 0:Tt.workspace_guides)||"[]"}catch(Tt){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}return Io({store:rt.webpackInterface.store,commonGuidesData:Rt,isDesign:!1,isPreview:!0}),{projectAlike:Ve,projectMeta:it,projectShare:s}},renderPreview:(I,$,ae,ge)=>{const Ee=(0,Ai.K)(ge);if(Ee)return Ee;const ze=new Ut.Sm;return(0,V.jsx)(Ut.XC.Provider,{value:ze,children:(0,V.jsx)($n.Z,{children:(0,V.jsx)(j,{store:C.store,projectAlike:I,projectMeta:$,projectShare:ge})})})}}},Pl=e=>{let{initialData:t,designOptions:o,previewOptions:r,sharing:s,api:{updateProjectBasicsInfo:a}}=e;const{isMobile:p,isIOSClient:b,isStandAlone:v}=r;(v||b)&&(document.documentElement.style.height="100vh");const{runnerController:C,messageBucket:j,webpackInterface:I,PreviewApp:$}=createPreviewRelated(getPreviewComponentByOptions(r));return setExternal({api:{updateProjectBasicsInfo:a}}),Object.assign(rt,{runnerController:C,messageBucket:j,webpackInterface:I,global:{popupHelper:createPopupHelper(),designOptions:o}}),rt.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:r}}),{requestData:async ae=>{let{projectAccessToken:ge,projectBasicCid:Ee}=ae;const{user:ze,org:Xe,preference:nt,project_basic:Ve,project_meta:it}=t;return await requestProjectFullDataFlat4HtmlZip({projectMetaCid:it.cid}),rt.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:s}}),rt.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:nt||{}}}),Object.assign(rt,{user:ze||{},canEditByCurrentUser:!1,org:Xe||void 0}),rt.webpackInterface.store.dispatch({type:"entry:state:init"}),hideLoading(),{projectAlike:Ve,projectMeta:it}},renderPreview:(ae,ge,Ee,ze)=>{sharingVisibleCrashEffect(ze);const Xe=new KeyboardManager,nt=new URLSearchParams(location.search),Ve=p?"preview":nt.has("inspect")?"inspect":nt.has("comment")?"comment":"preview";return _jsx(KeyboardManagerContext.Provider,{value:Xe,children:_jsx(TooltipsManagerProvider,{children:_jsx($,{store:I.store,previewMode:Ve,projectAlike:ae,projectMeta:ge,projectShare:ze})})})}}},Di=async e=>{let{initialData:t,previewOptions:o,api:r,projectAccessToken:s,projectEncryptedPassword:a,isPasswordRequired:p,$root:b,projectBasicCid:v,sharing:C,password:j}=e;const I={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:$,renderPreview:ae}=ds({api:r,initialData:t,previewOptions:o,designOptions:I,sharing:C,password:j}),{projectAlike:ge,projectMeta:Ee,projectShare:ze}=await $({projectAccessToken:s,projectEncryptedPassword:a,isPasswordRequired:p,projectBasicCid:v}),Xe=location.hash||"",nt=Xe&&Xe.startsWith("#screen=")&&Xe.substr(8);f.render(ae(ge,Ee,nt,ze),b)},Sl=async e=>{let{initialData:t,previewOptions:o,api:r,projectAccessToken:s,projectEncryptedPassword:a,isPasswordRequired:p,$root:b,projectBasicCid:v,sharing:C}=e;const j={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{requestData:I,renderPreview:$}=initPreviewHZ({api:r,initialData:t,previewOptions:o,designOptions:j,sharing:C}),{projectAlike:ae,projectMeta:ge}=await I({projectAccessToken:s,projectEncryptedPassword:a,isPasswordRequired:p,projectBasicCid:v}),Ee=location.hash||"",ze=Ee&&Ee.startsWith("#screen=")&&Ee.substr(8);ReactDOM.render($(ae,ge,ze),b)};var Bi=n(99990),Ye=n(49650),Oi=n(29402),ji=n(21258),hs=n(39160),Lo=n(7966),Ii=n(444);class Fo extends yt.PureComponent{constructor(t){super(t);const{store:o,projectBasic:r,projectMeta:s,isHtmlZip:a}=t,{screenKey:p,canvasKey:b}=(0,Ii.Qw)();this.state={visibleIsEmpty:!1};try{const v=(0,Ii.FZ)(p);o.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:r,projectMeta:s,screenCid:v,canvasCid:b,isHtmlZip:a}})}catch(v){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount()}render(){const{store:t}=this.props;return this.state.visibleIsEmpty?(0,Ai.L)():(0,V.jsx)(Vn.zt,{store:t,children:(0,V.jsx)(Lo.Z,{children:(0,V.jsx)(hs.Z,{})})})}}var Xt=n(28689),No=n(32380),Tl=n(16426),zo=n(53092),fs=function(e){return e[e.Design=0]="Design",e[e.Experience=1]="Experience",e[e.ReadOnly=2]="ReadOnly",e[e.Version=3]="Version",e[e.HTMLZip=4]="HTMLZip",e[e.Community=5]="Community",e}(fs||{});const Uo=e=>{let{initialData:t,designOptions:o,onUpdateAiState:r,global:s,onUpdateSharing:a}=e;const{user:p,org:b,team:v,preference:C,MBServer:j,orgList:I,user_fcg:$,org_fcg:ae,space:ge,canEditByCurrentUser:Ee}=t;(0,zo.PX)((0,Jt.F)()),Object.assign(MB,{user:p||{},currentOrg:b,canEditByCurrentUser:Ee,global:{...s,popupHelper:Cn(),experienceLoginModalHelper:No.m}}),Object.assign(window,{MBServer:j}),MB.action("current:update:state",{currentOrg:b,currentTeam:v,currentUser:p,orgList:I,user_fcg:$,org_fcg:ae,currentSpace:ge}),MB.action("update:design:options",{designOptions:o}),p!=null&&p.id&&MB.action("entry:init:preference",{preference:C}),MB.action("entry:init:community:params"),r&&r({user:p,org:b}),a&&a()},gs=async e=>{let{designStore:t}=e,o="[]";try{const{guide:r}=await(0,Ti.p)();o=r==null?void 0:r.workspace_guides}catch(r){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await Io({store:t,commonGuidesData:o,isDesign:!0,isPreview:!1})},Al=async e=>{let{type:t,projectBasicCid:o}=e;switch(t){case DesignType.Design:return requestProjectFullDataFlat(o);case DesignType.Experience:return requestExperienceFullDataFlat(o);default:throw new Error(t+" not found in known design types for "+o)}};var $t=n(4091);const ys=e=>{let{designOptions:t,initialData:o,onBackButtonClick:r,onComponentDidMount:s,sharing:a,password:p}=e,b=!1;const v=(0,ji.t)(MB);return Uo({initialData:o,designOptions:t,global:{onBackButtonClick:r,designOptions:t}}),{requestData:async()=>{const{project_basic:C,project_meta:j}=o;await gs({designStore:v});const I=(0,$t.ky)({search:"",pathname:location.pathname});return await Oo({projectBasic:C,password:p,accessToken:I}),Object.assign(MB,{tag:C==null?void 0:C.version}),(0,Xt.ld)(C),MB.action("entry:design:update:current:sharing",{sharing:a}),b=!0,{projectAlike:C,projectMeta:j,projectShare:a}},renderDesign:C=>{let{projectAlike:j,projectMeta:I}=C;return b?(0,V.jsx)(Fo,{store:v,projectBasic:j,projectMeta:I,onComponentDidMount:s,isHtmlZip:!1}):null}}};var Ri=n(6725),bs=n(43980),ws=n(34788),Li=n.n(ws);class Fi extends yt.PureComponent{constructor(){super(...arguments),(0,Ye.Z)(this,"handleTransitionEnd",t=>{t.target===this.$element&&MB.action("entry:update:screen-rect-map")})}render(){const{isCollapse:t,renderDesign:o,projectAlike:r,projectMeta:s}=this.props;return(0,V.jsx)("div",{ref:a=>this.$element=a,className:Li()("mb-design-page",{"is-collapse":t}),onTransitionEnd:this.handleTransitionEnd,children:o({projectAlike:r,projectMeta:s})})}}var Es=n(18166),Ni=n(90055);class Go extends yt.PureComponent{constructor(t){var o;super(t),o=this,(0,Ye.Z)(this,"handleWheelChanged",C=>{if(C.deltaX===0)return;const j=document.getElementById("workspace"),I=j.scrollLeft+j.offsetWidth===j.scrollWidth&&C.deltaX>0,$=j.scrollLeft===0&&C.deltaX<0;(I||$)&&C.preventDefault()}),(0,Ye.Z)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Ni.T),this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,Ye.Z)(this,"playDesignPageLeaveAnimation",function(C){return C===void 0&&(C=200),o.setState({isDesignCollapse:!0}),new Promise(j=>setTimeout(j,C))}),(0,Ye.Z)(this,"handleBackButtonClick",async()=>{var C;if((0,Xt._$)()){(0,Xt.gB)(Xt.Kk.enterPreview);return}const{initialData:{goback_url:j}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(j||"/dashboard/"+(((C=MB.currentOrg)==null?void 0:C.cid)||"me"))}),(0,Ye.Z)(this,"keyboardManager",new Ut.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,projectAlike:null,projectMeta:null,projectShare:void 0,visiblePageIsZero:!1};const{designOptions:r,initialData:s,sharing:a,password:p}=t,{requestData:b,renderDesign:v}=ys({initialData:s,designOptions:r,onBackButtonClick:this.handleBackButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:a,password:p});this.requestData=b,this.renderDesign=v}componentDidMount(){const t=performance.now(),{projectUpperCid:o,initialData:r}=this.props;Promise.all([this.requestData()]).then(s=>{let[{projectAlike:a,projectMeta:p,projectShare:b}]=s;const v=(0,Es.EG)(b);this.setState({projectAlike:a,projectMeta:p,projectShare:b,visiblePageIsZero:v},()=>{this.setState({isDataLoaded:!0})});const C=document.getElementById("workspace");C&&C.addEventListener("wheel",this.handleWheelChanged);const j=performance.now(),I=Math.ceil((j-t)/1e3),$=sdkStore.findAllTypeUnder("B@main","rResCanvas").length;typeof St.U1=="function"&&(0,St.U1)("load_success_project",{load_time:I,project_name:r.projectName,project_cid:o,project_type:"\u539F\u578B V8",success:1,preview_type:"\u53EA\u8BFB\u6A21\u5F0F",page_count:$}),I>30&&(0,bs.uT)("\u7F16\u8F91\u533A----\u9879\u76EE\u6253\u5F00\u8D85\u8FC730s")}).catch(s=>{console.error("[ExampleApp] requestData failed",s),typeof St.U1=="function"&&(0,St.U1)("load_success_project",{project_type:"\u539F\u578B V8",success:0,error_type:s,preview_type:"\u53EA\u8BFB\u6A21\u5F0F"})})}componentWillUnmount(){const t=document.getElementById("workspace");t&&t.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:t,isDataLoaded:o,isDesignCollapse:r,projectAlike:s,projectMeta:a,projectShare:p,visiblePageIsZero:b}=this.state,{renderDesign:v}=this;return b?(0,Ai.K)(p):(0,V.jsx)(Ut.XC.Provider,{value:this.keyboardManager,children:(0,V.jsx)($n.Z,{children:(0,V.jsxs)(Ri.X,{className:"example-app",children:[o&&(0,V.jsx)(Fi,{isCollapse:r,projectAlike:s,projectMeta:a,renderDesign:v,projectShare:p}),t&&(0,V.jsx)(Oi.S,{className:"mb-loading"})]})})})}}var vn=n(89719),xn=n(89500);const Ko=document.getElementById("workspace"),ks=async(e,t)=>{var o;let{projectAccessToken:r,password:s}=e,a,p,b,v,C;const{generateLang:j}=await xn.Ar.loadLLG();await j();try{const{projectEncryptedPassword:qe,isPasswordRequired:dt,projectName:wt,org:Rt,projectCid:Tt}=await Wn({projectAccessToken:r,password:s});a=qe,p=dt,b=wt,v=Rt,C=Tt}catch(qe){return qe.status="link_expired",Si(qe)}const I=Hn(t),{isSquare:$,isEmbedV2:ae,isHTMLZip:ge}=I;let Ee,ze;try{const dt=new URLSearchParams(location.search).get("view_mode");Ee={...await(0,Bi.vL)(r,dt),org:v,isPasswordRequired:p};const{project_basic:Rt}=Ee;ze=(await(0,vn.ec)({project:Rt,accessToken:r})).sharing}catch(qe){if(qe.status===403&&(qe==null?void 0:qe.error_type)==="P_PREVIEW_CLOSED"){const dt=I18N.dUtils.link_cannot_be_accessed,wt=I18N.dUtils.public_access_has_been_turned_off;return(0,un.IP)(qe,dt,wt)}else return(0,un.mB)(qe)}const{user:Xe,project_basic:nt,space:Ve}=Ee,it=Xn(Xe,Ve,nt);let ct=Yn(r);const ln=await dn(r,ct);if(p&&it&&ln.status===403&&(ct=await Jn(r),Zn(r,ct)),!ENV.IS_ON_PREMISES&&(0,St.wb)(),Xe&&(0,St.$b)(Xe.id),((o=ze)==null?void 0:o.view_mode)==="read_only"){const qe={isDesign:!0,isExperience:!1,isLoggedExperience:!1};f.render((0,V.jsx)(Go,{designOptions:qe,initialData:Ee,projectUpperCid:C,sharing:ze,password:ct,isHtmlZip:ge,isSquare:$,isEmbedV2:ae}),Ko)}else{var Qe;const qe=xi({isVersions:!1});I.isEmbedV1||(0,cn.v)(b),await Di({initialData:Ee,previewOptions:I,api:qe,projectAccessToken:r,projectEncryptedPassword:a,isPasswordRequired:p,$root:Ko,projectBasicCid:C,sharing:ze,password:ct}),(Qe=document.querySelector("#splash"))==null||Qe.setAttribute("style","display:none")}};var zi=n(44907),Pn=function(e){return e.NoLogin="\u672A\u767B\u5F55\u7528\u6237",e.LoginButNotOrgMember="\u975E\u56E2\u961F\u767B\u5F55\u7528\u6237",e.ProjectMember="\u534F\u4F5C\u6210\u5458",e.TeamMember="\u56E2\u961F\u6210\u5458",e}(Pn||{});let jt=function(e){return e.NotLogin="\u4EC5\u56E2\u961F\u6210\u5458-\u672A\u767B\u5F55",e.NotOrgMember="\u4EC5\u56E2\u961F\u6210\u5458-\u5DF2\u767B\u5F55\u4F46\u975E\u56E2\u961F\u6210\u5458",e.NeedPwd="\u5BC6\u7801\u67E5\u770B-\u9700\u8F93\u5165\u5BC6\u7801",e.NotPublicAccess="\u516C\u5F00\u8BBF\u95EE\u5173\u95ED",e.Delete="\u5DF2\u5220\u9664",e}({});const Wo=e=>{let{userId:t,orgPermissions:o,spacePermissions:r,projectPermissions:s}=e;if(!t)return Pn.NoLogin;const a=o?(0,zi.Yj)(t,o):!1,p=r?(0,zi.Yj)(t,r):!1,b=s?(0,zi.Yj)(t,s):!1;if(!a)return Pn.LoginButNotOrgMember;if(p||b)return Pn.ProjectMember;if(a)return Pn.TeamMember},It=e=>{let{access_success:t,no_access_reason:o,access_from:r,user_type:s}=e;(0,St.U1)("share_links_access_V8",{user_type:s,access_success:t,no_access_reason:o,access_from:r})},Ho=document.getElementById("workspace"),Cs=async(e,t)=>{var o,r,s,a;let{projectAccessToken:p,password:b}=e,v,C,j,I,$,ae,ge;try{const{projectEncryptedPassword:st,isPasswordRequired:vt,projectName:Sn,org:Vi,space:qn,projectCid:Yi,user_id:Ze}=await Wn({projectAccessToken:p,password:b});v=st,C=vt,j=Sn,I=Vi,$=qn,ae=Yi,ge=Ze}catch(st){return st.status="link_expired",It({access_success:!1,no_access_reason:jt.Delete,access_from:"PC\u6D4F\u89C8\u5668",user_type:""}),Si(st)}const Ee=Hn(t),{isSquare:ze,isEmbedV2:Xe,isHTMLZip:nt}=Ee;let Ve,it;const ct=Wo({userId:ge,orgPermissions:(o=I)==null?void 0:o.permissions,spacePermissions:(r=$)==null?void 0:r.permissions,projectPermissions:null}),Qe=new URLSearchParams(location.search).get("view_mode"),{generateLang:qe}=await xn.Ar.loadLLG();await qe(),(0,zo.PX)((0,Jt.F)());try{Ve={...await(0,Bi.vL)(p,Qe),org:I,isPasswordRequired:C};const{project_basic:vt}=Ve;it=(await(0,vn.ec)({project:vt,accessToken:p})).sharing}catch(st){if(st.status===403&&(st==null?void 0:st.error_type)==="P_PREVIEW_CLOSED"){const vt=I18N.dUtils.link_cannot_be_accessed,Sn=I18N.dUtils.public_access_has_been_turned_off;return It({access_success:!1,no_access_reason:jt.NotPublicAccess,access_from:"PC\u6D4F\u89C8\u5668",user_type:ct}),(0,un.IP)(st,vt,Sn)}else return It({access_success:!1,no_access_reason:ge?jt.NotOrgMember:jt.NotLogin,access_from:"PC\u6D4F\u89C8\u5668",user_type:ct}),(0,un.mB)(st)}const{user:dt,project_basic:wt,space:Rt}=Ve,Tt=Xn(dt,Rt,wt);let Lt=Yn(p);const hn=await dn(p,Lt);if(C&&Tt&&hn.status===403&&(It({access_success:!1,no_access_reason:jt.NeedPwd,access_from:"PC\u6D4F\u89C8\u5668",user_type:ct}),Lt=await Jn(p),Zn(p,Lt)),It({access_success:!0,no_access_reason:"",access_from:"PC\u6D4F\u89C8\u5668",user_type:ct}),Qe==="device"){const st=document.querySelector("#icon");if(!st)return;st.href="/mb-proto2/vis/modao/favicon_preview_screen.ico"}if(document.title=j||((s=I18N)==null||(s=s.__entry__)==null?void 0:s.site_title)||"\u58A8\u5200",!ENV.IS_ON_PREMISES&&(0,St.wb)(),(0,bt.WL)(),(Qe||((a=it)==null?void 0:a.view_mode))==="read_only"){const st={isDesign:!0,isExperience:!1,isLoggedExperience:!1};f.render((0,V.jsx)(Go,{designOptions:st,initialData:{...Ve,isPasswordRequired:C},projectUpperCid:ae,sharing:it,password:Lt,isHtmlZip:nt,isSquare:ze,isEmbedV2:Xe}),Ho)}else{const st=xi({isVersions:!1});Ee.isEmbedV1||(0,cn.v)(j),await Di({initialData:Ve,previewOptions:Ee,api:st,projectAccessToken:p,projectEncryptedPassword:v,isPasswordRequired:C,$root:Ho,projectBasicCid:ae,sharing:it,password:Lt});const vt=document.querySelector("#splash");vt&&(vt.style.display="none")}};var Qt=n(6206),Ms=n(77646),Qn=n(45090),vs=n(38411),xs=n(92718),Ps=n(90080),Ss=n(85912),Ts=n(67489),As=n(30258),Ds=n(57690),Bs=n(54861),Os=n(92593),js=n(75507),Ui=n(89543),Gi=n(77388);class Is extends yt.PureComponent{constructor(t){super(t),(0,Ye.Z)(this,"setElementRef",o=>this.$element=o),(0,Ye.Z)(this,"handleFullScreenChange",()=>{if(Ui.Z.isFullscreen)return;const{dispatch:o}=this.props;o(Gi.Jj.toggleFullScreenMode(!1)),o({type:"entry:update:mode:viewType"}),o(Gi.Jj.toggleHandMode(!1))}),t.dispatch({type:"entry:update:toolbar"}),t.dispatch({type:"entry:update:ui:by:preference"}),t.dispatch({type:"entry:update:ui:by:iconinfo"}),t.dispatch({type:"preference:update:state",payload:{ruler:!1}}),t.dispatch({type:"entry:hand-tool:toggle"}),MB.clientX=0,MB.clientY=0}componentDidMount(){window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.preventDefault),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contextmenu",this.preventDefault),this.$element.addEventListener("wheel",this.handleWheel,{passive:!1}),Ui.Z.on("change",this.handleFullScreenChange),new URLSearchParams(location.hash.replace(/^#/,"")).get("version")==="reset"&&(MB.notice({text:I18N.__App__.version_toast_reset_success}),window.history.replaceState(void 0,void 0,"#")),document.addEventListener("paste",function(t){t.target.className.includes("batch-set-content-area")||MB.f.editingRichText||MB.action("entry:prepare:paste",{e:t})})}componentWillUnmount(){window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.preventDefault),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contextmenu",this.preventDefault),Ui.Z.off("change",this.handleFullScreenChange),this.$element.removeEventListener("wheel",this.handleWheel,{passive:!1})}preventDefault(t){t.preventDefault()}handleWheel(t){(t.ctrlKey||t.metaKey)&&t.preventDefault()}handleMouseMove(t){let{clientX:o,clientY:r}=t;Object.assign(MB,{clientX:o,clientY:r})}render(){const{theme:t,isDeleteRulerLine:o,isEmbedV2Preview:r,fullScreenMode:s}=this.props,a=!(r||s);return(0,V.jsx)(Qn.f6,{theme:As.Z[t],children:(0,V.jsxs)(vs.N.Provider,{value:t,children:[(0,V.jsxs)(Ts.a,{ref:this.setElementRef,className:Li()({isDeleteRulerLine:o}),children:[(0,V.jsx)(Ut.WX,{sheet:js.jq}),(0,V.jsxs)("div",{className:"main-content",children:[(0,V.jsx)(Ss.Z,{}),a&&(0,V.jsx)(xs.B,{}),(0,V.jsx)("main",{className:"mb-viewport",children:(0,V.jsx)(Ps.Z,{})})]})]}),(0,V.jsx)(Rs,{})]})})}}const Rs=(0,yt.memo)(()=>(0,V.jsxs)(yt.Fragment,{children:[(0,V.jsx)(Ds.F,{}),(0,V.jsx)(Bs.y,{}),(0,V.jsx)(Os.I,{})]})),Ls=(0,Ms.P1)([Qt.ghV,Qt.DTi,Qt.T47,Qt.YmC,Qt.WY$,Qt.qvW,Qt.jCd,Qt.nLJ],(e,t,o,r,s,a,p,b)=>({onlyView:s===Gi.bW.OnlyView,isEmbedV2Preview:p,theme:e,designOptions:t,isShowSharingManager:o,isDeleteRulerLine:r,inspectMode:a,fullScreenMode:b})),Fs=(0,Vn.$j)(e=>Ls(e))(Is);class Ns extends yt.PureComponent{constructor(t){super(t);const{store:o,projectBasic:r,projectMeta:s}=t,{screenKey:a}=(0,Ii.Qw)();o.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:r,projectMeta:s,screenCid:a,isHtmlZip:!1}})}componentDidMount(){this.props.onComponentDidMount()}render(){const{store:t}=this.props;return(0,V.jsx)(Vn.zt,{store:t,children:(0,V.jsx)(Lo.Z,{children:(0,V.jsx)(Fs,{})})})}}const zs=e=>{let{prj2VersionCid:t,projectCid:o}=e;return(0,Zt.EE)("/api/flat/web_v1/proj2-version-info?prj2Cid="+o+"&prj2VersionCid="+t)},Us=async e=>{let{projectBasicCid:t,project_basic:o,project_meta:r,accessToken:s,password:a,projectVersion:p}=e;const b=o,v=r;{const{userId:C,flatKey:j}=await zs({prj2VersionCid:p,projectCid:t});console.log("[p2edit] uId="+C+" key="+j+" pbCid="+t),await(0,Gt.By)({userId:C,flpakKey:j,onTransferError:Gt.$p,onReadOnlyError:Gt.Yo,isAllowDat:!0,isAllowCmt:!1,isAllowCur:!1,token:b.access_token,passwd:a},b)}return{projectBasic:b,projectMeta:v}},Gs=e=>{let{designOptions:t,initialData:o,onBackButtonClick:r,onComponentDidMount:s,sharing:a,password:p,projectVersion:b}=e,v=!1;const C=(0,ji.t)(MB);return Uo({initialData:o,designOptions:t,global:{onBackButtonClick:r,designOptions:t},onUpdateSharing:()=>{MB.action("current:update:state",{sharingInReadOnly:a})}}),{requestData:async j=>{const{project_basic:I,project_meta:$}=o;Ro({store:C,isDesign:!0,isPreview:!1});const{projectBasic:ae,projectMeta:ge}=await Us({projectBasicCid:j,project_basic:I,project_meta:$,accessToken:I.access_token,password:p,projectVersion:b});return Object.assign(MB,{tag:ae==null?void 0:ae.version}),v=!0,{projectAlike:ae,projectMeta:ge,projectShare:a}},renderDesign:j=>{let{projectAlike:I,projectMeta:$}=j;return v?(0,V.jsx)(Ns,{store:C,projectBasic:I,projectMeta:$,onComponentDidMount:s}):null}}};class Ks extends yt.PureComponent{constructor(t){var o;super(t),o=this,(0,Ye.Z)(this,"handleWheelChanged",j=>{if(j.deltaX===0)return;const I=document.getElementById("workspace"),$=I.scrollLeft+I.offsetWidth===I.scrollWidth&&j.deltaX>0,ae=I.scrollLeft===0&&j.deltaX<0;($||ae)&&j.preventDefault()}),(0,Ye.Z)(this,"playDesignPageLeaveAnimation",function(j){return j===void 0&&(j=200),o.setState({isDesignCollapse:!0}),new Promise(I=>setTimeout(I,j))}),(0,Ye.Z)(this,"handleBackButtonClick",async()=>{var j;if((0,Xt._$)()){(0,Xt.gB)(Xt.Kk.enterPreview);return}const{initialData:{goback_url:I}}=this.props;await this.playDesignPageLeaveAnimation(),location.replace(I||"/dashboard/"+(((j=MB.currentOrg)==null?void 0:j.cid)||"me"))}),(0,Ye.Z)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Ni.T),this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,Ye.Z)(this,"keyboardManager",new Ut.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,projectAlike:null,projectMeta:null};const{designOptions:r,initialData:s,sharing:a,password:p,projectVersion:b}=t,{requestData:v,renderDesign:C}=Gs({initialData:s,designOptions:r,onBackButtonClick:this.handleBackButtonClick,onComponentDidMount:this.handleDesignDidMount,sharing:a,password:p,projectVersion:b});this.requestData=v,this.renderDesign=C,MB.isVersion=!0}componentDidMount(){const{projectUpperCid:t}=this.props;Promise.all([this.requestData(t)]).then(o=>{let[{projectAlike:r,projectMeta:s}]=o;this.setState({projectAlike:r,projectMeta:s},()=>{this.setState({isDataLoaded:!0})});const a=document.getElementById("workspace");a&&a.addEventListener("wheel",this.handleWheelChanged)}).catch(o=>{})}componentWillUnmount(){const t=document.getElementById("workspace");t&&t.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:t,isDataLoaded:o,isDesignCollapse:r,projectAlike:s,projectMeta:a}=this.state;return(0,V.jsx)(Ut.XC.Provider,{value:this.keyboardManager,children:(0,V.jsx)($n.Z,{children:(0,V.jsxs)(Ri.X,{className:"example-app",children:[o&&(0,V.jsx)(Fi,{isCollapse:r,projectAlike:s,projectMeta:a,renderDesign:this.renderDesign}),t&&(0,V.jsx)(Oi.S,{className:"mb-loading"})]})})})}}const Ws=async e=>{let{projectAccessToken:t,$root:o,projectVersion:r}=e;const s={isDesign:!0,isExperience:!1,isLoggedExperience:!1},{projectCid:a}=await Pi({projectAccessToken:t}),p=await(0,Bi.Ok)(t,!1),{generateLang:b}=await xn.Ar.loadLLG();await b();const{sharing:v}=(0,vn.$0)();(0,St.wb)(),(0,bt.WL)(),f.render((0,V.jsx)(Ks,{designOptions:s,initialData:{...p,isPasswordRequired:!1},projectUpperCid:a,screenCid:void 0,sharing:v,password:"",projectVersion:r,isHtmlZip:!1,isSquare:!1,isEmbedV2:!1}),o)};var Vo=n(21772);const Yo=async e=>{let{projectMetaCid:t}=e;await(0,Gt.By)({userId:void 0,flpakKey:t,onTransferError:Gt.$p,onReadOnlyError:Gt.Yo,isDummyCmt:!0},void 0)},{MB:qt}=window;qt.f.inSharing=!0;const Hs=e=>{let{previewOptions:t,preference:o,api:{requestProjectUpperFullDataByUpperTypeAndCid:r}}=e;const{runnerController:s,messageBucket:a,webpackInterface:p,PreviewApp:b}=(0,To.o)(Po(t));return Bo({api:{requestProjectUpperFullDataByUpperTypeAndCid:r}}),Object.assign(qt,{runnerController:s,messageBucket:a,webpackInterface:p,global:{popupHelper:Cn()}}),qt.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:t}}),{requestData:async v=>{qt.user={};const C=await r(v),{projectUpper:j,projectMetaList:I}=C,$=I[0];await Yo({projectMetaCid:$.cid});const ae=(0,Vo.K)(j),{sharing:ge}=(0,vn.$0)();return qt.webpackInterface.store.dispatch({type:"entry:state:init"}),qt.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:ge}}),qt.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:o||{}}}),(0,cn.Z)(),{projectAlike:ae,projectMeta:$}},renderPreview:(v,C)=>{let j=!1;return v.category==="combo_group"&&(j=!0),(0,V.jsx)(b,{store:qt.webpackInterface.store,previewMode:"preview",isCommunityComboPreview:j,projectAlike:v,projectMeta:C})}}},Vs=e=>({requestProjectUpperFullDataByUpperTypeAndCid:o=>{switch(e){case g.marketTemplate:return Kr({projectUpperCid:o,isFromIframe:!0});case g.marketTemplateProto2:return Wr({projectUpperCid:o,isFromIframe:!0});case g.reviewableProject:return Hr({projectUpperCid:o});case g.reviewableProjectProto2:return Vr({projectUpperCid:o});case g.product:return Yr({projectUpperCid:o});default:throw new Error("\u4E0D\u5408\u6CD5 projectUpperType: "+e)}}});var Ys=n(7627),pt=n.n(Ys);const Zs=e=>{let{api:{requestProjectUpperFullDataByUpperTypeAndCid:t},designOptions:o,initialData:r,onComponentDidMount:s}=e;const{user:a,serverCountry:p,canEditByCurrentUser:b}=r;Object.assign(MB,{user:a||{},serverCountry:p,canEditByCurrentUser:b}),MB.global={popupHelper:Cn(),designOptions:o,experienceLoginModalHelper:No.m};const v=(0,ji.t)(MB);let C=!1;return{requestData:async j=>{MB.action("current:update:state",{sharingInReadOnly:{view_sticky:!0}}),Ro({store:v,isDesign:!0,isPreview:!1});const I=await t(j),{projectUpper:$,projectMetaList:ae}=I,ge=(0,Vo.K)($),Ee=ae[0];return await Yo({projectMetaCid:Ee.cid}),(0,Xt.ld)(ge),MB.action("update:design:options",{designOptions:o}),C=!0,{projectMeta:Ee,projectAlike:ge}},renderDesign:j=>{let{projectAlike:I,projectMeta:$}=j;return C?(0,V.jsx)(Fo,{store:v,projectBasic:I,projectMeta:$,onComponentDidMount:s,isHtmlZip:!1}):null}}};class Zo extends yt.PureComponent{constructor(t){super(t),(0,Ye.Z)(this,"handleWheelChanged",b=>{if(b.deltaX===0)return;const v=document.getElementById("workspace"),C=v.scrollLeft+v.offsetWidth===v.scrollWidth&&b.deltaX>0,j=v.scrollLeft===0&&b.deltaX<0;(C||j)&&b.preventDefault()}),(0,Ye.Z)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Ni.T),this.setState({isLoading:!1,isDesignCollapse:!1})}),(0,Ye.Z)(this,"keyboardManager",new Ut.Sm),this.state={isLoading:!0,isDataLoaded:!1,isDesignCollapse:!0,isPreview:!1,projectAlike:null,projectMeta:null};const{api:o,designOptions:r,initialData:s}=t,{requestData:a,renderDesign:p}=Zs({api:o,initialData:s,designOptions:r,onComponentDidMount:this.handleDesignDidMount});this.requestData=a,this.renderDesign=p}async componentDidMount(){const{projectUpperCid:t}=this.props;Promise.all([this.requestData(t)]).then(o=>{let[{projectMeta:r,projectAlike:s}]=o;this.setState({projectMeta:r,projectAlike:s},()=>{this.setState({isDataLoaded:!0})});const a=document.getElementById("workspace");a&&a.addEventListener("wheel",this.handleWheelChanged)}).catch(o=>{console.error("[ExampleApp] requestData failed",o)})}componentWillUnmount(){const t=document.getElementById("workspace");t&&t.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:t,isDataLoaded:o,isDesignCollapse:r,projectAlike:s,projectMeta:a}=this.state;return(0,V.jsx)(Ut.XC.Provider,{value:this.keyboardManager,children:(0,V.jsx)($n.Z,{children:(0,V.jsxs)(Ri.X,{className:"example-app community",children:[o&&(0,V.jsx)(yt.Fragment,{children:(0,V.jsx)(Fi,{isCollapse:r,projectAlike:s,projectMeta:a,renderDesign:this.renderDesign})}),t&&(0,V.jsx)(Oi.S,{className:"mb-loading"})]})})})}}(0,Ye.Z)(Zo,"propTypes",{api:pt().object,initialData:pt().object,designOptions:pt().object,projectUpperCid:pt().string});const Jo=async(e,t,o)=>{const r=Hn({isDesktop:!0,isInApp:!1,isMobile:(0,Je.tq)(),isIOSClient:!1,isStandAlone:!1,isEmbedV1:!1,isHTMLZip:!1,isUIChina:!1,isForum:!1,isElectron:(0,Je.d)(),isSquare:!0,isEmbedV2:!1}),s={isDesign:!0,isExperience:!1,isLoggedExperience:!1},a=Vs(t),{generateLang:p}=await xn.Ar.loadLLG();await p();const b={theme:"light"};if((0,St.wb)(),new URLSearchParams(location.search).get("view_mode")==="read_only")f.render((0,V.jsx)(Zo,{api:a,designOptions:s,initialData:{user:{},serverCountry:"CN",canEditByCurrentUser:!1,goback_url:""},projectUpperCid:e}),o);else{(0,cn.v)();const{requestData:C,renderPreview:j}=Hs({api:a,previewOptions:r,preference:b}),{projectAlike:I,projectMeta:$}=await C(e);f.render(j(I,$),o)}};var Js=n(18531);const Ki="#fff",Xs=Qn.ZP.div.withConfig({displayName:"style__StyledCovers",componentId:"sc-qhjyws-0"})([".cover{position:fixed;top:0;left:0;width:100%;height:100%;z-index:101;background:rgba(9,15,34,0.7);.robot,.tips,.arrow{position:absolute;}.arrow{border-style:dashed;border-color:",';border-width:0;&::after{content:"";position:absolute;width:8px;height:8px;border-right:2px solid ',";border-bottom:2px solid ",';}}&.wechat{.robot{width:27vw;top:20vw;right:17vw;}.tips{width:42vw;top:12vw;right:42vw;}.arrow{width:11vw;height:21vw;top:6vw;right:6vw;border-right-width:2px;border-bottom-width:2px;&::after{margin-left:-3px;transform:rotate(-135deg);top:0;left:100%;}}}&.ios{.robot{width:27vw;left:14vw;bottom:15vw;}.tips{width:54vw;left:29vw;bottom:65vw;}.arrow{width:11vw;height:53vw;left:41vw;bottom:2vw;border-top-width:2px;border-right-width:2px;&::after{transform:rotate(45deg);margin-top:-3px;margin-left:-3px;left:100%;top:100%;}}}&.building{.tip-wrapper{text-align:center;}.tip{width:100%;margin-top:60%;margin-bottom:50px;font-size:22px;color:#fff;}.spinner{border-color:#fff transparent;}}@media (min-width:768px){.cover{&.wechat{.robot{width:21vw;top:18vw;right:10.5vw;}.tips{width:41vw;top:2vw;right:33.5vw;}.arrow{width:8vw;height:22vw;top:2vw;right:2.5vw;}}&.ios{.robot{width:21vw;left:12vw;bottom:14vw;}.tips{width:51vw;left:30vw;bottom:53vw;}.arrow{width:8vw;height:44vw;left:34vw;bottom:1vw;}}&.ipad{.robot{width:21vw;left:13vw;top:26vw;}.tips{width:51vw;left:27vw;top:5vw;}.arrow{width:48vw;height:30vw;left:34vw;top:2vw;border-right-width:2px;border-bottom-width:2px;&::after{content:"";position:absolute;right:-5px;top:-2px;transform:rotate(-135deg);}}}}}}'],Ki,Ki,Ki);class Xo extends yt.PureComponent{constructor(t){super(t),(0,Ye.Z)(this,"handleClick",()=>{this.props.onClose()}),this.WECHAT_SRC="/mb-workspace/images/sharing/wechat_"+(0,Jt.F)()+".png",this.IOS_SRC="/mb-workspace/images/sharing/ios_"+(0,Jt.F)()+".png"}render(){const{show:t}=this.props,o=(0,Je.CL)(),r=!o&&(0,Je.gn)(),s=(0,Je._1)(),a=!(o||r),p={display:t?"":"none"};return(0,V.jsxs)(Xs,{className:"covers",style:p,onClick:this.handleClick,children:[o&&(0,V.jsxs)("div",{className:"cover wechat",children:[(0,V.jsx)("img",{className:"robot",src:"/mb-workspace/images/sharing/robot.png"}),(0,V.jsx)("img",{className:"tips",src:this.WECHAT_SRC}),(0,V.jsx)("div",{className:"arrow"})]}),r&&!s&&(0,V.jsxs)("div",{className:"cover ios",children:[(0,V.jsx)("img",{className:"robot",src:"/mb-workspace/images/sharing/robot.png"}),(0,V.jsx)("img",{className:"tips",src:this.IOS_SRC}),(0,V.jsx)("div",{className:"arrow"})]}),s&&(0,V.jsxs)("div",{className:"cover ipad",children:[(0,V.jsx)("img",{className:"robot",src:"/mb-workspace/images/sharing/robot.png"}),(0,V.jsx)("img",{className:"tips",src:this.IOS_SRC}),(0,V.jsx)("div",{className:"arrow"})]}),a&&(0,V.jsx)("div",{className:"cover building",children:(0,V.jsxs)("div",{className:"tip-wrapper",children:[(0,V.jsx)("p",{className:"tip",children:I18N.dPages.building_apk}),(0,V.jsx)("div",{className:"spinner"})]})})]})}}(0,Ye.Z)(Xo,"propTypes",{show:pt().bool,onClose:pt().func});var $s=n(24397),Qs=n(67246),qs=n(86127),Wi=n.n(qs),ec=n(6926),$o=n.n(ec);const tc=()=>{const e=(0,Jt.F)();return((0,Jt.F)()==="zh-CN"||e==="zh-Hans-CN")&&$o()(Wi().settings.strings,{prefixAgo:null,prefixFromNow:"\u4ECE\u73B0\u5728\u5F00\u59CB",suffixAgo:"\u4E4B\u524D",suffixFromNow:null,seconds:"\u4E0D\u5230 1 \u5206\u949F",minute:"\u5927\u7EA6 1 \u5206\u949F",minutes:"%d \u5206\u949F",hour:"\u5927\u7EA6 1 \u5C0F\u65F6",hours:"\u5927\u7EA6 %d \u5C0F\u65F6",day:"1 \u5929",days:"%d \u5929",month:"\u5927\u7EA6 1 \u4E2A\u6708",months:"%d \u6708",year:"\u5927\u7EA6 1 \u5E74",years:"%d \u5E74",numbers:[],wordSeparator:""}),e==="ja"&&$o()(Wi().settings.strings,{prefixAgo:null,prefixFromNow:"\u4ECA\u304B\u3089",suffixAgo:"\u524D",suffixFromNow:null,seconds:"1\u5206\u672A\u6E80",minute:"\u7D041\u5206",minutes:"%d \u5206",hour:"\u7D041\u6642\u9593",hours:"\u7D04\uFF05d\u6642\u9593",day:"1\u65E5",days:"%d\u65E5",month:"\u7D041\u30F6\u6708",months:"%d\u30F6\u6708",year:"\u7D041\u5E74",years:"%d\u5E74",numbers:[],wordSeparator:""}),{MBLocale:e,parseTimeAgo:t=>Wi()(t)}},Hi="#1684fc",nc=Qn.ZP.div.withConfig({displayName:"style__StyledInstallPageWrapper",componentId:"sc-cptogv-0"})(["height:100%;"]),ic=Qn.ZP.div.withConfig({displayName:"style__StyledInstallPage",componentId:"sc-cptogv-1"})(['width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:white;background-image:url("/mb-workspace/images/preview/preview_init.png");background-size:100% auto;background-repeat:no-repeat;position:relative;overflow:auto;&.is-wechat{.app-inner{padding-top:27vw;}}.app-inner{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;padding-top:24vw;padding-bottom:28px;}.app-icon{width:100px;height:100px;margin-top:30px;border-radius:20px;box-shadow:0 8px 22px rgba(23,130,248,0.23);}.app-name{margin-top:17px;margin-bottom:5px;font-size:20px;line-height:24px;font-weight:500;max-width:80%;color:#1684fc;white-space:pre-wrap;text-overflow:ellipsis;text-align:center;}.app-update-time,.download-btn{font-size:12px;}.app-update-time{margin-top:4px;color:#5b6b73;}.install-btns{margin-top:auto;width:100%;display:flex;flex-direction:column;align-items:center;}.install-btn{display:flex;justify-content:center;align-items:center;width:300px;max-width:80%;height:45px;border-radius:4px;font-size:15px;text-decoration:none;margin-bottom:16px;color:',";background-color:#fff;border:1px solid ",";&.primary{color:#fff;background-color:",";border:1px solid transparent;margin-bottom:20px;}}.download-btn{margin-top:40px;color:#4a90e2;text-decoration:none;.fa{font-size:21px;vertical-align:middle;margin-top:-4px;margin-left:2px;}}.doubleFingerTips{color:#415058;font-size:12px;line-height:16px;display:block;padding:6px 12px;background:#f7f7f7;border-radius:4px;}.logo{width:62px;height:32px;position:absolute;top:20px;left:24px;}@media (min-width:768px){.app-inner{padding-top:35vw;}.app-icon{width:160px;height:160px;margin-top:10px;border-radius:32px;box-shadow:none;filter:drop-shadow(0 13px 35px rgba(23,130,248,0.23));}.app-name{font-size:30px;line-height:42px;}.app-update-time,.download-btn{font-size:20px;}.install-btns{flex-direction:row-reverse;justify-content:center;margin-top:180px;}.install-btn{height:80px;margin:0 16px;font-size:24px;width:320px;}.install-btn.primary{margin-bottom:0;}.doubleFingerTips{font-size:20px;padding:12px 16px;margin-top:20px;}.download-btn{.fa{font-size:31px;margin-top:-6px;}}}@media screen and (orientation:landscape){.install-page{height:auto;background-position-y:-190px;.install-btns{margin-top:49px;}.download-btn{margin-top:13px;display:none;}.app-inner{padding-top:11vw;}}.install-page-wrapper{overflow:auto;}}"],Hi,Hi,Hi);var oc=n(68e3),rc=n(75886);const sc=async(e,t)=>{(0,Qs.R_)(e,t)};class Qo extends yt.PureComponent{constructor(){super(),(0,Ye.Z)(this,"handleView",t=>{t.preventDefault(),this.props.loadProject()}),(0,Ye.Z)(this,"handleInstall",async t=>{t.preventDefault();const{isProjectExportable:o,projectName:r,cid:s}=this.props;if(!o){(0,Js.ho)("apk_exportable_on_mobile",{action:null});return}if(this.setState({isCoverShow:!0}),(0,Je.CL)())this.setState({isCoverShow:!0});else if((0,Je._1)()||(0,Je.gn)())this.setState({isCoverShow:!0});else{const{flcchTimeB36:a}=await(0,oc.t)({flpakKey:s}),p=location.origin+"/flatkiq/apk/download?fKey="+s+"&fTim="+a,b=""+r+rc.IF.apk.postfix;try{await sc(b,p),this.setState({isCoverShow:!1})}catch(v){this.setState({isCoverShow:!1}),console.log(v)}}}),(0,Ye.Z)(this,"handleOpenCover",()=>{this.setState({isCoverShow:!0})}),(0,Ye.Z)(this,"handleCloseCover",()=>{this.setState({isCoverShow:!1})}),(0,Ye.Z)(this,"handleClickViewInClient",(t,o)=>{setTimeout(()=>{window.location=t},200)}),(0,Ye.Z)(this,"renderViewInClient",()=>{let t={};if((0,Je.CL)())t={onClick:this.handleOpenCover};else{const{hostname:o,pathname:r,hash:s,search:a}=window.location,{projectEncryptedPassword:p,urlClientAndroid:b}=this.props;console.log("modao://"+o+r+(a?a+"&":"?")+"password="+p+"&hash="+s),(0,Je.gn)()&&(t={href:"modao://"+o+r+(a?a+"&":"?")+"password="+p}),(0,Je.Dt)()&&(t={href:"intent://"+o+r+(a?a+"&":"?")+"password="+p+"#Intent;package=com.mockingbot;scheme=mockingbot;S.browser_fallback_url="+encodeURIComponent(b)+";end",onClick:()=>{this.handleClickViewInClient(b,"Android")}})}return(0,V.jsx)("a",{className:"install-btn primary",...t,children:I18N.dPages.open_in_client})}),this.state={isCoverShow:!1}}componentDidMount(){var t;(t=document.querySelector("#workspace"))==null||t.setAttribute("style","display: block")}render(){const{projectName:t,projectIconUrl:o,projectUpdatedAt:r}=this.props,{isCoverShow:s}=this.state;return(0,V.jsx)(nc,{className:"install-page-wrapper",children:(0,V.jsxs)(ic,{className:Li()("install-page",{"is-wechat":(0,Je.CL)()}),children:[(0,V.jsx)($s.q,{name:"common/modao-logo",className:"logo"}),(0,V.jsxs)("div",{className:"app-inner",children:[(0,V.jsx)("img",{className:"app-icon",src:o}),(0,V.jsx)("h1",{className:"app-name",children:t}),(0,V.jsxs)("div",{className:"app-update-time",children:[(0,V.jsx)("span",{className:"timeago",children:tc().parseTimeAgo(r)}),I18N.dPages.update]}),(0,V.jsxs)("div",{className:"install-btns",children:[this.renderViewInClient(),(0,V.jsx)("a",{className:"install-btn",onClick:this.handleView,children:I18N.dPages.view_app})]}),(0,V.jsx)("span",{className:"doubleFingerTips",children:"\u67E5\u770B\u65F6\u53CC\u6307\u70B9\u51FB\u53EF\u6253\u5F00\u300C\u9875\u9762\u5217\u8868\u300D"}),(0,V.jsxs)("a",{className:"download-btn",onClick:this.handleInstall,children:[(0,V.jsx)("span",{children:(0,Je.Dt)()?I18N.dPages.download_android_apk:I18N.dPages.add_to_home_screen}),(0,V.jsx)("i",{className:"fa fa-angle-right"})]})]}),(0,V.jsx)(Xo,{show:s,onClose:this.handleCloseCover})]})})}}(0,Ye.Z)(Qo,"propTypes",{projectAccessToken:pt().string,projectEncryptedPassword:pt().string,projectName:pt().string,projectIconUrl:pt().string,projectUpdatedAt:pt().string,isPasswordRequired:pt().bool,isProjectExportable:pt().bool,urlClientIOS:pt().string,urlClientAndroid:pt().string,loadProject:pt().func,cid:pt().string});const cc=e=>{let{projectAccessToken:t,projectEncryptedPassword:o,projectMeta:r,isPasswordRequired:s}=e;return new Promise(a=>{f.render((0,V.jsx)(Qo,{projectAccessToken:t,projectEncryptedPassword:o,isPasswordRequired:s,loadProject:a,...r}),document.getElementById("workspace"))})},lc=e=>{const{isHTMLZip:t,isInApp:o,isMobile:r,isStandAlone:s,isEmbedV1:a,isEmbedV2:p,isFeishu:b}=e;return r&&!o&&!s&&!t&&!a&&!p&&!b&&!(0,Je.li)()};var ac=n(20465);const pc=document.getElementById("workspace"),mc=async(e,t)=>{var o,r,s,a,p,b,v;let{projectAccessToken:C,password:j}=e;const I=xi({isVersions:!1});let $,ae,ge,Ee,ze,Xe,nt,Ve;const it=$?"\u79FB\u52A8\u7AEF":"H5",ct=(0,ac.R)();Object.assign(MB,{messageBucket:ct});try{({isInApp:$,projectEncryptedPassword:ae,isPasswordRequired:ge,projectMeta:Ee,projectName:ze,org:Xe,space:nt,user_id:Ve}=await Wn({projectAccessToken:C,password:j}))}catch(Ze){return It({access_success:!1,no_access_reason:jt.Delete,access_from:it,user_type:""}),Ze.status="link_expired",Si(Ze)}const ln=Hn({...t,isInApp:t.isInApp||$,isMultiLink:t.isMultiLink});let Qe,qe;const dt=Wo({userId:Ve,orgPermissions:(o=Xe)==null?void 0:o.permissions,spacePermissions:(r=nt)==null?void 0:r.permissions,projectPermissions:null});try{Qe={...await I.requestPreviewInitialData4ReadOnlyV2({projectAccessToken:C,view_mode:"device"}),isPasswordRequired:ge};const{project_basic:xt,project_meta:Tn}=Qe;Ee&&Tn&&(Ee=Object.assign({},Ee,Tn)),qe=(await(0,vn.ec)({project:xt,accessToken:C})).sharing,qe.highlight=!0,ct.send("ready")}catch(Ze){var wt;let xt=null,Tn=null;Ze.status===403&&(Ze==null?void 0:Ze.error_type)==="P_PREVIEW_CLOSED"?(xt="\u94FE\u63A5\u65E0\u6CD5\u8BBF\u95EE",Tn="\u516C\u5F00\u8BBF\u95EE\u5DF2\u5173\u95ED\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u4FEE\u6539\u8BBF\u95EE\u6743\u9650",ct.send("mobileLoadProjectError",{errMsg:"\u516C\u5F00\u8BBF\u95EE\u5DF2\u5173\u95ED\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u4FEE\u6539\u8BBF\u95EE\u6743\u9650"}),It({access_success:!1,no_access_reason:jt.NotPublicAccess,access_from:it,user_type:dt})):(ct.send("mobileLoadProjectError",{errMsg:"\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6CA1\u6709\u8BBF\u95EE\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u5F00\u901A\u6743\u9650\u3002"}),It({access_success:!1,no_access_reason:Ve?jt.NotOrgMember:jt.NotLogin,access_from:it,user_type:dt})),f.render((0,V.jsx)(So.Z,{errorType:(Ze==null?void 0:Ze.status)||401,locale:(0,Jt.F)(),identity:1,account:((wt=Qe)==null||(wt=wt.user)==null?void 0:wt.email)||"",customTitle:xt,customDes:Tn}),pc);return}const{project_basic:{cid:Rt,name:Tt}}=Qe;document.title=Tt||"\u58A8\u5200";const{user:Lt,project_basic:hn,space:er}=Qe,st=Xn(Lt,er,hn);let vt=Yn(C);const Sn=await dn(C,vt);ge&&st&&Sn.status===403&&(It({access_success:!1,no_access_reason:jt.NeedPwd,access_from:it,user_type:dt}),ct.send("ready"),vt=await Jn(C),Zn(C,vt)),It({access_success:!0,no_access_reason:"",access_from:it,user_type:dt});const{generateLang:Vi}=await xn.Ar.loadLLG();await Vi(),!ENV.IS_ON_PREMISES&&(0,St.wb)(),(0,bt.WL)();const qn=lc(ln);qn&&(0,cn.v)(ze);const Yi=document.querySelector("head");(s=Qe)!=null&&s.shareData||(Qe.shareData=[]),(a=Qe)==null||a.shareData.push({key:"meta",name:"apple-mobile-web-app-status-bar-style",content:"black"}),(p=Qe)==null||p.shareData.push({key:"meta",name:"theme-color",content:"#fff"}),(b=Qe)==null||b.shareData.forEach(Ze=>{const xt=document.createElement(Ze.key);Ze.href&&(xt.href=Ze.href),Ze.rel&&(xt.rel=Ze.rel),Ze.media&&(xt.media=Ze.media),Ze.sizes&&(xt.sizes=Ze.sizes),Ze.name&&(xt.name=Ze.name),Ze.content&&(xt.content=Ze.content),Yi.appendChild(xt)}),qn&&((0,cn.Z)(),await cc({projectAccessToken:C,projectEncryptedPassword:ae,isPasswordRequired:ge,projectMeta:Ee})),await Di({initialData:Qe,sharing:qe,previewOptions:ln,api:I,projectAccessToken:C,projectEncryptedPassword:ae,isPasswordRequired:ge,projectBasicCid:Rt,$root:document.getElementById("workspace")}),(v=document.querySelector("#splash"))==null||v.setAttribute("style","display:none")};document.addEventListener("DOMContentLoaded",async()=>{const e=location.pathname,t=new URLSearchParams(location.search),o=t.get("view_mode"),r={isMobile:(0,Je.tq)(),isEmbedV2:e.includes("/embed/v2"),isEmbedV1:e.includes("/embed")&&!e.includes("/embed/v2"),isVersions:new URLSearchParams(location.search).has("version")};if(e.startsWith($t.pX+"/"))if(r.isMobile){let s=location.href,a=!1;if(location.href.split("%20").length>1&&(s=location.href.split("%20")[0],a=!0),location.href.split("%C2%A0").length>1&&(s=location.href.split("%C2%A0")[0],a=!0),(!o||o!=="device")&&(a=!0),a){const p=new URL(s);p.searchParams.set("view_mode","device"),(0,bt.ll)(p.href)}document.body.classList.add("mobile"),await hc(r)}else r.isEmbedV2?(location.href.split("%20").length>1?(0,bt.ll)(""+location.href.split("%20")[0]):location.href.split("%C2%A0").length>1?(0,bt.ll)(location.href.split("%C2%A0")[0]):o||(t.set("view_mode","read_only"),(0,bt.ll)(location.pathname+"?"+t.toString())),document.body.classList.add("new-embedded"),await qo(r)):r.isEmbedV1?(e.includes("/v2")||(location.href.split("#").length>1?(0,bt.ll)(location.href.split("#")[0]+"/v2/sharing?"+location.href.split("#")[1]+"&view_mode=read_only"):(0,bt.ll)(location.href.split("#")[0]+"/v2/sharing?view_mode=read_only")),await qo(r)):r.isVersions?(document.title="\u7248\u672C\u9884\u89C8",await fc(r)):(location.href.split("%20").length>1?(0,bt.ll)(location.href.split("%20")[0]):location.href.split("%C2%A0").length>1?(0,bt.ll)(location.href.split("%C2%A0")[0]):o||(t.set("view_mode","read_only"),(0,bt.ll)(location.pathname+"?"+t.toString())),await dc());else location.pathname.startsWith($t.kC+"/")?await _c():location.pathname.startsWith("/competition_product/")&&await uc()});const qo=async e=>{const t=(0,$t.ky)(location),o=new URLSearchParams(location.search).get("password");await ks({projectAccessToken:t,password:o},e)},_c=async()=>{let e=location.pathname;e.includes("/sharing")&&(e=location.pathname.replace("/sharing",""));const t=(0,$t.$E)(e),o=t.startsWith("mt")?g.marketTemplateProto2:g.reviewableProjectProto2;await Jo(t,o,document.getElementById("workspace"))},uc=async()=>{const e=/^\/competition_product\/(?:([^/]+?))$/i.exec(location.pathname)[1],t=g.product;document.title="\u8BBE\u8BA1\u5927\u8D5B-\u4F5C\u54C1",await Jo(e,t,document.getElementById("workspace"))},dc=async()=>{const e=(0,$t.ky)(location),t=new URLSearchParams(location.search).get("password");await Cs({projectAccessToken:e,password:t})},hc=async e=>{const t=(0,$t.ky)(location),o=new URLSearchParams(location.search),r=o.get("password"),s=o.has("inapp"),a=o.has("multilink");await mc({projectAccessToken:t,password:r},{...e,isInApp:s,isMultiLink:a})},fc=async e=>{const t=(0,$t.ky)(location),o=new URLSearchParams(location.search);await Ws({projectAccessToken:t,projectEncryptedPassword:"",projectVersion:o.get("version"),isPasswordRequired:!0,$root:document.getElementById("workspace"),partialOptions:e})}},86127:x=>{/*
 * node-timeago / https://mdgit.300624.cn/mockingbot/node-timeago/-/blob/master/timeago.js
 * Cam Pedersen
 * <diffference@gmail.com>
 * Oct 6, 2011
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.10.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2011, Ryan McGeary (ryanonjavascript -[at]- mcgeary [*dot*] org)
 */x.exports=function(_){if(_ instanceof Date)return f(_);if(typeof _=="string")return f(g(_));if(typeof _=="number")return f(new Date(_))};var B={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},n=B.strings;x.exports.settings=B,n.inWords=function(_){var i=n.prefixAgo,k=n.suffixAgo;B.allowFuture&&_<0&&(i=n.prefixFromNow,k=n.suffixFromNow);var M=Math.abs(_)/1e3,l=M/60,y=l/60,m=y/24,c=m/365;function u(W,R){var Y=typeof W=="function"?W(R,_):W,J=n.numbers&&n.numbers[R]||R;return Y.replace(/%d/i,J)}var h=M<45&&u(n.seconds,Math.round(M))||M<90&&u(n.minute,1)||l<45&&u(n.minutes,Math.round(l))||l<90&&u(n.hour,1)||y<24&&u(n.hours,Math.round(y))||y<48&&u(n.day,1)||m<30&&u(n.days,Math.floor(m))||m<60&&u(n.month,1)||m<365&&u(n.months,Math.floor(m/30))||c<2&&u(n.year,1)||u(n.years,Math.floor(c)),w=n.wordSeparator||"";return n.wordSeparator===void 0&&(w=" "),[i,h,k].join(w).toString().trim()};function g(_){if(_){var i=_.trim();return i=i.replace(/\.\d\d\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)}}n.parse=g;function f(_){return n.inWords(E(_))}function E(_){return new Date().getTime()-_.getTime()}},30388:(x,B,n)=>{"use strict";n.d(B,{H:()=>k,n8:()=>_});const{Blob:g,FileReader:f}=window,E=M=>l=>new Promise((y,m)=>{const c=new f;c.addEventListener("error",m),c.addEventListener("load",()=>y(c.result)),c[M](l)}),_=E("readAsText"),i=E("readAsDataURL"),k=E("readAsArrayBuffer")},27444:(x,B,n)=>{"use strict";n.d(B,{Up:()=>W,Uv:()=>c,Zv:()=>E,eO:()=>J,z6:()=>f});const g=(P,z,N)=>{if(P[z]===N)return P;const Z=[...P];return Z[z]=N,Z},f=(P,z)=>z>=0&&z<=P.length-1?[...P.slice(0,z),...P.slice(z+1)]:P,E=(P,z,N)=>[...P.slice(0,z),N,...P.slice(z)],_=(P,z,N)=>N===z?P:N<z?[...P.slice(0,N),...P.slice(N+1,z+1),P[N],...P.slice(z+1)]:[...P.slice(0,z),P[N],...P.slice(z,N),...P.slice(N+1)],i=(P,z)=>[...P,z],k=(P,z)=>[z,...P],M=P=>{if(P.length===0)return P;const z=[...P];return z.pop(),z},l=P=>{if(P.length===0)return P;const z=[...P];return z.shift(),z},y=(P,z)=>z&&z.length?[...P,...z]:P,m=(P,z)=>P.includes(z)?P:[...P,z],c=(P,z)=>{const N=P.indexOf(z);return~N?[...P.slice(0,N),...P.slice(N+1)]:P},u=(P,z,N)=>{const Z=P.indexOf(N);return~Z?_(P,z,Z):P},h=(P,z)=>{const N=P.findIndex(z);return~N?[...P.slice(0,N),...P.slice(N+1)]:P},w=(P,z,N)=>{const Z=P.findIndex(z);return~Z?_(P,N,Z):P},W=(P,z,N)=>{const Z=P.findIndex(z);if(!~Z||P[Z]===N)return P;const te=[...P];return te[Z]=N,te},R=(P,z,N)=>{const Z=P.findIndex(z);if(!~Z)return[...P,N];if(P[Z]===N)return P;const te=[...P];return te[Z]=N,te},Y=(P,z,N)=>P.find(z)===void 0?[...P,N]:P,J=(P,z)=>{const N=[];for(let Z=0,te=P.length;Z<te;Z+=z)N.push(P.slice(Z,Z+z));return N}},92029:(x,B,n)=>{"use strict";n.d(B,{AY:()=>Y,Bk:()=>R,M0:()=>oe,Z_:()=>i,_L:()=>y});var g=n(53705),f=n(11972);const E=(se,me,Te)=>{throw new Error("[verify|"+se+"]"+(me?" "+me+";":"")+" "+(Te||""))},_=(se,me)=>(Te,mt)=>{me(Te)||E(se,mt,"get: "+(0,f.yY)(Te))},i=_("String",g.HD),k=_("Boolean",g.jn),M=_("Truthy",g.fQ),l=_("Number",g.hj),y=_("Integer",g.U),m=_("RegExp",g.Kj),c=_("ArrayBuffer",g.eP),u=_("ObjectAlike",g.$N),h=_("BasicObject",g.i3),w=(se,me,Te)=>{isObjectKey(se,me)||E("ObjectKey",Te,"expect to have key: "+me)},W=(se,me,Te)=>{isObjectContain(se,me)||E("ObjectContain",Te,"expect to contain: "+describe(me))},R=_("Array",g.PH),Y=(se,me,Te)=>{(0,g._e)(se,me)||E("ArrayLength",Te,"expect length: "+me+", get: "+((0,g.PH)(se)?se.length:(0,f.yY)(se)))},J=_("Function",g.BV),P=_("PromiseAlike",g.om),z=(se,me,Te)=>{isOneOf(se,me)||E("OneOf",Te,"expect one of: ["+me+"], get: "+describe(se))},N=(se,me)=>{isFunctionThrow(se)||E("DoThrow",me)},Z=(se,me)=>{isFunctionThrow(se)&&E("DoNotThrow",me)},te=async(se,me)=>{await isFunctionThrowAsync(se)||E("DoThrowAsync",me)},G=async(se,me)=>{await isFunctionThrowAsync(se)&&E("DoNotThrowAsync",me)},re=(se,me)=>"\nactual: "+(0,f.yY)(se)+"\nexpect: "+(0,f.yY)(me),de=(se,me,Te)=>{isStrictEqual(se,me)||E("StrictEqual",Te,re(se,me))},ne=(se,me,Te)=>{isStrictEqual(se,me)&&E("NotStrictEqual",Te,re(se,me))},oe=function(se,me,Te){Te===void 0&&(Te="should stringify equal"),(0,g.LP)(se,me)||E("StringifyEqual",Te,re(se,me))},Oe=function(se,me,Te){Te===void 0&&(Te="should not stringify equal"),isStringifyEqual(se,me)&&E("NotStringifyEqual",Te,re(se,me))},De=(se,me,Te)=>{se&&se.includes&&se.includes(me)||E("Includes",Te,"expect "+describe(se)+" to include "+me)},ot=(se,me,Te)=>{se&&se.includes&&!se.includes(me)||E("NotIncludes",Te,"expect "+describe(se)+" to not include "+me)}},92850:(x,B,n)=>{var g=n(30536),f=n(88625);function E(_,i,k){(k!==void 0&&!f(_[i],k)||k===void 0&&!(i in _))&&g(_,i,k)}x.exports=E},94541:(x,B,n)=>{var g=n(63757),f=n(92850),E=n(5027),_=n(61317),i=n(14193),k=n(87102),M=n(27032);function l(y,m,c,u,h){y!==m&&E(m,function(w,W){if(h||(h=new g),i(w))_(y,m,W,c,l,u,h);else{var R=u?u(M(y,W),w,W+"",y,m,h):void 0;R===void 0&&(R=w),f(y,W,R)}},k)}x.exports=l},61317:(x,B,n)=>{var g=n(92850),f=n(29687),E=n(61329),_=n(7058),i=n(26163),k=n(26242),M=n(62360),l=n(55928),y=n(50728),m=n(10265),c=n(14193),u=n(1656),h=n(56678),w=n(27032),W=n(90469);function R(Y,J,P,z,N,Z,te){var G=w(Y,P),re=w(J,P),de=te.get(re);if(de){g(Y,P,de);return}var ne=Z?Z(G,re,P+"",Y,J,te):void 0,oe=ne===void 0;if(oe){var Oe=M(re),De=!Oe&&y(re),ot=!Oe&&!De&&h(re);ne=re,Oe||De||ot?M(G)?ne=G:l(G)?ne=_(G):De?(oe=!1,ne=f(re,!0)):ot?(oe=!1,ne=E(re,!0)):ne=[]:u(re)||k(re)?(ne=G,k(G)?ne=W(G):(!c(G)||m(G))&&(ne=i(re))):oe=!1}oe&&(te.set(re,ne),N(ne,re,z,Z,te),te.delete(re)),g(Y,P,ne)}x.exports=R},6714:(x,B,n)=>{var g=n(79570),f=n(98223);function E(_){return g(function(i,k){var M=-1,l=k.length,y=l>1?k[l-1]:void 0,m=l>2?k[2]:void 0;for(y=_.length>3&&typeof y=="function"?(l--,y):void 0,m&&f(k[0],k[1],m)&&(y=l<3?void 0:y,l=1),i=Object(i);++M<l;){var c=k[M];c&&_(i,c,M,y)}return i})}x.exports=E},27032:x=>{function B(n,g){if(!(g==="constructor"&&typeof n[g]=="function")&&g!="__proto__")return n[g]}x.exports=B},6926:(x,B,n)=>{var g=n(94541),f=n(6714),E=f(function(_,i,k){g(_,i,k)});x.exports=E},90469:(x,B,n)=>{var g=n(32667),f=n(87102);function E(_){return g(_,f(_))}x.exports=E},75985:(x,B,n)=>{(function(){var g=n(55983),f=n(97279).utf8,E=n(85884),_=n(97279).bin,i=function(k,M){k.constructor==String?M&&M.encoding==="binary"?k=_.stringToBytes(k):k=f.stringToBytes(k):E(k)?k=Array.prototype.slice.call(k,0):!Array.isArray(k)&&k.constructor!==Uint8Array&&(k=k.toString());for(var l=g.bytesToWords(k),y=k.length*8,m=1732584193,c=-271733879,u=-1732584194,h=271733878,w=0;w<l.length;w++)l[w]=(l[w]<<8|l[w]>>>24)&16711935|(l[w]<<24|l[w]>>>8)&4278255360;l[y>>>5]|=128<<y%32,l[(y+64>>>9<<4)+14]=y;for(var W=i._ff,R=i._gg,Y=i._hh,J=i._ii,w=0;w<l.length;w+=16){var P=m,z=c,N=u,Z=h;m=W(m,c,u,h,l[w+0],7,-680876936),h=W(h,m,c,u,l[w+1],12,-389564586),u=W(u,h,m,c,l[w+2],17,606105819),c=W(c,u,h,m,l[w+3],22,-1044525330),m=W(m,c,u,h,l[w+4],7,-176418897),h=W(h,m,c,u,l[w+5],12,1200080426),u=W(u,h,m,c,l[w+6],17,-1473231341),c=W(c,u,h,m,l[w+7],22,-45705983),m=W(m,c,u,h,l[w+8],7,1770035416),h=W(h,m,c,u,l[w+9],12,-1958414417),u=W(u,h,m,c,l[w+10],17,-42063),c=W(c,u,h,m,l[w+11],22,-1990404162),m=W(m,c,u,h,l[w+12],7,1804603682),h=W(h,m,c,u,l[w+13],12,-40341101),u=W(u,h,m,c,l[w+14],17,-1502002290),c=W(c,u,h,m,l[w+15],22,1236535329),m=R(m,c,u,h,l[w+1],5,-165796510),h=R(h,m,c,u,l[w+6],9,-1069501632),u=R(u,h,m,c,l[w+11],14,643717713),c=R(c,u,h,m,l[w+0],20,-373897302),m=R(m,c,u,h,l[w+5],5,-701558691),h=R(h,m,c,u,l[w+10],9,38016083),u=R(u,h,m,c,l[w+15],14,-660478335),c=R(c,u,h,m,l[w+4],20,-405537848),m=R(m,c,u,h,l[w+9],5,568446438),h=R(h,m,c,u,l[w+14],9,-1019803690),u=R(u,h,m,c,l[w+3],14,-187363961),c=R(c,u,h,m,l[w+8],20,1163531501),m=R(m,c,u,h,l[w+13],5,-1444681467),h=R(h,m,c,u,l[w+2],9,-51403784),u=R(u,h,m,c,l[w+7],14,1735328473),c=R(c,u,h,m,l[w+12],20,-1926607734),m=Y(m,c,u,h,l[w+5],4,-378558),h=Y(h,m,c,u,l[w+8],11,-2022574463),u=Y(u,h,m,c,l[w+11],16,1839030562),c=Y(c,u,h,m,l[w+14],23,-35309556),m=Y(m,c,u,h,l[w+1],4,-1530992060),h=Y(h,m,c,u,l[w+4],11,1272893353),u=Y(u,h,m,c,l[w+7],16,-155497632),c=Y(c,u,h,m,l[w+10],23,-1094730640),m=Y(m,c,u,h,l[w+13],4,681279174),h=Y(h,m,c,u,l[w+0],11,-358537222),u=Y(u,h,m,c,l[w+3],16,-722521979),c=Y(c,u,h,m,l[w+6],23,76029189),m=Y(m,c,u,h,l[w+9],4,-640364487),h=Y(h,m,c,u,l[w+12],11,-421815835),u=Y(u,h,m,c,l[w+15],16,530742520),c=Y(c,u,h,m,l[w+2],23,-995338651),m=J(m,c,u,h,l[w+0],6,-198630844),h=J(h,m,c,u,l[w+7],10,1126891415),u=J(u,h,m,c,l[w+14],15,-1416354905),c=J(c,u,h,m,l[w+5],21,-57434055),m=J(m,c,u,h,l[w+12],6,1700485571),h=J(h,m,c,u,l[w+3],10,-1894986606),u=J(u,h,m,c,l[w+10],15,-1051523),c=J(c,u,h,m,l[w+1],21,-2054922799),m=J(m,c,u,h,l[w+8],6,1873313359),h=J(h,m,c,u,l[w+15],10,-30611744),u=J(u,h,m,c,l[w+6],15,-1560198380),c=J(c,u,h,m,l[w+13],21,1309151649),m=J(m,c,u,h,l[w+4],6,-145523070),h=J(h,m,c,u,l[w+11],10,-1120210379),u=J(u,h,m,c,l[w+2],15,718787259),c=J(c,u,h,m,l[w+9],21,-343485551),m=m+P>>>0,c=c+z>>>0,u=u+N>>>0,h=h+Z>>>0}return g.endian([m,c,u,h])};i._ff=function(k,M,l,y,m,c,u){var h=k+(M&l|~M&y)+(m>>>0)+u;return(h<<c|h>>>32-c)+M},i._gg=function(k,M,l,y,m,c,u){var h=k+(M&y|l&~y)+(m>>>0)+u;return(h<<c|h>>>32-c)+M},i._hh=function(k,M,l,y,m,c,u){var h=k+(M^l^y)+(m>>>0)+u;return(h<<c|h>>>32-c)+M},i._ii=function(k,M,l,y,m,c,u){var h=k+(l^(M|~y))+(m>>>0)+u;return(h<<c|h>>>32-c)+M},i._blocksize=16,i._digestsize=16,x.exports=function(k,M){if(k==null)throw new Error("Illegal argument "+k);var l=g.wordsToBytes(i(k,M));return M&&M.asBytes?l:M&&M.asString?_.bytesToString(l):g.bytesToHex(l)}})()},46198:(x,B,n)=>{"use strict";function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(f){console.error(f)}}g(),x.exports=n(23801)},93168:(x,B,n)=>{"use strict";n.d(B,{Z:()=>k});var g=n(7485),f=n(79929),E=n(79573),_=n(14207);function i(M){var l=M.store,y=M.context,m=M.children,c=(0,g.useMemo)(function(){var w=(0,E.X)(l);return{store:l,subscription:w}},[l]),u=(0,g.useMemo)(function(){return l.getState()},[l]);(0,_.L)(function(){var w=c.subscription;return w.onStateChange=w.notifyNestedSubs,w.trySubscribe(),u!==l.getState()&&w.notifyNestedSubs(),function(){w.tryUnsubscribe(),w.onStateChange=null}},[c,u]);var h=y||f.E;return g.createElement(h.Provider,{value:c},m)}const k=i},7485:(x,B,n)=>{"use strict";x.exports=n(67887)},84515:x=>{"use strict";x.exports=canvg},29750:x=>{"use strict";x.exports=dompurify},75177:x=>{"use strict";x.exports=html2canvas}},Ji={};function ke(x){var B=Ji[x];if(B!==void 0)return B.exports;var n=Ji[x]={id:x,loaded:!1,exports:{}};return Zi[x].call(n.exports,n,n.exports,ke),n.loaded=!0,n.exports}ke.m=Zi,ke.amdO={},(()=>{var x=[];ke.O=(B,n,g,f)=>{if(n){f=f||0;for(var E=x.length;E>0&&x[E-1][2]>f;E--)x[E]=x[E-1];x[E]=[n,g,f];return}for(var _=1/0,E=0;E<x.length;E++){for(var[n,g,f]=x[E],i=!0,k=0;k<n.length;k++)(f&!1||_>=f)&&Object.keys(ke.O).every(u=>ke.O[u](n[k]))?n.splice(k--,1):(i=!1,f<_&&(_=f));if(i){x.splice(E--,1);var M=g();M!==void 0&&(B=M)}}return B}})(),ke.n=x=>{var B=x&&x.__esModule?()=>x.default:()=>x;return ke.d(B,{a:B}),B},(()=>{var x=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__,B;ke.t=function(n,g){if(g&1&&(n=this(n)),g&8||typeof n=="object"&&n&&(g&4&&n.__esModule||g&16&&typeof n.then=="function"))return n;var f=Object.create(null);ke.r(f);var E={};B=B||[null,x({}),x([]),x(x)];for(var _=g&2&&n;typeof _=="object"&&!~B.indexOf(_);_=x(_))Object.getOwnPropertyNames(_).forEach(i=>E[i]=()=>n[i]);return E.default=()=>n,ke.d(f,E),f}})(),ke.d=(x,B)=>{for(var n in B)ke.o(B,n)&&!ke.o(x,n)&&Object.defineProperty(x,n,{enumerable:!0,get:B[n]})},ke.f={},ke.e=x=>Promise.all(Object.keys(ke.f).reduce((B,n)=>(ke.f[n](x,B),B),[])),ke.u=x=>""+{126:"lazy-lib-i18n",147:"lazy-lib-rehype",972:"lazy-lib-dl"}[x]+"-"+{126:"1785a1bd25fe227bb848",147:"a4a20ba7d3c91c47ec4a",972:"58e8123e2490e2e9db9a"}[x]+".js",ke.miniCssF=x=>{},ke.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(x){if(typeof window=="object")return window}}(),ke.hmd=x=>(x=Object.create(x),x.children||(x.children=[]),Object.defineProperty(x,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+x.id)}}),x),ke.o=(x,B)=>Object.prototype.hasOwnProperty.call(x,B),(()=>{var x={},B="@mb2023/mb-proto:";ke.l=(n,g,f,E)=>{if(x[n]){x[n].push(g);return}var _,i;if(f!==void 0)for(var k=document.getElementsByTagName("script"),M=0;M<k.length;M++){var l=k[M];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==B+f){_=l;break}}_||(i=!0,_=document.createElement("script"),_.charset="utf-8",_.timeout=120,ke.nc&&_.setAttribute("nonce",ke.nc),_.setAttribute("data-webpack",B+f),_.src=n),x[n]=[g];var y=(c,u)=>{_.onerror=_.onload=null,clearTimeout(m);var h=x[n];if(delete x[n],_.parentNode&&_.parentNode.removeChild(_),h&&h.forEach(w=>w(u)),c)return c(u)},m=setTimeout(y.bind(null,void 0,{type:"timeout",target:_}),12e4);_.onerror=y.bind(null,_.onerror),_.onload=y.bind(null,_.onload),i&&document.head.appendChild(_)}})(),ke.r=x=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},ke.nmd=x=>(x.paths=[],x.children||(x.children=[]),x),ke.j=426,ke.p="/mb-proto2/",(()=>{var x={426:0};ke.f.j=(g,f)=>{var E=ke.o(x,g)?x[g]:void 0;if(E!==0)if(E)f.push(E[2]);else{var _=new Promise((l,y)=>E=x[g]=[l,y]);f.push(E[2]=_);var i=ke.p+ke.u(g),k=new Error,M=l=>{if(ke.o(x,g)&&(E=x[g],E!==0&&(x[g]=void 0),E)){var y=l&&(l.type==="load"?"missing":l.type),m=l&&l.target&&l.target.src;k.message="Loading chunk "+g+" failed.\n("+y+": "+m+")",k.name="ChunkLoadError",k.type=y,k.request=m,E[1](k)}};ke.l(i,M,"chunk-"+g,g)}},ke.O.j=g=>x[g]===0;var B=(g,f)=>{var[E,_,i]=f,k,M,l=0;if(E.some(m=>x[m]!==0)){for(k in _)ke.o(_,k)&&(ke.m[k]=_[k]);if(i)var y=i(ke)}for(g&&g(f);l<E.length;l++)M=E[l],ke.o(x,M)&&x[M]&&x[M][0](),x[M]=0;return ke.O(y)},n=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];n.forEach(B.bind(null,0)),n.push=B.bind(null,n.push.bind(n))})(),ke.nc=void 0,ke.O(void 0,[736],()=>ke(76557)),ke.O(void 0,[736],()=>ke(61936));var Xi=ke.O(void 0,[736],()=>ke(7382));Xi=ke.O(Xi)})();

//# sourceMappingURL=preview-related-917d4d5dea3fa25e8eee.js.map